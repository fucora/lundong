(function(e,t){if(!e.seajs){var r=e.seajs={version:"2.2.3"},i=r.data={},l=H("Object"),a=H("String"),o=Array.isArray||H("Array"),s=H("Function"),d=H("Undefined"),n=0,p=i.events={};r.on=function(e,t){return(p[e]||(p[e]=[])).push(t),r},r.off=function(e,t){if(!e&&!t)return p=i.events={},r;var l=p[e];if(l)if(t)for(var a=l.length-1;a>=0;a--)l[a]===t&&l.splice(a,1);else delete p[e];return r};var u,h=r.emit=function(e,t){var i,l=p[e];if(l)for(l=l.slice();i=l.shift();)i(t);return r},c=/[^?#]*\//,f=/\/\.\//g,g=/\/[^/]+\/\.\.\//,m=/([^:/])\/\//g,x=/^([^/:]+)(\/.+)$/,y=/{([^{]+)}/g,b=/^\/\/.|:\//,w=/^.*?\/\/.*?\//,v=document,k=N(v.URL),S=v.scripts,A=v.getElementById("seajsnode")||S[S.length-1],_=N(((u=A).hasAttribute?u.src:u.getAttribute("src",4))||k);r.resolve=function(e,t){if(!e)return"";var r,l,o;e=function(e){var t=i.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(y,function(e,r){return a(t[r])?t[r]:e})),e}(e=function(e){var t,r=i.paths;return r&&(t=e.match(x))&&a(r[t[1]])&&(e=r[t[1]]+t[2]),e}(e=function(e){var t=i.alias;return t&&a(t[e])?t[e]:e}(e))),l=(r=e).length-1;var d=W(e="#"===(o=r.charAt(l))?r.substring(0,l):".js"===r.substring(l-2)||r.indexOf("?")>0||".css"===r.substring(l-3)||"/"===o?r:r+".js",t);return d=function(e){var t=i.map,r=e;if(t)for(var l=0,a=t.length;l<a;l++){var o=t[l];if((r=s(o)?o(e)||e:e.replace(o[0],o[1]))!==e)break}return r}(d)};var E,M,C=v.head||v.getElementsByTagName("head")[0]||v.documentElement,V=C.getElementsByTagName("base")[0],P=/\.css(?:\?|$)/i,T=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;r.request=function(e,t,r,l){var a=P.test(e),o=v.createElement(a?"link":"script");r&&(o.charset=r),d(l)||o.setAttribute("crossorigin",l),function(e,t,r,l){var a="onload"in e;function o(){e.onload=e.onerror=e.onreadystatechange=null,r||i.debug||C.removeChild(e),e=null,t()}!r||!T&&a?a?(e.onload=o,e.onerror=function(){h("error",{uri:l,node:e}),o()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&o()}:setTimeout(function(){!function e(t,r){var i,l=t.sheet;if(T)l&&(i=!0);else if(l)try{l.cssRules&&(i=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(i=!0)}setTimeout(function(){i?r():e(t,r)},20)}(e,t)},1)}(o,t,a,e),a?(o.rel="stylesheet",o.href=e):(o.async=!0,o.src=e),E=o,V?C.insertBefore(o,V):C.appendChild(o),E=null};var R,z=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,I=/\\\\/g,L=r.cache={},j={},Y={},X={},B=U.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};U.prototype.resolve=function(){for(var e=this.dependencies,t=[],r=0,i=e.length;r<i;r++)t[r]=U.resolve(e[r],this.uri);return t},U.prototype.load=function(){if(!(this.status>=B.LOADING)){this.status=B.LOADING;var e=this.resolve();h("load",e);for(var t,r=this._remain=e.length,i=0;i<r;i++)(t=U.get(e[i])).status<B.LOADED?t._waitings[this.uri]=(t._waitings[this.uri]||0)+1:this._remain--;if(0!==this._remain){var l={};for(i=0;i<r;i++)(t=L[e[i]]).status<B.FETCHING?t.fetch(l):t.status===B.SAVED&&t.load();for(var a in l)l.hasOwnProperty(a)&&l[a]()}else this.onload()}},U.prototype.onload=function(){this.status=B.LOADED,this.callback&&this.callback();var e,t,r=this._waitings;for(e in r)r.hasOwnProperty(e)&&((t=L[e])._remain-=r[e],0===t._remain&&t.onload());delete this._waitings,delete this._remain},U.prototype.fetch=function(e){var t=this.uri;this.status=B.FETCHING;var l={uri:t};h("fetch",l);var a=l.requestUri||t;function o(){r.request(l.requestUri,l.onRequest,l.charset,l.crossorigin)}a&&!Y[a]?j[a]?X[a].push(this):(j[a]=!0,X[a]=[this],h("request",l={uri:t,requestUri:a,onRequest:function(){delete j[a],Y[a]=!0,R&&(U.save(t,R),R=null);var e,r=X[a];delete X[a];for(;e=r.shift();)e.load()},charset:s(i.charset)?i.charset(a):i.charset,crossorigin:s(i.crossorigin)?i.crossorigin(a):i.crossorigin}),l.requested||(e?e[l.requestUri]=o:o())):this.load()},U.prototype.exec=function(){var e=this;if(e.status>=B.EXECUTING)return e.exports;e.status=B.EXECUTING;var t=e.uri;function r(e){return U.get(r.resolve(e)).exec()}r.resolve=function(e){return U.resolve(e,t)},r.async=function(e,i){return U.use(e,i,t+"_async_"+F()),r};var i=e.factory,l=s(i)?i(r,e.exports={},e):i;return void 0===l&&(l=e.exports),delete e.factory,e.exports=l,e.status=B.EXECUTED,h("exec",e),l},U.resolve=function(e,t){var i={id:e,refUri:t};return h("resolve",i),i.uri||r.resolve(i.id,t)},U.define=function(e,t,r){var i,l,a=arguments.length;1===a?(r=e,e=void 0):2===a&&(r=t,o(e)?(t=e,e=void 0):t=void 0),!o(t)&&s(r)&&(i=r.toString(),l=[],i.replace(I,"").replace(z,function(e,t,r){r&&l.push(r)}),t=l);var d={id:e,uri:U.resolve(e),deps:t,factory:r};if(!d.uri&&v.attachEvent){var n=function(){if(E)return E;if(M&&"interactive"===M.readyState)return M;for(var e=C.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var r=e[t];if("interactive"===r.readyState)return M=r}}();n&&(d.uri=n.src)}h("define",d),d.uri?U.save(d.uri,d):R=d},U.save=function(e,t){var r=U.get(e);r.status<B.SAVED&&(r.id=t.id||e,r.dependencies=t.deps||[],r.factory=t.factory,r.status=B.SAVED)},U.get=function(e,t){return L[e]||(L[e]=new U(e,t))},U.use=function(t,r,i){var l=U.get(i,o(t)?t:[t]);l.callback=function(){for(var t=[],i=l.resolve(),a=0,o=i.length;a<o;a++)t[a]=L[i[a]].exec();r&&r.apply(e,t),delete l.callback},l.load()},U.preload=function(e){var t=i.preload,r=t.length;r?U.use(t,function(){t.splice(0,r),U.preload(e)},i.cwd+"_preload_"+F()):e()},r.use=function(e,t){return U.preload(function(){U.use(e,t,i.cwd+"_use_"+F())}),r},U.define.cmd={},e.define=U.define,r.Module=U,i.fetchedList=Y,i.cid=F,r.require=function(e){var t=U.get(U.resolve(e));return t.status<B.EXECUTING&&(t.onload(),t.exec()),t.exports};var O,D;i.base=(_.match(/^(.+?\/)(\?\?)?(seajs\/)+/)||["",_])[1],i.dir=_,i.cwd=k,i.charset="utf-8",i.history={},i.preload=(O=[],D=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2"),(D+=" "+v.cookie).replace(/(seajs-\w+)=1/g,function(e,t){O.push(t)}),O),r.config=function(e){for(var t in e){var a=e[t],s=i[t];if(i.history[t]=i.history[t]||[],i.history[t].push(G(a)),s&&l(s))for(var d in a)s[d]=a[d];else o(s)?a=s.concat(a):"base"===t&&("/"!==a.slice(-1)&&(a+="/"),a=W(a)),i[t]=a}return h("config",e),r}}function H(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function F(){return n++}function N(e){return e.match(c)[0]}function W(e,t){var r,l=e.charAt(0);if(b.test(e))r=e;else if("."===l)r=function(e){for(e=e.replace(f,"/");e.match(g);)e=e.replace(g,"/");return e=e.replace(m,"$1/")}((t?N(t):i.cwd)+e);else if("/"===l){var a=i.cwd.match(w);r=a?a[0]+e.substring(1):e}else r=i.base+e;return 0===r.indexOf("//")&&(r=location.protocol+r),r}function U(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}function G(e){if(l(e)){var t={};for(var r in e)t[r]=e[r];return t}return e}})(this),(e=>{window.define?define("magix5",e):window.Magix=e()})(()=>{let e=0,t=[],r=window,i=document,l=r.setTimeout,a=encodeURIComponent;function o(){}let s,d=JSON.stringify,n=i.head,p=r.performance,u=p.now.bind(p),h="prototype",c=Object[h].toString,f=e=>c.call(e).slice(8,-1),g=e=>"Object"==f(e),m=Array.isArray,x=t=>(t||"_")+e++,y=e=>i.getElementById(e),b=(e,t)=>e.innerHTML=t,w={rootId:x(),error(e){throw e}},v=e=>!e||"object"!=typeof e,k=(e,t,r)=>{if(e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},S=e=>{e["\x1ea"]=null},{assign:A,keys:_,hasOwnProperty:E}=Object,M=n.getAttribute,C=(e,t)=>M.call(e,t),V=(e,t,r)=>{t&&!V[e]&&(V[e]=1,r=i.createElement("style"),b(r,t),n.appendChild(r))},P=(e,t,r,i)=>{try{i=m(t)?e.apply(r,t):e.call(r,t)}catch(e){w.error(e)}return i},T=(e,t)=>e&&E.call(e,t),R=(e,t)=>{let r,i;if(v(t))"\x1e"==(r=t+"")[0]&&(t=e[r]);else for(r in t)i=t[r],i=R(e,i),t[r]=i;return t},z=(e,t)=>t.a-e.a;function I(e,t,r){(r=this).a=[],r.b=t||5,r.c=r.b+(e||20)}A(I[h],{get(e){let t=this.a["\x1e"+e];return t&&(t.a++,t=t.c),t},set(e,t){let r=this,i=r.a,l="\x1e"+e,a=i[l],o=r.b;if(!a){if(i.length>=r.c)for(i.sort(z);o--;)(a=i.pop()).a>0&&r.del(a.o);a={d:e},i.push(a),i[l]=a}a.c=t,a.a=1},del(e){e="\x1e"+e;let t=this.a,r=t[e];r&&(r.a=-1,r.c="",t[e]=null)},has(e){return T(this.a,"\x1e"+e)}});let L,j={bubbles:!0,cancelable:!0},Y=[],X=(e,t,r,i,l,a)=>{let o={a:i,b:r,c:t,d:e,e(e){i?P(r,e,a):r(e)}};Y.push(o),e.addEventListener(t,o.e,l)},B=(e,t,r,i,l)=>{for(let a,o=Y.length;o--;)if((a=Y[o]).c==t&&a.a==i&&a.d==e&&a.b===r){Y.splice(o,1),e.removeEventListener(t,a.e,l);break}},O=new I,D=(e,t,r)=>(O.has(e)?r=O.get(e):(r=P(Function(`return ${e}`)),t&&O.set(e,r)),r),H=decodeURIComponent,F=new I,N=e=>{let t,r,i,l,a,o,s=F.get(e);if(!s){if(l={},-1==(a=e.indexOf("?"))?(t=e,o=""):(t=e.substring(0,a),o=e.substring(a+1)),o)for(a of o.split("&"))[r,i]=a.split("="),l[H(r)]=H(i||"");F.set(e,s={a:t,b:l})}return{path:s.a,params:A({},s.b)}},W=new I,U=(e,t,r)=>(W.has(e)?r=W.get(e):(r=D(e,null),e.includes("\x1e")?R(t,r):W.set(e,r)),r),G=0,K=[],q=()=>{let e,t,r,i=u();try{for(;;){if(e=K[G],r=K[G-1],t=K[G+1],K[G]=null,K[G-1]=null,K[G+1]=null,K[G+2]=null,G+=4,!e){K.length=G=0;break}if(e!=o&&(m(t)?e.apply(r,t):e.call(r,t)),u()-i>8&&K.length>G){l(q);break}}}catch(e){w.error(e),l(q)}},J=(e,t,r,i)=>{if(G||(G=1,l(q)),i)for(let e=K.length-1;e>=G;e-=4)K[e]==i&&(K[e-3]=null,K[e-2]=o,K[e-1]=null,K[e]=null);K.push(r,e,t,i)},$=x();w.views={},w.defaultView=$;let Q=e=>e.__esModule||window.Symbol&&"Module"===e[Symbol.toStringTag],Z=e=>"Function"==f(e),ee=(e,t)=>{if(e&&e.prototype&&e.prototype instanceof it)return t(e);if($==e)return L||(L=it.extend()),t(L);let r,i=w.views,l=[],a=0,o=()=>{a||J(t,l)},s=(e,t)=>{let r=e=>{l[t]||(a--,l[t]=Q(e)?e.default:e,o())};(e=e(r))&&e.then&&e.then(r)},d=e=>t=>{a--,l[e]=Q(t)?t.default:t,o()};if(e){m(e)||(e=[e]);for(let t=0;t<e.length;t++)(r=i[e[t]])?(Z(r)&&!r.extend?(a++,s(r,t)):l[t]=Q(r)?r.default:r,o()):window.seajs?(a++,seajs.use(e[t],d(t))):window.require&&(r=require(e[t]),l[t]=Q(r)?r.default:r,o())}else o()};function te(){}let re=(e,t,r,i,l)=>(te[h]=t[h],l=new te,A(l,r),A(e,i),l.constructor=e,e[h]=l,e),ie=e=>e;let le,ae,oe={fire(e,t){let r,i,l=this,a=l["\x1e"+e],o=0;if(t||(t={}),t.type=e,a)for(r=a.length;o<r;o++)(i=a[o]).a?(i.b=1,P(i.a,t,l),i.b=""):i.b||(a.splice(o--,1),r--);(a=l[`on${e}`])&&P(a,t,l)},on(e,t){let r="\x1e"+e;(this[r]||(this[r]=[])).push({a:t})},off(e,t){let r,i="\x1e"+e,l=this,a=l[i];if(t){if(a)for(r of a)if(r.a==t){r.a="";break}}else l[i]=null,l[`on${e}`]=null}},se={},de=(e,t,r,i)=>{t.includes("\x1e")&&(i=se[e])&&R(i.a,r)},ne=(e,t)=>{T(se,e)||(se[e]=t,he.fire("add",{vframe:t}))},pe=(e,t,r,i,l,a,o)=>{for(t=e.c,l=e.d;t.length;)[r,o,i]=t.shift(),J(i,(a=l[r])&&P(a,o,l))},ue=e=>e.b||(e.b=x(ae));function he(e,t){let r=this,i=ue(e);r.id=i,r.root=e,r.e=1,r.b={},r.pId=t,r.c=[],r.a={},ne(i,r)}A(he,{root:()=>le,all:()=>se,byId:e=>se[e],byNode:e=>se[e.b]},oe),A(he[h],{mountView(e,t){let r,i,l,a,o,s=this,{id:d,root:n,pId:p}=s;!s.f&&n&&(s.f=1,s.g=n.innerHTML),s.unmountView(),n&&e&&(r=N(e),l=r.path,s.path=e,a=r.params,de(p,e,a),s.h=l,(p=a["\x1e"])&&g(p)?a=p:A(a,t),i=s.e,ee(l,e=>{if(i==s.e){if(!e)return void 0;o=rt(e),l=new e(d,n,s,a,o),s.d=l,$e(l),P(l.init,a,l),J(l.f,a,l),J(()=>{l.g(),l.tmpl||l.h||Je(l)})}}))},unmountView(){let e=this,{d:t,root:r}=e;e.c=[],t&&(e.d=0,t.c&&(t.c=0,S(t),e.unmountZone(),t.fire("destroy"),$e(t,1),r&&e.f&&b(r,e.g))),e.e++},mountVframe(e,t,r){let i,l=this,a=l.id,o=l.b,s=ue(e);return(i=se[s])||(T(o,s)||(l.i=0),o[s]=s,i=new he(e,a)),i.mountView(t,r),i},mountZone(e){let t,r=this,i=(e=e||r.root).querySelectorAll("[mx5-view]");for(t of i)t.a||(t.a=1,r.mountVframe(t,C(t,"mx5-view")))},unmountVframe(e,t){let r,i;var l,a,o;e=e?this.b[t?e:e.b]:this.id,(r=se[e])&&(r.unmountView(),i=r.pId,(a=se[l=e])&&(delete se[l],(o=a.root).a=0,o.b=0,he.fire("remove",{vframe:a}),a.id=a.root=a.pId=a.b=null),(r=se[i])&&T(r.b,e)&&(delete r.b[e],r.i=0))},unmountZone(e){let t,r,i,l=this;for(t in l.b)(i=e?(r=se[t])&&k(r.root,e):1)&&l.unmountVframe(t,1)},children(e){return(e=this).i||(e.i=_(e.b))},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=se[t.pId];return t},invoke(e,t){let r,i,l=this,a=l.c;return new Promise(o=>{(r=l.d)&&r.h?o((i=r[e])&&P(i,t,r)):a.push([e,t,o])})}});let ce=new I(30,10),fe=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,ge={},me={},xe={};let ye=(e,r)=>{let i,l,a,o,d,n,p,u,h=[],c=e,f=C(e,"mx5-"+r),g=0;if(f&&((d=ce.get(f))||(d={v:(d=f.match(fe)||t)[1],n:d[2],i:d[3]},ce.set(f,d)),d=A({},d,{r:f})),d&&!d.v||me[r]){if(!(u=c.c)){for(p=[c];c!=s&&(c=c.parentNode);){if(se[l=c.b]||(l=c.c)){u=l;break}p.push(c)}if(u)for(f of p)f.c=u}if(u){c=e.b,se[c]&&(g=u=c);do{if((i=se[u])&&(n=i.d)){if(o=(a=n.i)[r])for(c=o.length;c--;)a={r:l=o[c],v:u,n:l},l?!g&&e.matches(l)&&h.push(a):g&&h.unshift(a);if(n.tmpl&&!g)break;g=0}}while(i&&(u=i.pId))}}return d&&h.push(d),h},be=e=>{let t,r,i,l,a,o,s,d,{target:n,type:p}=e,u=[];for(;n&&1==n.nodeType&&!(e.cancelBubble||(r=n.d)&&r[p]);){if(u.push(n),(t=ye(n,p)).length){u=[];for(let{v:r,r:u,n:h,i:c}of t){if(s!=r){if(s&&e.cancelBubble)break;s=r}if(!(l=(i=se[r])&&i.d))break;l.h&&(o=l[a=h+"\x1e"+p])&&(e.eventTarget=n,d=c?U(c,i.a):xe,e.params=d,P(o,e,l))}}n=n.parentNode}for(s of u)(r=s.d||(s.d={}))[p]=1},we=(e,t,r)=>{let i=0|ge[e],l=r?-1:1;i&&r!==i||(r?B:X)(s,e,be),ge[e]=i+l,t&&(me[e]=(0|me[e])+l)};let ve={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","`":"&#96;"},ke=/[&<>"'\`]/g,Se=e=>null==e?"":""+e,Ae=e=>ve[e],_e=e=>Se(e).replace(ke,Ae),Ee={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Me=e=>Ee[e],Ce=/[!')(*]/g,Ve=e=>a(Se(e)).replace(Ce,Me),Pe=/[\\'"]/g,Te=e=>Se(e).replace(Pe,"\\$&"),Re=(e,t,r)=>(e[r]=t,r),ze=(e,r,i)=>{if(e.c&&(i=e.tmpl)){let l,a=e.j,o=e.id,s=se[o],d={a:[],b:0},n=e.d,p=s.a;e.k=0,e.j={},r&&e.fire("dompatch"),l=i(n,Le,o,Se,Ve,p,Re,Te,m);let u=()=>{if(e.l=l,e.m>1)e.m=1,ze(e);else{for(l of(e.m=0,i=d.c||!e.h,d.a))J(l.g,t,l,"\x1e"+l.id);for(l of(i&&Je(e),e.fire("domready"),e.n))l()}};J(Ne,[e.root,e.l,l,d,s,a,e,u])}},Ie={},Le=(e,t,r,i,l)=>{let a;if(e){t=t||Ie;let o,s,d,n,p,u,h="",c={},f=0,g="<"+e,m="",x=[];if(r)for(n of r){if(d=n.a,n.b==Ye){if(!d)continue;d=_e(d)}m+=d,u&&n.b==Ye&&u.b==Ye?u.a+=n.a:(n.d&&(c[n.d]=(c[n.d]||0)+1,f++),o=o||n.e,u=n,x.push(n))}for(s in i=i||Ie,t)!1!==(d=t[s])&&null!=d?(!0===d&&(t[s]=d=i[s]?d:""),"id"==s?h=d:"_"!=s||h?"mx5-view"==s&&d&&!h&&(h=e+"\x1e"+N(d).path):h=d,"value"==s&&"textarea"==e?m=d:T(je,s)||(g+=` ${s}="${d&&_e(d)}"`)):i[s]||delete t[s];p=g,a={a:g+=l?"/>":`>${m}</${e}>`,c:m,d:h,b:e,e:o||t.$,f:i,g:p,h:t,i:x,j:c,k:f,l:l}}else a={b:t?"\x1e":Ye,a:r+""};return a},je={_:1,$:1};let Ye=e;let Xe="http://www.w3.org/",Be={svg:`${Xe}2000/svg`,math:`${Xe}1998/Math/MathML`},Oe=(e,t,r)=>{let i,l,a,o=0,s=r.f,d=t.f,n=r.h,p=t.h;if(t)for(i in p)T(n,i)||(o=1,(a=d[i])?e[a]="":e.removeAttribute(i));for(i in n)T(je,i)||(l=n[i],(a=s[i])?t&&e[a]==l||(o=1,e[a]=l):t&&p[i]==l||(o=1,e.setAttribute(i,l)));return o&&delete e.d,o},De=(e,t)=>{let r,l=e.b;return l==Ye?r=i.createTextNode(e.a):(r=i.createElementNS(Be[l]||t.namespaceURI,l),Oe(r,0,e),b(r,e.c)),r},He=(e,t,r,i,l)=>{let a,o,s,d,n={};for(a=i;a>=r;a--,l--)(s=(o=e[a]).d)&&(n[d="\x1e"+s]=(n[d]||0)+1,(o=n[s]||(n[s]=[])).push(t[l]));return n},Fe=(e,t)=>!e.d&&!t.d&&e.b==t.b||e.b==Ye&&t.b==Ye||"\x1e"==e.b||"\x1e"==t.b||e.d&&t.d==e.d,Ne=(e,t,r,i,l,a,o,s)=>{if(o.c){if(t){if(t.e||t.c!=r.c){let d,n,p,u,h,c=t.i,f=r.i,g=r.j,m=r.k,x=t.k,y=e.childNodes,w=0,v=c.length-1,k=0,S=f.length-1;0;let A=c[w],_=c[v],E=f[k],M=f[S],C=w,V=v;for(;w<=v&&k<=S;)if(A)if(_)if(Fe(A,E))i.b++,J(We,[y[C],e,A,E,i,l,a,o,s]),g[A.d]&&(g[A.d]--,m--,(u=h&&h[A.d])&&--h["\x1e"+A.d]),C++,A=c[++w],E=f[++k];else if(Fe(_,M))i.b++,J(We,[y[V],e,_,M,i,l,a,o,s]),g[_.d]&&(g[_.d]--,m--),V--,_=c[--v],M=f[--S];else if(Fe(A,M))n=y[C],e.insertBefore(n,y[V+1]),i.b++,J(We,[n,e,A,M,i,l,a,o,s]),g[A.d]&&(g[A.d]--,m--),V--,A=c[++w],M=f[--S];else if(Fe(E,_))n=y[V],e.insertBefore(n,y[C++]),i.b++,J(We,[n,e,_,E,i,l,a,o,s]),g[_.d]&&(g[_.d]--,m--),_=c[--v],E=f[++k];else{if(!h&&m>0&&x>0&&(h=He(c,y,w,v,V)),(u=h&&h[E.d])&&(u=u[--h["\x1e"+E.d]])){if(p=A,u!=y[C]){for(n=w+1,d=C+1;n<=v;n++)if((p=c[n])&&y[d++]==u){c[n]=null;break}w--,e.insertBefore(u,y[C])}g[p.d]&&g[p.d]--,i.b++,J(We,[u,e,p,E,i,l,a,o,s])}else h&&h[A.d]&&g[A.d]?(i.c=1,e.insertBefore(De(E,e),y[C]),w--,V++):(i.b++,J(We,[y[C],e,A,E,i,l,a,o,s]));++C,A=c[++w],E=f[++k]}else _=c[--v];else A=c[++w];for(d=k,n=1;d<=S;d++,n++)"\x1e"==(p=f[d]).b?b(e,p.a):e.insertBefore(De(p,e),y[V+n]),i.c=1;for(d=C;d<=V;d++)1==(p=y[C]).nodeType&&l.unmountZone(p),e.removeChild(p),i.c=1}}else i.c=1,b(e,r.c);i.b||s()}},We=(e,t,r,i,l,a,o,s,d)=>{if(s.c){0;let n=r.h,p=i.h;if(r.e||r.a!=i.a)if("\x1e"==r.b||"\x1e"==i.b)l.c=1,b(t,i.a);else if(r.b==i.b){if(r.b==Ye)l.c=1,e.nodeValue=i.a;else if(!n._||n._!=p._){let t,u,h,c,f,g,m,x=p["mx5-view"],y=i.c,b=r.g!=i.g,w=se[e.b],v=x&&N(x);if(b&&(b=Oe(e,r,i))&&(l.c=1),x&&w&&w.h==v.path&&(c=w.d)){if(g=y!=r.c,m=x!=w.path,h=n.$,!g&&!m&&h)for(h of f=h.split(","))if("#"==h||T(o,h)){m=1;break}(m||g)&&(h=c.f,f=v.params,de(w.pId,x,f),w.path=x,w.g=y,!1!==P(h,f,c)&&l.a.push(c),t=!c.tmpl)}else t=1,u=w;u&&(l.c=1,w.unmountVframe()),t&&!i.l&&Ne(e,r,i,l,a,o,s,d)}}else l.c=1,a.unmountZone(e),t.replaceChild(De(i,t),e);--l.b||d()}},Ue={},Ge=A({get:e=>e?Ue[e]:Ue,set(e){A(Ue,e)}},oe),Ke=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,qe=(e,t,r)=>(e.a?r=e:((r=function(e,t){for(t of r.a)P(t,e,this)}).a=[e],r.b=1),r.a=r.a.concat(t.a||t),r),Je=e=>{let t,r;e.c&&(r=e.h,e.h=1,(t=e.owner).mountZone(),r||J(pe,t))},$e=(e,t)=>{let r,{o:i,i:l,p:a,id:o}=e;for(r in i)we(r,l[r],t);for(r of(i=t?B:X,a))i(r.a,r.b,r.c,o,r.d,e)},Qe={win:r,doc:i},Ze=(e,t,r)=>{let i,l,a,o,s={};for(l of e)for(i in l)a=l[i],o=s[i],"ctor"!=i?(Ke.test(i)&&(o?a=qe(o,a):a.b=1),s[i]=a):r.push(a);for(i in s)T(t,i)||(t[i]=s[i])};function et(...e){let t=this.a||(this.a=[]);return Ze(e,this[h],t),this}let tt=e=>(function(...t){return P(e,t,this)});let rt=e=>{if(!e["\x1e"]){e["\x1e"]=[];let t,r,i,l,a,o,s,d,n,p,u,c=e[h],f={},g=[],m={};for(s in(r=c.mixins)&&Ze(r,c,e["\x1e"]),c)if(t=c[s],r=s.match(Ke))for(d of([,o,i,l,u]=r,p=u?D(u):{},l=l.split(","))){if(a=Qe[i],n=1,o){if(a){g.push({c:t,a:a,b:d,d:p});continue}n=2,(a=m[d])||(a=m[d]=[]),a[i]||(a[i]=1,a.push(i))}f[d]=f[d]|n,(a=c[d=i+"\x1e"+d])?a.b&&(t.b?c[d]=qe(t,a):T(c,s)&&(c[d]=t)):c[d]=t}c.g=c.render=tt(c.render),c.o=f,c.p=g,c.i=m,c.f=c.assign}return e["\x1e"]};function it(e,t,r,i){(i=this).root=t,i.owner=r,i.id=e,i.c=1,i.k=1,i.d={},i.j={},i.m=0,i.n=[]}function lt(){this.id=x("b"),this.a={}}A(it,{merge:et,extend:function e(t,r){let i=this,l=(t=t||{}).ctor;function a(e,t,r,a,o,s,d,n){if(i.call(n=this,e,t,r,a),s=i.a)for(d of s)P(d,a,n);if(o)for(d of o)P(d,a,n);l&&P(l,a,n)}return a.merge=et,a.extend=e,re(a,i,t,r)}}),A(it[h],oe,{init:o,render:o,assign:o,observeLocation(e,t){let r;(r=this.a).a=1,g(e)&&(t=e.path,e=e.params),r.b=t,e&&(r.c=(e+"").split(","))},get(e,t){return t=this.d,e&&(t=t[e]),t},set(e,t){let r,i,l,a=this,o=a.d,s=a.j,d=a.k;for(l in e)r=e[l],i=o[l],v(r)&&i==r||T(t,l)||(s[l]=1,d=1),o[l]=r;return a.k=d,a},digest(e,t){let r=this.set(e,t);return new Promise(e=>{r.k?(r.m++,r.n.push(e),1==r.m&&ze(r,1)):e()})},finale(){let e=this;return new Promise(t=>{e.m?e.n.push(t):t()})}}),A(lt[h],{get(e,t){let r,i=this.a;if(e){let t,r=m(e)?e.slice():(e+"").split(".");for(;(t=r.shift())&&i;)i=i[t];t&&(i=void 0)}return void 0!==t&&(r=f(t))!=f(i)&&(i=t),i},set(e,t){g(e)||(e={[e]:t}),A(this.a,e)}});let at=(e,t,r)=>i=>{if(r=e[t]){delete e[t];for(let e of r)P(e,i,r.a)}},ot=(e,t,r,i,l)=>{if(e.a)return e;if(e.b)return e.enqueue(ot.bind(e,e,t,r,i,l));e.b=1,m(t)||(t=[t]);let a=e.constructor,o=0,s=a.d,d=((e,t,r,i,l,a)=>{let o=[],s=null,d=0;return(n,p,h)=>{let c;d++;let f,g=n.b,m=g.a;if(o[p+1]=n,h?(s=h,c=1):a.has(m)||(m&&a.set(m,n),g.b=u(),(f=g.c)&&P(f,n,n),c=1),!r.a){let t=d==i;t&&(r.b=0,2==l&&(o[0]=s,P(e,o,r))),1==l&&P(e,[h||null,n,t,p],r)}c&&t.fire("end",{bag:n,error:h})}})(r,a,e,t.length,i,a.c);for(let e of t)if(e){let t,[r,i]=a.get(e,l),n=r.b.a,p=d.bind(r,r,o++);n&&s[n]?s[n].push(p):i?(n&&((t=[p]).a=r,s[n]=t,p=at(s,n)),a.e(r,p)):p()}return e};function st(){this.id=x("s"),this.f=[]}A(st[h],{all(e,t){return ot(this,e,t,2)},save(e,t){return ot(this,e,t,2,1)},one(e,t){return ot(this,e,t,1)},enqueue(e){let t=this;return t.a||(t.f.push(e),t.dequeue(t.g)),t},dequeue(...e){let t,r=this;r.b||r.a||(r.b=1,l(()=>{r.b=0,r.a||(t=r.f.shift())&&P(t,r.g=e)}))},destroy(e){(e=this).a=1,e.f=0}});let dt=(e,t,r)=>[d(t),d(e)].join("\x1e"),nt=A({add(e){let t,r=this.h;for(t of(m(e)||(e=[e]),e))if(t){let{name:e,cache:i}=t;t.cache=0|i,r[e]=t}},create(e){let t=this.meta(e),r=0|e.cache||t.cache,i=new lt;i.set(t),i.b={c:t.after,a:r&&dt(t,e)},g(e)&&i.set(e);let l=t.before;return l&&P(l,i,i),this.fire("begin",{bag:i}),i},meta(e){return this.h[e.name||e]||e},get(e,t){let r,i,l=this;return t||(r=l.cached(e)),r||(r=l.create(e),i=1),[r,i]},cached(e){let t,r,i=this,l=i.c,a=i.meta(e),o=0|e.cache||a.cache;if(o&&(r=dt(a,e)),r){let e=i.d[r];e?t=e.a:(t=l.get(r))&&u()-t.b.b>o&&(l.del(r),t=0)}return t}},oe);st.extend=((e,t,r)=>{function i(){st.call(this)}return i.e=e,i.c=new I(t,r),i.d={},i.h={},re(i,st,null,nt)});let pt=0,ut={config:(e,t)=>(t=w,e&&(t=g(e)?A(t,e):t[e]),t),boot(e){pt||(pt=1,A(w,e),((e,t)=>(le||(s=i.body,e=ae=w.rootId,(t=y(e))||(t=s),le=new he(t)),le))().mountView(w.defaultView))},unboot(){pt&&le&&(le.unmountVframe(),le=null)},toMap:(e,t)=>{let r,i={};if(e)for(r of e)i[t&&r?r[t]:r]=t?r:1+(0|i[r]);return i},toTry:P,toUrl:(e,t,r)=>{let i,l,o,s=[];for(l in t)((i=t[l]+"")||T(r,l))&&(i=a(i),s.push(o=l+"="+i));return o&&(e+=(e&&(e.includes("?")?"&":"?"))+s.join("&")),e},parseUrl:N,guid:x,use:ee,dispatch:(e,t,r)=>{let i=new Event(t,j);A(i,r),e.dispatchEvent(i)},guard:ie,type:f,has:T,inside:k,applyStyle:V,Cache:I,View:it,Vframe:he,State:Ge,Service:st,Event:oe,mark:(e,t,r,i,l)=>(null!==e[l="\x1ea"]&&(r=e[l]||(e[l]={}),T(r,t)||(r[t]=0),i=++r[t]),r=>(r=e[l],r&&i===r[t])),unmark:S,node:y,task:J};return ut.default=ut,ut});let Designer={init(e){let t=document.getElementById("boot").src.replace(/\/[^\/]+$/,"/");seajs.config({paths:{designer:t+"designer",i18n:t+"i18n",gallery:t+"gallery",util:t+"util",panels:t+"panels",elements:t+"elements"},alias:{magix:"magix5"}}),seajs.use(["magix","i18n/index"],(t,r)=>{t.applyStyle("rd-_",'body,h5,input,textarea,ul{margin:0;padding:0}ul{list-style-type:none;list-style-image:none}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:62.5%}body{font-size:14px;line-height:1.5}body,button,input,textarea{font-family:helvetica neue,arial,hiragino sans gb,stheiti,wenquanyi micro hei,sans-serif;-ms-text-autospace:ideograph-alpha ideograph-numeric ideograph-parenthesis;-ms-text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis;text-spacing:ideograph-alpha ideograph-numeric ideograph-parenthesis}h5{font-size:14px}img{border-style:none;width:auto\\9;height:auto;max-width:100%;vertical-align:top;-ms-interpolation-mode:bicubic}svg:not(:root){overflow:hidden}button,input,textarea{font-family:inherit;font-size:100%;margin:0;vertical-align:middle;*vertical-align:middle}button,input{*overflow:visible}button{text-transform:none}button[disabled],input[disabled]{cursor:not-allowed}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}button::-moz-focus-inner,input::-moz-focus-inner{border-style:none;padding:0}textarea{overflow:auto;resize:vertical}@media screen and (-webkit-min-device-pixel-ratio:0){input{line-height:normal!important}}input::-moz-placeholder,textarea::-moz-placeholder{color:#a9a9a9;opacity:1}label{cursor:pointer}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}button:focus,input:focus,textarea:focus{outline:none;resize:none}label{cursor:default;display:inline-block;max-width:100%;font-weight:400}::-ms-clear{display:none}@font-face{font-family:rd-_;src:url("data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAcsAAsAAAAACqQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAARAAAAFZXOEjOY21hcAAAAYAAAACWAAACCs4hbhBnbHlmAAACGAAAAugAAAO0BG1azWhlYWQAAAUAAAAALwAAADYPpP4TaGhlYQAABTAAAAAcAAAAJAfeA4pobXR4AAAFTAAAABQAAAAkI+kAAGxvY2EAAAVgAAAAFAAAABQEcAVsbWF4cAAABXQAAAAfAAAAIAEYAF1uYW1lAAAFlAAAAUUAAAJtPlT+fXBvc3QAAAbcAAAATwAAAGizaRo4eJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2Bk/ss4gYGVgYOpk+kMAwNDP4RmfM1gxMjBwMDEwMrMgBUEpLmmMDgwVDy7z9zwv4EhhrmB4RRQmBEkBwA4Ig2aeJzFkbsNwzAMRE+RP0IQwEEG8AReyl1Kl+68g5Eqy7m7NZyj6EZI6viEJ4AnkRJIADWAKAZRAeGNANNLbsh+xDX7FZ6KH7jLuWBmYseeIxeu3PZdZ7+8UkH55TIvIql6raoNWhnNV97fFM57utQt79MRJTEf6ItMjk2OnWN32Ds2SY6OTZiLow6Dq6Neg5uD9gPbdC1VAAB4nH1SO2sUURi9370zd3Zmd+48dh77yr4mO7MmutlsxkkR3DQ2GgtBCAhaCBY2SrAwjUUw5CEo+A/EoAgR1LBpArEUQVBs3MrCYEAbY+xsMnpHV0ghDsM9936cj+9xDhIR+rlDtkkOZVETjaOT6CxCQEehzvAQ1IKwhUfBrom2azESeEFN8uotcgLcOrWcThT6LpWoBgzKMFHrREELB3A87OIp6DhDAPli4ZzZKJnkHii5oLwUn8ZrYFe8ktY9Fp86Om11qtnUfMY086Z5J0VFMYWxoDG46jqyKCs0fihqBXu7cgRXIJMPCmfOq9WieWk1vDbUcGWAhQXIFqvs8bRRMPh/s+Bkzbykq6lcQfWGLZjfTeeymSH/E+If5rNG5AfxURpNJVMiyUFuhCZ9RFzH0oDWx8CvDzCchigcYKcCTmeACc/CqB/vUgqlfh9KlMa7ZxYZa2gNbZH5bJFjg7FFVf1XkPic3j+UfrD3/4RDwT8z3CIH5AbKowZCYuAHXTjegoCBVAa3E006Sa9R2OCxLkzyGAPy9aMkj7bFvc3NPZGfM0uRIH00RqoHmys9Qnorv09vRxKipZneN0H41uPE9qgs7WjVkZecsNwThN7ySg8Br79AhskC9wuSsWPRegCuH062x/l6HIvY8Syss3JTizWPMXirNctkJJ6NZ/mFwXdPa+rwRis3uR6QiEIu4s9cDwQ1wzNqds2YMGrkQry/Gu+Dvgo69EEfvNDfHPwS9pL6v8UKfG7FSuK/KFEMvxBNae0+NTPicyKTtLghwhdRXFsTlaz0jAhAN4j5t/YsbCGCUJbXfYLXD/jz+sAn78lrMoJaaIxTJcpXym3uJbbg6rcwLzQGLegCv0xz6CRL5z1gKpGtR7oQYJpWtUz6nW2/UosOg7agP1Uk2WKfnPQV6pZcejntfGaWLCnw4K7h7Kp2SqZzijInYd1Wv7j6baVQNHBTsD5kNC3zwRKa2CgWFN7eL0lutBh4nGNgZGBgAGLnEJdv8fw2Xxm4WRhA4JrTXQME/d+MhYG5AcjlYGACiQIAFvYJkgB4nGNgZGBgbvjfwBDDwgACQJKRARVwAgBHDwJyeJxjYWBgYH7JwMDCgBsDAB8LAQ0AAAAAAHYA2AEYAT4BWAF8AYoB2nicY2BkYGDgZAhkYGUAASYg5gJCBob/YD4DABGZAXYAeJxlj01OwzAQhV/6B6QSqqhgh+QFYgEo/RGrblhUavdddN+mTpsqiSPHrdQDcB6OwAk4AtyAO/BIJ5s2lsffvHljTwDc4Acejt8t95E9XDI7cg0XuBeuU38QbpBfhJto41W4Rf1N2MczpsJtdGF5g9e4YvaEd2EPHXwI13CNT+E69S/hBvlbuIk7/Aq30PHqwj7mXle4jUcv9sdWL5xeqeVBxaHJIpM5v4KZXu+Sha3S6pxrW8QmU4OgX0lTnWlb3VPs10PnIhVZk6oJqzpJjMqt2erQBRvn8lGvF4kehCblWGP+tsYCjnEFhSUOjDFCGGSIyujoO1Vm9K+xQ8Jee1Y9zed0WxTU/3OFAQL0z1xTurLSeTpPgT1fG1J1dCtuy56UNJFezUkSskJe1rZUQuoBNmVXjhF6XNGJPyhnSP8ACVpuyAAAAHicbccxDoAgDAXQfkQEbsOR6gLVpAykCeH0xrj6tkeOPpn+JThs8NgRcCAiIRNmqMZ6ShjdhvU4hbUu6/4SLnE11pulvFM/RSvRA98yEWMA") format("woff")}.rd-_{font-family:rd-_;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.rd-a{margin-right:10px}.rd-b{height:100%}.rd-c{text-align:center}.rd-d{float:left}.rd-e{float:right}.rd-f{position:absolute}.rd-g{position:relative}html .rd-h{display:none}.rd-i:after,.rd-i:before{content:" ";display:table}.rd-i:after{clear:both}.rd-j{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rd-k::-webkit-scrollbar,.rd-k::-webkit-scrollbar-corner{height:6px;width:6px;background:#fafafa}.rd-k::-webkit-scrollbar-thumb{background:silver}.rd-k::-webkit-scrollbar-thumb:hover{background:#949494}.rd-l{word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.rd-l,.rd-m{white-space:nowrap}.rd-m{outline:none;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;background-color:#ccc;padding:4px 14px;font-size:14px;line-height:1;border:0;color:#333;border-radius:2px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rd-m:focus,.rd-m:hover{background-color:#a0a0a0;color:#333}.rd-n{background-color:#fa742b;color:#fff}.rd-n:focus,.rd-n:hover{background-color:#bd361b;color:#fff}.rd-m[disabled]{background-color:#fbfbfb;color:#333}.rd-m[disabled]:hover{border-color:#e6e6e6;color:#333}.rd-o{padding:8px 25px;border-bottom:1px solid #e6e6e6;color:#333;margin:0;line-height:1.42857143;background:#fff}.rd-p{padding:18px 25px}.rd-q{padding:8px 25px;text-align:left;border-top:1px solid #e6e6e6;background:#fff}.rd-r{padding:150px 0;margin:0 auto;width:150px;text-align:center;line-height:0}.rd-r:after,.rd-r:before{content:""}.rd-r:after,.rd-r:before,.rd-s{width:14px;height:14px;background-color:#ccc;border-radius:100%;display:inline-block;-webkit-animation:rd-_ 1s ease-in-out infinite both;animation:rd-_ 1s ease-in-out infinite both}.rd-r:before{-webkit-animation-delay:-.32s;animation-delay:-.32s}.rd-s{margin:0 10px;-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes rd-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes rd-_{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}::-moz-placeholder{color:#999}:-ms-input-placeholder{color:#999}::-ms-input-placeholder{color:#999}::placeholder{color:#999}::-moz-selection{background-color:rgba(243,123,99,.6)}::selection{background-color:rgba(243,123,99,.6)}.rd-t,.rd-u{caret-color:#fa742b;display:inline-block;height:22px;padding:3px 4px;border-radius:2px;box-sizing:border-box;box-shadow:none;border:1px solid #e6e6e6;background-color:#fff;color:#333;width:140px;vertical-align:middle;max-width:100%;outline:none;transition:border-color .25s}.rd-t:hover,.rd-u:hover{border-color:#ccc}.rd-t:focus,.rd-u:focus,.rd-v,.rd-v:hover{border-color:#fa742b!important}.rd-u{height:auto}.rd-t[disabled],.rd-u[disabled]{background-color:#fbfbfb}.rd-t[disabled]:hover,.rd-u[disabled]:hover{cursor:not-allowed;border-color:#e6e6e6}@font-face{font-family:rd-a;src:url(//at.alicdn.com/t/font_890516_wtzpwkax3xn.eot);src:url(//at.alicdn.com/t/font_890516_wtzpwkax3xn.eot#iefix) format("embedded-opentype"),url(//at.alicdn.com/t/font_890516_wtzpwkax3xn.woff2) format("woff2"),url(//at.alicdn.com/t/font_890516_wtzpwkax3xn.woff) format("woff"),url(//at.alicdn.com/t/font_890516_wtzpwkax3xn.ttf) format("truetype"),url(//at.alicdn.com/t/font_890516_wtzpwkax3xn.svg#iconfont) format("svg")}.rd-w{font-family:rd-a;line-height:1;font-size:16px;font-style:normal;font-weight:400;font-variant:normal;display:inline-block;speak:none;position:relative;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{min-width:1100px}.rd-x{font-size:12px}.rd-y{margin-right:2px}.rd-z{transform:rotate(180deg)}.rd-A{transform:rotate(90deg)}.rd-B{transform:scaleX(-1)}.rd-C{margin-left:100px}.rd-D{margin-right:50px}.rd-E{display:flex;align-items:center}.rd-F{position:-webkit-sticky;position:sticky;top:0}.rd-G{width:100%}.rd-H{border-collapse:collapse;border:1px solid #000;border-spacing:0;table-layout:fixed}.rd-I{border:1px solid #000;overflow:hidden}');let i=navigator.language.toLowerCase();try{let e=window.localStorage;e&&(i=e.getItem("l.lang")||i)}catch(e){}t.config(e),t.config({lang:i});let l=r.default;t.View.merge({ctor(){this.set({i18n:l})},throttle(e,t){t=t||150;let r,i=Date.now();return(...l)=>{let a=Date.now();clearTimeout(r),a-i>t?(i=a,e.apply(this,l)):r=setTimeout(()=>{e.apply(this,l)},t-(a-i))}}}),document.title=l("siteName"),t.boot({defaultPath:"/index",defaultView:"designer/index",rootId:"app",error(e){setTimeout(()=>{throw e},0)}})})}};define("gallery/mx-color/index",["magix","../mx-dragdrop/index","../mx-monitor/index"],(e,t,r)=>{let i,l,a={xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},o={offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"},s={class:"rd-aL"},d={value:"value"};Object.defineProperty(t,"__esModule",{value:!0});const n=e("magix"),p=e("../mx-dragdrop/index"),u=e("../mx-monitor/index");n.default.applyStyle("rd-h",'.rd-ax{position:relative;height:22px;border:1px solid #e6e6e6;border-radius:2px;display:flex;align-items:center;cursor:pointer;padding:1px;transition:border-color .25s}.rd-ax:hover{border-color:#ccc}.rd-ay,.rd-az{background:#fff;background-image:linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0),linear-gradient(45deg,#eee 25%,transparent 0,transparent 75%,#eee 0);background-position:0 0,6px 6px;background-size:12px 12px}.rd-az{min-width:18px;height:18px;text-indent:-100000em;border:1px solid #ccc;position:relative}.rd-aA{padding:3px 4px}.rd-az:after{content:" ";display:block;right:0;bottom:0;position:absolute;border-color:transparent #ccc;border-style:solid;border-width:6px 6px 0 0}.rd-aB{position:absolute;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:2px}.rd-aC-bottom{top:100%;margin-top:4px}.rd-aC-top{bottom:100%;margin-bottom:4px}.rd-aD{width:176px}.rd-aE{border:1px solid #000;float:left;width:12px;height:12px;margin:-1px 0 0 -1px;position:relative}.rd-aF:before{content:" ";position:absolute;left:2px;top:2px;border:1px inset #e8e8e8;width:6px;height:6px}.rd-aG{margin:5px 0;height:150px}.rd-aH{position:relative;float:left;width:148px;height:148px}.rd-aI{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%;left:-4px;top:-4px}.rd-aJ{width:18px;height:148px;position:relative;float:left;margin-left:10px}.rd-aK{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.rd-aL{height:25px}.rd-aM{width:80px}.rd-aN,.rd-aM{margin-right:5px;vertical-align:middle}.rd-aN{width:30px;border-radius:2px;height:22px;display:inline-block;border:1px solid #ddd}.rd-aO{position:absolute;right:5px;top:4px;font-size:12px;opacity:.2}.rd-aO:hover{opacity:.5}.rd-ay{width:174px;height:12px;margin-bottom:5px}.rd-aP{height:100%}.rd-aQ{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}.rd-aR{cursor:not-allowed;background-color:#fbfbfb}.rd-aR:hover{border-color:#e6e6e6}.rd-aR:hover .rd-aO{opacity:.1}.rd-aR .rd-az{opacity:.4}.rd-aR .rd-aO{opacity:.1}');let h=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],c=(e,t,r)=>{let i,l,a,o,s;e=e%360/60,i=l=a=r-(s=r*t);let d=255*(i+=[s,o=s*(1-Math.abs(e%2-1)),0,0,o,s][e=~~e]),n=255*(l+=[o,s,s,o,0,0][e]),p=255*(a+=[0,0,o,s,s,o][e]);return{r:d,g:n,b:p,hex:"#"+(16777216|p|n<<8|d<<16).toString(16).slice(1)}};t.default=n.default.View.extend({tmpl:(e,t,r,n,p,u,h,c)=>{let f,g,m,x,y,b,w,v,k,S,A,_=[],{disabled:E,text:M,textWidth:C,color:V,clear:P,i18n:T,placement:R,align:z,renderUI:I,shortcuts:L,alpha:j,current:Y}=e;if(g=[],M&&(y=[t(0,0,n(M))],x="",C&&(x+="width:"+n(C)+"px"),m=[t("div",{class:"rd-aA rd-j","mx5-click":r+"\x1etoggle()",style:x},y)],g.push(...m)),m=[t(0,0,"picker")],x="",V&&(x+="background:"+n(V)+";"),M||(x+="width:100%"),g.push(t("div",{class:"rd-az rd-j","mx5-click":r+"\x1etoggle()",style:x},m)),P&&V&&(y=[t(0,0,"\ue67f")],m=[t("i",{class:"rd-_ rd-aO","mx5-click":r+"\x1eclearColor()",title:n(T("removeColor"))},y)],g.push(...m)),m=[],I){y=[],b=[];for(let e=L.length,i=0;i<e;i+=1){let e=L[i];w=[t("li",{class:"rd-aE",id:"sc_"+n(e)+"_"+r,style:"background:#"+n(e),"mx5-click":r+"\x1eshortcutsPicked({color:'#"+c(e)+"'})"})],b.push(...w)}y.push(t("ul",{class:"rd-aD rd-i",id:"scs_"+r},b)),i?y.push(i):(S=[t("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"})],A?S.push(A):S.push(A=t("stop",o)),k=[t("lineargradient",{id:"gb_"+r,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},S)],S=[t("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"})],A?S.push(A):S.push(A=t("stop",o)),k.push(t("lineargradient",{id:"gw_"+r,x1:"0%",y1:"100%",x2:"100%",y2:"100%"},S)),v=[t("defs",0,k),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gw_"+r+")"}),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gb_"+r+")"})],w=[t("svg",a,v),t("div",{class:"rd-aI",id:"ci_"+r})],b=[t("div",{class:"rd-aH",id:"cz_"+r,"mx5-mousedown":r+"\x1ecolorZoneDrag()"},w)],S=[t("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),t("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),t("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),t("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),t("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),t("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),t("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),t("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),t("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})],k=[t("lineargradient",{id:"ghsv_"+r,x1:"0%",y1:"100%",x2:"0%",y2:"0%"},S)],v=[t("defs",0,k),t("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#ghsv_"+r+")"})],w=[t("svg",a,v),t("div",{class:"rd-aK",id:"si_"+r})],b.push(t("div",{class:"rd-aJ","mx5-mousedown":r+"\x1eslideDrag()"},w)),y.push(i=t("div",{_:"_",class:"rd-aG"},b))),j&&(l?b=[l]:(v=[t("div",{class:"rd-aQ",id:"ai_"+r})],w=[t("div",{class:"rd-aP rd-g",id:"at_"+r,"mx5-mousedown":r+"\x1ealphaDrag()"},v)],b=[l=t("div",{_:"a",class:"rd-ay rd-g"},w)]),y.push(...b)),b=[t("span",{_:"b",class:"rd-aN",id:"bc_"+r}),t("input",{class:"rd-aM rd-t",readonly:!0,id:"v_"+r,value:n(Y)},0,d,1)],w=[t(0,0,"\u786e\u5b9a")],b.push(t("button",{_:"c",class:"rd-m rd-n",type:"button","mx5-click":r+"\x1eenter();"},w)),y.push(t("div",s,b)),m.push(...y)}return g.push(t("div",{id:"bd_"+r,class:"rd-aB rd-aC-"+n(R),style:n(z)+":-1px"},m)),f="rd-ax",E&&(f+=" rd-aR"),_.push(t("div",{"mx5-contextmenu":r+"\x1eprevent()",id:"root_"+r,class:f},g)),t(r,0,_)},mixins:[p.default],init(e){this.set({shortcuts:h}),u.default.setup(),this.on("destroy",()=>{u.default.remove(this),u.default.teardown()})},assign(e){return this.color=e.color,this.showAlpha=e.alpha+""=="true",this.hsvInfo={h:0,s:1,v:1},this.set({clear:e.clear+""=="true",text:e.text||"",disabled:e.disabled+""=="true",align:e.align||"left",textWidth:e.textWidth||0,placement:e.placement||"bottom"}),!0},render(){this.digest({alpha:this.showAlpha,color:this.color,current:this.color})},setHsv(e,t){let r=this,i=r.hsvInfo;i.h=e.h,i.s=e.s,i.v=e.v;let l=c(e.h,e.s,e.v).hex,a=n.default.node("cz_"+r.id),o=a.clientWidth,s=c(e.h,1,1);if(a.style.background=s.hex,r.hexColor=l,r.syncColor(),!t){let e=n.node("scs_"+r.id).querySelector('li[class$="@index.less:selected"]');e&&e.classList.remove("rd-aF");let t=n.node("si_"+r.id),l=t.clientHeight/2,a=Math.round(i.h*o/360-l),s=n.node("ci_"+r.id),d=s.clientWidth/2;t.style.top=a+"px",a=Math.round((1-i.v)*o-d);let p=Math.round(i.s*o-d);s.style.left=p+"px",s.style.top=a+"px"}let d=n.node("sc_"+l.substr(1,6)+"_"+r.id);d&&d.classList.add("rd-aF")},setColor(e){let t=this,r=parseInt(e.substr(1,2),16);isNaN(r)&&(r=255);let i=parseInt(e.substr(3,2),16);isNaN(i)&&(i=255);let l=parseInt(e.substr(5,2),16);isNaN(l)&&(l=255);let a=((e,t,r)=>{let i,l,a,o;return e/=255,t/=255,r/=255,{h:i=(i=0==(o=(a=Math.max(e,t,r))-Math.min(e,t,r))?null:a==e?(t-r)/o+(t<r?6:0):a==t?(r-e)/o+2:(e-t)/o+4)%6*60,s:l=0===o?0:o/a,v:a}})(r,i,l),o=parseInt(e.substr(7,2),16);isNaN(o)&&(o=255),t.hexAlpha=("0"+o.toString(16)).slice(-2),t.setHsv(a),t.showAlpha&&t.setAlpha(o)},setAlpha(e){let t=n.node("ai_"+this.id);e/=255,e*=n.node("at_"+this.id).clientWidth,e-=t.clientWidth/2,t.style.left=e+"px"},syncColor(){let e=this,t=n.node("bc_"+e.id),r=e.hexColor;e.showAlpha&&(n.node("at_"+e.id).style.background="linear-gradient(to right, "+r+"00 0%,"+r+" 100%)",r+=e.hexAlpha),t.style.background=r,n.node("v_"+e.id).value=r},"prevent<contextmenu>"(e){e.preventDefault()},"colorZoneDrag<mousedown>"(e){let t=this,r=n.node("cz_"+t.id).clientWidth,i=n.node("ci_"+t.id).clientWidth/2,l=e.eventTarget.getBoundingClientRect(),a=e.pageX-l.left-window.pageXOffset,o=e.pageY-l.top-window.pageYOffset,s=a/r,d=(r-o)/r;t.setHsv({h:t.hsvInfo.h,s:s,v:d});let p=n.node("ci_"+t.id),u=getComputedStyle(p),h=u.left,c=u.top,f=parseInt(h,10),g=parseInt(c,10),m=e;t.dragDrop(e,e=>{let l=e.pageY-m.pageY,a=e.pageX-m.pageX;(l+=g)<=-i?l=-i:l>=r-i&&(l=r-i),(a+=f)<=-i?a=-i:a>=r-i&&(a=r-i),p.style.left=a+"px",p.style.top=l+"px";let o=(a+i)/r,s=(r-(l+i))/r;t.setHsv({h:t.hsvInfo.h,s:o,v:s})})},"slideDrag<mousedown>"(e){let t=this,r=e.eventTarget,i=n.node("si_"+t.id),l=n.node("cz_"+t.id).clientWidth,a=i.clientHeight/2,o=r.getBoundingClientRect(),s=(e.pageY-o.top-window.scrollY)/l*360;t.setHsv({h:s,s:t.hsvInfo.s,v:t.hsvInfo.v});let d=parseInt(getComputedStyle(i).top,10);t.dragDrop(e,r=>{let o=r.pageY-e.pageY;(o+=d)<=-a?o=-a:o>=l-a&&(o=l-a),i.style.top=o+"px";let s=(o+a)/l*360;t.setHsv({h:s,s:t.hsvInfo.s,v:t.hsvInfo.v},!0)})},"alphaDrag<mousedown>"(e){let t=e.eventTarget,r=this,i=n.node("ai_"+r.id),l=n.node("at_"+r.id).clientWidth,a=i.clientWidth/2,o=t.getBoundingClientRect(),s=(e.pageX-o.left)/l*255|0;r.hexAlpha=("0"+s.toString(16)).slice(-2),r.setAlpha(s),r.syncColor();let d=getComputedStyle(i),p=parseInt(d.left,10);r.dragDrop(e,t=>{let o=t.pageX-e.pageX;(o+=p)<=-a?o=-a:o>=l-a&&(o=l-a),i.style.left=o+"px";let s=Math.round((o+a)/l*255);r.hexAlpha=("0"+s.toString(16)).slice(-2),r.syncColor()})},"enter<click>"(){let e=this;e.hide();let t=n.node("v_"+e.id).value;t!=e.color&&(e.digest({color:t,current:t}),n.default.dispatch(e.root,"input",{color:e.color=t}))},"shortcutsPicked<click>"(e){this.setColor(e.params.color),e.eventTarget.classList.add("rd-aF")},inside(e){return n.default.inside(e,this.root)},async show(){let e=n.node("bd_"+this.id);"none"==getComputedStyle(e).display&&(e.style.display="block",u.default.add(this),n.node("root_"+this.id).classList.add("rd-v"),this.initSyncColor||(await this.digest({renderUI:!0}),this.setColor(this.color),this.initSyncColor=1))},hide(){let e=n.node("bd_"+this.id);"none"!=getComputedStyle(e).display&&(n.node("root_"+this.id).classList.remove("rd-v"),e.style.display="none",u.default.remove(this))},"toggle<click>"(){if(this.get("disabled"))return;let e=n.node("bd_"+this.id);"none"==getComputedStyle(e).display?this.show():this.hide()},"clearColor<click>"(){if(this.get("disabled"))return;let e=this;if(e.initSyncColor){let t=n.node("v_"+e.id).value;e.hide(),e.digest({color:"",current:t})}else e.digest({color:""});n.default.dispatch(e.root,"input",{color:e.color=""})}})}),define("gallery/mx-dialog/alert",["magix","../../i18n/index"],(e,t,r)=>{let i={class:"rd-o"},l={class:"rd-p",style:"word-break:break-all"},a={class:"rd-i rd-q"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),s=e("../../i18n/index");t.default=o.default.View.extend({tmpl:(e,t,r,o)=>{let s,d,n=[],{title:p,body:u,i18n:h}=e;return d=[t(0,0,o(p))],s=[t("h5",0,d)],n.push(t("div",i,s)),s=[t(0,0,o(u))],n.push(t("div",l,s)),d=[t(0,0,o(h("btnEnter")))],s=[t("button",{"mx5-click":r+"\x1eenter();",class:"rd-e rd-m rd-n",type:"button"},d)],n.push(t("div",a,s)),t(r,0,n)},init(e){this.dialog=e.dialog,this.stringBody=e.body,this.stringTitle=e.title||s.default("dialogTip"),this.fnEnterCallback=e.enterCallback},render(){this.digest({body:this.stringBody,title:this.stringTitle})},"enter<click>"(){let e=this;e.dialog.close(),e.fnEnterCallback&&o.default.toTry(e.fnEnterCallback)}})}),define("gallery/mx-dialog/confirm",["magix","../../i18n/index"],(e,t,r)=>{let i={class:"rd-o"},l={class:"rd-p",style:"word-break:break-all"},a={class:"rd-i rd-q"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),s=e("../../i18n/index");t.default=o.default.View.extend({tmpl:(e,t,r,o)=>{let s,d,n=[],{title:p,body:u,i18n:h}=e;return d=[t(0,0,o(p))],s=[t("h5",0,d)],n.push(t("div",i,s)),s=[t(0,0,o(u))],n.push(t("div",l,s)),d=[t(0,0,o(h("btnCancel")))],s=[t("button",{type:"button","mx5-click":r+"\x1ecancel()",class:"rd-e rd-m"},d)],d=[t(0,0,o(h("btnEnter")))],s.push(t("button",{type:"button","mx5-click":r+"\x1eenter()",class:"rd-a rd-e rd-m rd-n"},d)),n.push(t("div",a,s)),t(r,0,n)},init(e){let t=this;t.dialog=e.dialog,t.stringBody=e.body,t.stringTitle=e.title||s.default("dialogTip"),t.fnEnterCallback=e.enterCallback,t.fnCalcelCallback=e.cancelCallback},render(){this.digest({body:this.stringBody,title:this.stringTitle})},"enter<click>"(){let e=this;e.dialog.close(),e.fnEnterCallback&&o.default.toTry(e.fnEnterCallback)},"cancel<click>"(){let e=this;e.dialog.close(),e.fnCalcelCallback&&o.default.toTry(e.fnCalcelCallback)}})}),define("gallery/mx-dialog/index",["magix","./alert","./confirm"],(e,t,r)=>{let i={class:"rd-aZ rd-r"},l={class:"rd-s"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix");e("./alert"),e("./confirm"),a.default.applyStyle("rd-i",".rd-aS{position:absolute}.rd-aT{position:relative;background-color:#fff;border-radius:2px;border:1px solid #e6e6e6}.rd-aU{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:7px;right:10px}.rd-aU:focus,.rd-aU:hover{opacity:.5}.rd-aV{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.2}.rd-aW{-webkit-filter:blur(3px);filter:blur(3px)}.rd-aX{-webkit-animation:rd-a .3s;animation:rd-a .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.rd-aY{position:absolute;right:10px;top:0;width:1px;height:0}.rd-aZ{padding:80px 0}@-webkit-keyframes rd-a{0%{opacity:0}to{opacity:.2}}@keyframes rd-a{0%{opacity:0}to{opacity:.2}}.rd-a0{-webkit-animation:rd-b .2s;animation:rd-b .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes rd-b{0%{opacity:.2}to{opacity:0}}@keyframes rd-b{0%{opacity:.2}to{opacity:0}}.rd-a1{margin-bottom:50px;min-height:60px}.rd-a2{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}.rd-a3{-webkit-animation:rd-c .3s;animation:rd-c .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes rd-c{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes rd-c{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.rd-a4{-webkit-animation:rd-d .2s;animation:rd-d .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes rd-d{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes rd-d{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");let o=500,s=[];t.default=a.default.View.extend({tmpl:(e,t,r,a)=>{let o,s,d,n,p,u=[],{removeClass:h,zIndex:c,left:f,top:g,width:m,closable:x}=e;return o="rd-aV",h||(o+=" rd-aX"),u.push(t("div",{style:"z-index:"+a(c-1),id:"mask_"+r,class:o})),d=[t("input",{_:"_",id:"focus_"+r,class:"rd-aY"},0,0,1)],n=[t(0,0,"\ue67f")],d.push(t("span",{class:"rd-_ rd-aU "+a(x?"":"rd-h"),"mx5-click":r+"\x1eclose()"},n)),p=[t("span",l)],n=[t("div",i,p)],d.push(t("div",{_:"a",class:"rd-a1 rd-aT",id:"cnt_"+r},n)),o="rd-aS",h||(o+=" rd-a3"),s=[t("div",{id:"body_"+r,style:"left:"+a(f)+"px;top:"+a(g)+"px;width:"+a(m)+"px",class:o},d)],u.push(t("div",{class:"rd-a2",style:"z-index:"+a(c)},s)),t(r,0,u)},init(e){let t=this,r=a.default.node("app"),i=t.root;t.on("destroy",()=>{(e=>{for(let t,r=s.length-1;r>=0;r--)if((t=s[r]).id==e.id){s.splice(r,1);break}})(t),500==(o-=2)&&r.classList.remove("rd-aW"),a.default.dispatch(i,"close"),i.parentNode.removeChild(i)}),a.default.has(e,"closable")||(e.closable=!0),t.set(e),500==o&&r.classList.add("rd-aW"),o+=2,s.push(t)},async render(){let e=this;await e.digest({zIndex:o});let t=e.get(),r=a.default.mark(e,"render");setTimeout(()=>{r()&&(e.root.style.display="block",a.default.node("focus_"+e.id).focus())},30),e.owner.mountVframe(a.default.node("cnt_"+e.id),t.view,t),setTimeout(()=>{r()&&e.digest({removeClass:!0})},300)},notifyMainViewUnload(e){let t=a.default.node("cnt_"+this.id);a.default.Vframe.byNode(t).invoke("fire",["unload",e])},closeAnim(){let e,t=this.id;(e=a.default.node("body_"+t)).classList.add("rd-a4"),(e=a.default.node("mask_"+t)).classList.add("rd-a0")},"close<click>"(){a.default.dispatch(this.root,"dlg_close")},"$doc<keyup>"(e){if(27==e.keyCode){let e=s[s.length-1];e==this&&e.get("closable")&&a.default.dispatch(this.root,"dlg_close")}}},{dialogShow(e,t){let r=a.default.guid("dlg_");document.body.insertAdjacentHTML("beforeend",'<div id="'+r+'" style="display:none" />');let i,l=a.default.node(r),o=e.owner.mountVframe(l,"gallery/mx-dialog/index",t);return l.addEventListener("dlg_close",()=>{if(!l.isClosing&&!i){let e=()=>{l.isClosing=1,o.invoke("closeAnim"),setTimeout(()=>{o.unmountVframe()},200)},t={p:0,prevent(){i=1},resolve(){t.p=1,i=0,e()},reject(){t.p=1,i=0}};o.invoke("notifyMainViewUnload",[t]),i||t.p||e()}}),l},alert(e,t,r){this.confirm(e,t,null,r,"alert")},confirm(e,t,r,i,l){this.mxDialog("gallery/mx-dialog/"+(l||"confirm"),{body:e,cancelCallback:r,enterCallback:t,title:i,modal:!0,width:300,closable:!1,left:(window.innerWidth-300)/2,top:Math.max((window.innerHeight-220)/2,0)})},mxDialog(e,t){let r,i,l=this,o={view:e},s=a.default.mark(this,"dialog");return a.default.use(e,d=>{let n="$dlg_"+e;!l[n]&&s()&&(l[n]=1,Object.assign(o,d.dialogOptions),Object.assign(o,t),o.width||(o.width=500),o.left||(o.left=(window.innerWidth-o.width)/2),o.top||(o.top=100),o.dialog={close(){r&&a.default.dispatch(r,"dlg_close")}},(r=l.dialogShow(l,o)).addEventListener("close",()=>{delete l[n],i&&i()}))}),{close(){r&&a.default.dispatch(r,"dlg_close")},whenClose(e){i=e}}}})}),define("gallery/mx-dragdrop/index",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=window.getComputedStyle,l=e=>{(e=window.getSelection)&&e().removeAllRanges()},a=e=>{e.preventDefault()},o=["mousemove"],s=["mouseup"],d=["keydown","mousewheel","DOMMouseScroll","fullscreenchange"];t.default={ctor(){let e=this;e.on("destroy",()=>{e["dd&dragEnd"]()})},"dd&dragEnd"(e){let t=this;if(t["dd&moveProxy"]){let r;for(r of o)document.removeEventListener(r,t["dd&moveProxy"]);for(r of s)document.removeEventListener(r,t["dd&stopProxy"]);for(r of d)document.removeEventListener(r,a);window.removeEventListener("blur",t["dd&stopProxy"]),delete t["dd&moveProxy"];let i=t["dd&stopCallback"];i&&i(e)}},dragDrop(e,t,r){let i=this;if(i["dd&dragEnd"](),e){let e;for(e of(l(),i["dd&stopCallback"]=r,i["dd&stopProxy"]=i["dd&dragEnd"].bind(i),i["dd&moveProxy"]=(e=>{t&&t(e)}),o))document.addEventListener(e,i["dd&moveProxy"]);for(e of s)document.addEventListener(e,i["dd&stopProxy"]);for(e of d)document.addEventListener(e,a,{passive:!1});window.addEventListener("blur",i["dd&stopProxy"])}},fromPoint(e,t){let r=null;if(document.elementFromPoint)for(!a["dd&fixed"]&&i&&(a["dd&fixed"]=!0,a["dd&addScroll"]=null!==document.elementFromPoint(-1,-1)),a["dd&addScroll"]&&(e+=window.pageXOffset,t+=window.pageYOffset),r=document.elementFromPoint(e,t);r&&3==r.nodeType;)r=r.parentNode;return r},clearSelection:l}}),define("gallery/mx-font/align",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("rd-k",".rd-bg{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.rd-bh{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.rd-bh:hover{background:#ccc}.rd-bi,.rd-bi:hover{background:#fa742b;color:#fff}.rd-bj,.rd-bj .rd-bh{cursor:not-allowed;opacity:.7}.rd-bj .rd-bh,.rd-bj .rd-bh:hover{background:#e9e9e9}.rd-bj .rd-bi,.rd-bj .rd-bi:hover{background:#fb955d}"),t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a,o,s=[],{disabled:d,i18n:n,value:p}=e;return o=[t(0,0,"\ue687")],l="rd-d rd-bh rd-w","flex-start"==p.h&&(l+=" rd-bi"),a=[t("li",{title:i(n("mxGalleryFontAlignLeft")),"mx5-click":r+"\x1eset({type:'h',v:'flex-start'})",class:l},o)],o=[t(0,0,"\ue68a")],l="rd-d rd-bh rd-w","center"==p.h&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontAlignCenter")),"mx5-click":r+"\x1eset({type:'h',v:'center'})",class:l},o)),o=[t(0,0,"\ue686")],l="rd-d rd-bh rd-w","flex-end"==p.h&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontAlignRight")),"mx5-click":r+"\x1eset({type:'h',v:'flex-end'})",class:l},o)),o=[t(0,0,"\ue614")],l="rd-d rd-bh rd-w","flex-start"==p.v&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontAlignTop")),"mx5-click":r+"\x1eset({type:'v',v:'flex-start'})",class:l},o)),o=[t(0,0,"\ue613")],l="rd-d rd-bh rd-w","center"==p.v&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontAlignMiddle")),"mx5-click":r+"\x1eset({type:'v',v:'center'})",class:l},o)),o=[t(0,0,"\ue612")],l="rd-d rd-bh rd-w","flex-end"==p.v&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontAlignBottom")),"mx5-click":r+"\x1eset({type:'v',v:'flex-end'})",class:l},o)),l="rd-j rd-bg",d&&(l+=" rd-bj"),s.push(t("ul",{class:l},a)),t(r,0,s)},assign(e){return this.currentValue=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"set<click>"(e){let t=this;if(t.get("disabled"))return;let r=t.currentValue,{type:l,v:a}=e.params;r[l]=a,t.currentValue=r,t.digest({value:r}),i.default.dispatch(t.root,"input",{value:r})}})}),define("gallery/mx-font/style",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("rd-k",".rd-bg{display:inline-block;height:25px;line-height:25px;vertical-align:bottom}.rd-bh{width:20px;margin:0 1px;text-align:center;height:20px;line-height:20px;cursor:pointer;background:#e0e0e0;border-radius:2px}.rd-bh:hover{background:#ccc}.rd-bi,.rd-bi:hover{background:#fa742b;color:#fff}.rd-bj,.rd-bj .rd-bh{cursor:not-allowed;opacity:.7}.rd-bj .rd-bh,.rd-bj .rd-bh:hover{background:#e9e9e9}.rd-bj .rd-bi,.rd-bj .rd-bi:hover{background:#fb955d}"),t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a,o,s=[],{disabled:d,i18n:n,value:p}=e;return o=[t(0,0,"\ue749")],l="rd-d rd-bh rd-w",p.bold&&(l+=" rd-bi"),a=[t("li",{title:i(n("mxGalleryFontStyleBold")),"mx5-click":r+"\x1eset({key:'bold'})",class:l},o)],o=[t(0,0,"\ue65f")],l="rd-d rd-bh rd-w",p.italic&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontStyleItalic")),"mx5-click":r+"\x1eset({key:'italic'})",class:l},o)),o=[t(0,0,"\ue62e")],l="rd-d rd-bh rd-w",p.underline&&(l+=" rd-bi"),a.push(t("li",{title:i(n("mxGalleryFontStyleUnderline")),"mx5-click":r+"\x1eset({key:'underline'})",class:l},o)),l="rd-j rd-bg",d&&(l+=" rd-bj"),s.push(t("ul",{class:l},a)),t(r,0,s)},assign(e){return this.currentValue=e.value,this.set({value:e.value,disabled:e.disabled}),!0},render(){this.digest()},"set<click>"(e){let t=this;if(t.get("disabled"))return;let r=t.currentValue,{key:l}=e.params;r[l]=!r[l],t.currentValue=r,t.digest({value:r}),i.default.dispatch(t.root,"input",{value:r})}})}),define("gallery/mx-dropdown/index",["magix","../mx-monitor/index"],(e,t,r)=>{let i,l={class:"rd-bb"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),o=e("../mx-monitor/index");a.default.applyStyle("rd-j",".rd-a5{outline:0;position:relative;min-width:50px;width:100%;background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;display:inline-block;vertical-align:middle;height:22px;transition:all .25s}.rd-a5:hover{border-color:#ccc}.rd-a6{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 20px 0 3px}.rd-a7{cursor:not-allowed;background-color:#fbfbfb}.rd-a7:hover{border-color:#e6e6e6}.rd-a7 .rd-a6{cursor:not-allowed}.rd-a8{position:absolute;right:0;top:0;font-size:20px;color:#ccc;transition:all .25s}.rd-a9 .rd-a8{transform:rotate(180deg);top:0}.rd-a9,.rd-a9:hover{border-color:#fa742b}.rd-b_{height:20px;line-height:21px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}.rd-ba{color:#999}.rd-bb{position:absolute;top:100%;left:-1px;right:-1px;margin-top:4px;border-radius:2px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rd-a9 .rd-bb{display:block}.rd-bc{overflow:auto;max-height:196px;padding:2px 0}.rd-bd{padding:0 2px;margin:2px 0}.rd-be{cursor:pointer;color:#666;display:block;width:100%;padding:0 5px;height:20px;line-height:20px;border-radius:2px}.rd-be:hover{color:#333;background-color:#f0f0f0}.rd-bf,.rd-bf:active,.rd-bf:focus,.rd-bf:hover{color:#fff;background-color:#fa742b}"),t.default=a.default.View.extend({tmpl:(e,t,r,a,o,s,d)=>{let n,p,u,h,c,f,g,m,x,y=[],{disabled:b,selectedText:w,selected:v,emptyText:k,rList:S,list:A,textKey:_,valueKey:E}=e;if(p=[],h=[t(0,0,a(w))],n="rd-b_",""!==v&&v!=k||(n+=" rd-ba"),u=[t("span",{class:n},h)],i?u.push(i):(h=[t(0,0,"\ue692")],u.push(i=t("span",{_:"_",class:"rd-_ rd-a8"},h))),p.push(t("div",{class:"rd-a6","mx5-click":r+"\x1etoggle()",title:a(w)},u)),S){f=[];for(let e=A.length,i=0;i<e;i+=1){let e=A[i];g=[];let l=e,o=e;_&&E&&(c="",l=e[_],c+=" ",o=e[E]);let p=o+""==v+"";x=[t(0,0,a(l))],n="rd-be rd-l",p&&(n+=" rd-bf"),m=[t("span",{"mx5-click":r+"\x1eselect({item:'"+d(s,e,"\x1ef."+i)+"'})",class:n},x)],g.push(t("li",{title:a(l),active:p,class:"rd-bd"},m)),f.push(...g)}h=[t("ul",{class:"rd-bc",id:"list_"+r},f)],u=[t("div",l,h)],p.push(...u)}return n="rd-a5",b&&(n+=" rd-a7"),y.push(t("div",{id:"dd_"+r,class:n},p)),t(r,0,y)},init(e){o.default.setup(),this.on("destroy",()=>{o.default.remove(this),o.default.teardown()})},assign(e){let t=e.selected,r=e.textKey||"",i=e.valueKey||"",l=e.emptyText||"",o=e.disabled+""=="true",s=e.list||[];s=s.slice();let d=a.default.toMap(s,i);if(l)if(r&&i){if(!d[""]){let e={};e[r]=l,e[i]="",s.unshift(e),d[""]=e}}else d[l]||(s.unshift(l),d[l]=l);t||!l||r||i||(t=l),t&&d[t]||(t=d[t]||s[0],r&&i&&(t=t[i]));let n=r&&i?d[t][r]:t;return this.set({selected:t,selectedText:n,list:s,textKey:r,valueKey:i,emptyText:l,disabled:o}),!0},render(){this.digest()},inside(e){return a.default.inside(e,this.root)},async show(){let e=this,t=a.default.node("dd_"+e.id);if(!t.classList.contains("rd-a9")){t.classList.add("rd-a9"),e.get("rList")||await e.digest({rList:!0});let r=(t=a.default.node("list_"+e.id)).querySelector("li[active]");r&&r.scrollIntoViewIfNeeded&&r.scrollIntoViewIfNeeded(),o.default.add(e)}},hide(){let e=this,t=a.default.node("dd_"+e.id);t.classList.contains("rd-a9")&&(t.classList.remove("rd-a9"),o.default.remove(e))},"toggle<click>"(){let e=this,t=a.default.node("dd_"+e.id);t.classList.contains("rd-a9")?e.hide():t.classList.contains("rd-a7")||e.show()},"select<click>"(e){let t=this;t.hide();let r=t.get("valueKey"),i=t.get("textKey"),l=t.get("selected"),o=e.params.item,s=o,d=o;i&&r&&(d=o[i],s=o[r]),l!==s&&(t.digest({selected:s,selectedText:d}),a.default.dispatch(t.root,"change",{item:o,value:r?o[r]:o,text:i?o[i]:o}))}})}),define("gallery/mx-menu/index",["magix","../mx-monitor/index"],(e,t,r)=>{let i,l={class:"rd-bl rd-j"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),o=e("../mx-monitor/index");a.default.applyStyle("rd-l",".rd-bk{z-index:400}.rd-bl{background-color:#fff;border:1px solid #e6e6e6;border-radius:2px;cursor:default;padding:2px 0;box-shadow:0 1px 3px 1px rgba(0,0,0,.06)}.rd-bm{height:22px;line-height:22px;cursor:default;border-radius:2px;padding:0 8px;margin:2px}.rd-bn{color:#fff;background-color:#fa742b}.rd-bo{height:1px;background:#eee;margin:4px 0}.rd-bp{color:#ccc;cursor:not-allowed}"),t.default=a.default.View.extend({tmpl:(e,t,r,a,o,s,d)=>{let n,p,u,h,c,f,g=[],{width:m,list:x,disabled:y,textKey:b}=e;p=[];for(let e=x.length,l=0;l<e;l+=1){let e=x[l];u=[],e.spliter?(h=i?[i]:[i=t("li",{_:"_",class:"rd-bo"})],u.push(...h)):(f=[t(0,0,a(e[b]))],c="rd-l rd-bm ",y[e.id]&&(c+=" rd-bp"),h=[t("li",{"mx5-mouseover":r+"\x1ehover({d:"+a(y[e.id]||0)+"})","mx5-mouseout":r+"\x1ehover({d:"+a(y[e.id]||0)+"});","mx5-click":r+"\x1eselect({item:'"+d(s,e,"\x1ef."+l)+"',d:"+a(y[e.id]||0)+"})",title:a(e[b]),class:c},f)],u.push(...h)),p.push(...u)}return n=[t("ul",l,p)],g.push(t("div",{style:"width:"+a(m)+"px;position:absolute;left:-10000px;top:-10000px",class:"rd-bk",id:"cnt_"+r,"mx5-contextmenu":r+"\x1eprevent()"},n)),t(r,0,g)},init(e){let t=this;o.default.setup(),t.on("destroy",()=>{o.default.remove(t),o.default.teardown()})},assign(e){let t=this,r=e.width||140,i=e.valueKey||"id",l=e.textKey||"text";t.list=e.list,t.width=r,t.valueKey=i,t.textKey=l,t.menuDisabled=e.disabled||{},t.fnPicked=e.picked},async render(e){let t=this;await t.digest({disabled:t.menuDisabled,list:t.list,width:t.width,valueKey:t.valueKey,textKey:t.textKey}),e&&this.show(e)},inside(e){return a.default.inside(e,this.root)},show(e){let t=this;if(!t.uiShow){t.uiShow=1;let r=a.node("cnt_"+t.id),i=r.clientWidth,l=r.clientHeight,s=e.pageX,d=e.pageY;s+i>window.innerWidth&&(s-=i)<0&&(s=0),d+l>window.innerHeight&&(d-=l)<0&&(d=0),r.style.left=s+"px",r.style.top=d+"px",o.default.add(t)}},hide(){let e=this;if(e.uiShow){e.uiShow=!1,a.node("cnt_"+e.id).style.left="-10000px",o.default.remove(e)}},"hover<mouseover,mouseout>"(e){if(e.params.d)return;let t=e.eventTarget;!a.default.inside(e.relatedTarget,t)&&t.classList["mouseout"==e.type?"remove":"add"]("rd-bn")},"select<click>"(e){if(e.params.d)return;this.hide();let t=this.fnPicked;t&&t(e.params.item)},"prevent<contextmenu>"(e){e.preventDefault()}},{show(e,t,r){let i="ctx_"+e.id,l=a.node(i),o=l&&a.default.Vframe.byNode(l);o?(o.invoke("assign",[r]),o.invoke("render",[t])):(document.body.insertAdjacentHTML("beforeend",`<div id="${i}"></div>`),(o=e.owner.mountVframe(a.node(i),"gallery/mx-menu/index",r)).invoke("show",[t]))}})}),define("gallery/mx-monitor/index",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=0,l=[],a=["mousedown","keyup","touchstart","pointerstart"],o=e=>{for(let t=l.length;t--;){let r=l[t];if(r.destroyed)l.splice(t,1);else{let t=r.view;"resize"!=e.type&&t.inside(e.target)||t.hide()}}},s=e=>{let t=l[e.id];t&&(t.destroyed=!0),delete l[e.id]};t.default={add(e){s(e);let t={view:e};l.push(t),l[e.id]=t},remove:s,setup(){if(!i){for(let e of a)document.addEventListener(e,o);window.addEventListener("resize",o)}i++},teardown(){if(i>0&&!--i){for(let e of a)document.removeEventListener(e,o);window.removeEventListener("resize",o)}}}}),define("gallery/mx-number/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("rd-m",'.rd-bq{width:100%;border:none;height:100%;background-color:transparent;color:#333;display:block}.rd-br,.rd-bs{width:20px;height:50%;position:absolute;right:1px;border:2px solid #fff;border-radius:2px;cursor:pointer}.rd-br:hover,.rd-bs:hover{background-color:#f0f0f0}.rd-bs{top:1px}.rd-br{bottom:1px}.rd-bt:after{width:0;height:0;position:absolute;top:0;right:0;bottom:0;left:0;border-left:4px solid transparent;border-right:4px solid transparent;content:"";display:block;margin:auto}.rd-br:after{border-top:4px solid #ccc}.rd-bs:after{border-bottom:4px solid #ccc}.rd-br.rd-bu,.rd-bs.rd-bu{cursor:not-allowed;border-color:transparent}.rd-br.rd-bu:hover,.rd-bs.rd-bu:hover{background-color:transparent}'),t.default=i.default.View.extend({tmpl:(e,t,r)=>{let i,l=[],{disabled:a}=e;return l.push(t("input",{class:"rd-bq",id:"ipt_"+r,"mx5-focusin":r+"\x1eactive()","mx5-focusout":r+"\x1edeactive()","mx5-change":r+"\x1enumCheck()","mx5-keydown":r+"\x1epressCheck()",disabled:a,autocomplete:"off","mx5-input":r+"\x1einputCheck()"},0,0,1)),i="rd-bs rd-bt rd-j",a&&(i+=" rd-bu"),l.push(t("span",{"mx5-click":r+"\x1enumChange({i:1})","mx5-mousedown":r+"\x1efastStart({i:1})","mx5-contextmenu":r+"\x1eprevent()",class:i})),i="rd-br rd-bt rd-j",a&&(i+=" rd-bu"),l.push(t("span",{"mx5-click":r+"\x1enumChange()","mx5-mousedown":r+"\x1efastStart()","mx5-contextmenu":r+"\x1eprevent()",class:i})),t(r,0,l)},assign(e){let t=this,r=e.value;void 0===r&&(r=""),""!==r&&(r=+r);let l=t.value!==r,a=t.disabled;return t.value=r,t.step=+e.step||1,t.supportEmpty=e.empty+""=="true",t.formatValue=e.format+""=="true",t.disabled=t.root.hasAttribute("disabled"),t.max=i.default.has(e,"max")?+e.max:Number.MAX_VALUE,t.min=i.default.has(e,"min")?+e.min:-Number.MAX_VALUE,t.ratio=+e.ratio||10,t.tailLength=e.fixed||0,l||a!=t.disabled},async render(){let e=this,t=i.default.mark(this,"renderMarker");await e.digest({disabled:e.disabled}),t()&&e.fixValue()},fixValue(){let e=this,t=e.value;""!==t&&(t=e.getValue(t),e.formatValue&&(t=t.toFixed(e.tailLength))),e.ctrlInput=i.node("ipt_"+e.id),e.ctrlInput.value=t},getValue(e){let t=this;if((e=+e)||0===e){let r=t.max,i=t.min;e>r?e=r:e<i&&(e=i),e=+e.toFixed(t.tailLength)}return isNaN(e)?t.supportEmpty?"":0:e},setValue(e,t){let r=this;if(""!==e||!r.supportEmpty)return(e=r.getValue(e))!==r.value&&(t||(r.ctrlInput.value=e),i.default.dispatch(r.root,"input",{value:r.value=e})),r.value;i.default.dispatch(r.root,"input",{value:r.value=e})},numChange(e,t){let r=this.value;""===r&&(r=0);let i=this.step,l=r;t&&(i*=this.ratio),e?l+=i:l-=i,this.setValue(l)},cursorShow(){let e=this.ctrlInput;e&&(e.focus(),e.selectionStart=e.selectionEnd=e.value.length)},simulatorActive(){let e=this;e.root.classList.add("rd-v"),i.default.has(e,"lastValue")||(e.lastValue=e.value)},"numCheck<change>"(e){e.stopPropagation()},"active<focusin>"(){this.simulatorActive()},"deactive<focusout>"(e){let t=this;t.uiKeepActive||(t.root.classList.remove("rd-v"),t.fixValue(),t.lastValue!=t.value&&i.default.dispatch(t.root,"change",{value:t.value}),delete t.lastValue)},"numChange<click>"(e){let t=this;t.disabled||t.fastChangeStart||(t.numChange(e.params.i,e.shiftKey),t.cursorShow())},"fastStart<mousedown>"(e){let t=this;if(!t.disabled){t.uiKeepActive=!0,t.simulatorActive();let r=e.params.i,l=i.default.mark(this,"mousedown");t.longTapTimer=setTimeout(()=>{l()&&(t.intervalTimer=setInterval(()=>{l()&&(t.fastChangeStart=!0,t.numChange(r),t.cursorShow())},50))},300)}},"pressCheck<keydown>"(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();let t=this;if(!t.disabled){let r=e.eventTarget.value;if(""===r)t.value="";else{let e=Number(r);(e||0===e)&&e!=t.value&&(t.value=e)}t.numChange(38==e.keyCode,e.shiftKey)}}},"prevent<contextmenu>"(e){e.preventDefault()},"inputCheck<input>"(e){e.stopPropagation();let t=e.eventTarget;this.setValue(t.value,!0)},"$doc<mouseup>"(){let e=this;clearTimeout(e.longTapTimer),clearInterval(e.intervalTimer),delete e.uiKeepActive;let t=i.default.mark(this,"@:mouseup");setTimeout(()=>{t()&&delete e.fastChangeStart},0)}})}),define("gallery/mx-picture/index",["magix","../mx-dialog/index"],(e,t,r)=>{let i={class:"rd-bw"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("../mx-dialog/index");l.default.applyStyle("rd-n",".rd-bv{height:100px;padding:4px;border:1px solid #e6e6e6;background:#fff;cursor:pointer;margin:4px 0}.rd-bw{line-height:92px;text-align:center;color:#999}.rd-bx{min-height:500px}.rd-by{width:100px;height:100px;margin:4px;overflow:hidden;border:1px solid #e6e6e6;cursor:pointer;padding:4px}.rd-by:hover{border-color:#999}.rd-bz{width:100%;height:100%;background-position:50%;background-repeat:no-repeat;background-size:contain}.rd-bA{width:100px;margin:0 5px;height:25px}.rd-bB{margin:30px 0}.rd-bC{font-size:16px}.rd-bD{position:absolute;right:3px;top:2px;opacity:.2}.rd-bD:hover{opacity:.5}.rd-bE{background:#fbfbfb;cursor:not-allowed}.rd-bE .rd-bD,.rd-bE .rd-bD:hover{opacity:.1}.rd-bF{margin-bottom:10px;border-bottom:1px solid #fca576}.rd-bG{float:left;height:25px;line-height:25px;padding:0 4px;cursor:pointer;margin:0 5px -1px;transition:all .25s}.rd-bH{background:#fca576;border-radius:4px 4px 0 0}"),t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s,d,n,p=[],{disabled:u,src:h,i18n:c}=e;return o=[],h?(n=[t(0,0,"\ue67f")],d=[t("i",{class:"rd-_ rd-bD","mx5-click":!u&&r+"\x1eclearImage()",title:l(c("removeImage"))},n)],s=[t("div",{class:"rd-bz",style:"background-image:url('"+l(h)+"')"},d)],o.push(...s)):(d=[t(0,0,l(c("clickChooseImage")))],s=[t("div",i,d)],o.push(...s)),a="rd-bv rd-g",u&&(a+=" rd-bE"),p.push(t("div",{"mx5-click":!u&&r+"\x1echoosePicture()",class:a},o)),t(r,0,p)},mixins:[a.default],assign(e){return this.set(e),!0},render(){this.digest()},"choosePicture<click>"(){let e=this;e.mxDialog("gallery/mx-picture/list",{width:932,done(t){e.digest(t),e.fireEvent(t)}})},fireEvent(e){l.default.dispatch(this.root,"change",e)},"clearImage<click>"(e){e.stopPropagation(),this.digest({src:""}),this.fireEvent({src:"",width:0,height:0})}})}),define("gallery/mx-picture/list",["magix","../../designer/service","../../i18n/index"],(e,t,r)=>{let i={class:"rd-F rd-o"},l={class:"rd-bx rd-i rd-p"},a={class:"rd-bB rd-bC rd-c"},o={class:"rd-bF rd-i"},s={class:"rd-bA rd-c rd-l"};Object.defineProperty(t,"__esModule",{value:!0});const d=e("magix"),n=e("../../designer/service"),p=e("../../i18n/index");t.default=d.default.View.extend({mixins:[n.default],tmpl:(e,t,r,d,n,p,u,h)=>{let c,f,g,m,x,y,b=[],{i18n:w,error:v,list:k,cIndex:S}=e;if(f=[t(0,0,d(w("libImages")))],c=[t("h5",0,f)],b.push(t("div",i,c)),c=[],v)g=[t(0,0,d(v.msg))],f=[t("div",a,g)],c.push(...f);else{f=[],g=[];for(let e=k.length,i=0;i<e;i+=1){y=[t(0,0,d(k[i].title))],x="rd-bG",i==S&&(x+=" rd-bH"),m=[t("div",{"mx5-click":i!=S&&r+"\x1echangeTab({to:"+d(i)+"})",class:x},y)],g.push(...m)}f.push(t("div",o,g));for(let e=k[S].list,i=e.length,l=0;l<i;l+=1){let i=e[l];y=[t("div",{class:"rd-bz",style:"background-image:url('"+d(i.src)+"')"})],m=[t("div",{class:"rd-by","mx5-click":r+"\x1euse({src:'"+h(i.src)+"'})"},y)],y=[t(0,0,d(i.title))],m.push(t("div",s,y)),g=[t("div",{class:"rd-d",title:d(i.title)},m)],f.push(...g)}c.push(...f)}return b.push(t("div",l,c)),t(r,0,b)},init(e){this.dialog=e.dialog,this.doneCallback=e.done,this.set({cIndex:0})},render(){let e=d.default.mark(this,"render");this.fetch("getImages",(t,r)=>{e()&&this.digest({error:t,list:r.get("data",[])})})},"use<click>"(e){let t=this,r=new Image,i=t.doneCallback,l=e.params.src,a=d.default.mark(this,"use");r.onerror=(()=>{a()&&t.alert(p.default("loadImgError"))}),r.onload=(()=>{if(a()){let e=r.width,a=r.height;t.dialog.close(),i({src:l,width:e,height:a})}}),r.src=l},"changeTab<click>"(e){let{to:t}=e.params;this.digest({cIndex:t})}})}),define("gallery/mx-pointer/cursor",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=i.default.guid("cursor_");i.default.applyStyle("rd-o",".rd-bI{opacity:0;background:#fff;position:fixed;left:0;right:0;top:0;bottom:0;z-index:10000}");const a=document.body;t.default={show(e){let t=getComputedStyle(e);this.showByType(t.cursor)},showByType(e){let t=i.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="rd-bI" id="${l}"/>`),t=i.node(l)),t.style.cursor=e,t.style.display="block"},hide(){let e=i.node(l);e&&(e.style.display="none")},rootShowByType(e){a.style.cursor=e},rootHide(){a.style.cursor="auto"}}}),define("gallery/mx-pointer/follower",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("rd-p",".rd-bJ{background:#fa742b;position:absolute;opacity:.6;left:-1000px;top:-1000px;width:30px;height:30px;text-align:center;line-height:30px;color:#fff;border-radius:2px;z-index:5000;pointer-events:none}");let l=i.default.guid("de_");t.default={update(e){let t=i.node(l);t||(document.body.insertAdjacentHTML("beforeend",`<div class="rd-bJ rd-w" id="${l}"/>`),t=i.node(l)),t.innerHTML=e},show(e){let t=i.node(l).style;t.left=e.pageX+10+"px",t.top=e.pageY+18+"px"},hide(){let e=i.node(l).style;e.left="-1000px",e.top="-1000px"}}}),define("gallery/mx-pointer/select",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");i.default.applyStyle("rd-q",".rd-bK{position:absolute;border:1px dashed #fa742b;display:none;pointer-events:none}");let l=i.default.guid("set_");t.default={init(){i.node(l)||document.body.insertAdjacentHTML("beforeend",`<div id="${l}" class="rd-bK"></div>`)},update(e,t,r,a){let o=i.node(l).style;o.left=e+"px",o.top=t+"px",o.width=r+"px",o.height=a+"px",o.display="block"},hide(){i.node(l).style.display="none"}}}),define("gallery/mx-runner/fx",["./index"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("./index");let l=e=>e,a=Date.now,o=function(e,t){let r=this;r.algFn&&!t||(t=t||l,r.algFn=((e,i)=>e+(i-e)*t(r.currentTimespan/r.itemTimespan))),r.taskList=[],r.interval=e};Object.assign(o.prototype,{run(e,t){let r=this;r.destroyed||(r.taskList.push({timespan:e,fn:t}),r.forRunnerFn||r.startWork())},startWork(){let e=this,t=e.taskList.shift();t?(e.itemTimespan=t.timespan,e.itemFn=t.fn,e.nowTime=a(),e.forRunnerFn||i.default.taskAdd(e.interval,e.forRunnerFn=(t=>{e.currentTimespan=Date.now()-e.nowTime,e.currentTimespan>e.itemTimespan&&(e.currentTimespan=e.itemTimespan,t=1);try{e.itemFn(e.algFn)}catch(e){t=e}t&&e.startWork()}))):e.stop()},stop(){let e=this;e.forRunnerFn&&(i.default.taskRemove(e.forRunnerFn),delete e.forRunnerFn)},destroy(){this.stop(),this.taskList=[],this.destroyed=1}}),t.default={getFx(e,t){let r=new o(e,t);return this.on("destroy",()=>{r.destroy()}),r}}}),define("gallery/mx-runner/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");let l=window.requestAnimationFrame||(e=>setTimeout(e,16)),a=window.cancelAnimationFrame||clearTimeout,o=Date.now;t.default={taskList:[],taskAdd(e,t){this.taskList.push({i:e||15,f:t,n:o()}),this.startWork()},taskRemove(e){let t=this.taskList;for(let r,i=0;i<t.length;i++)if(!(r=t[i]).r&&r.f==e){r.r=1;break}},startWork(){let e=this;if(!e.timerId){let t=()=>{let r=e.taskList;for(let e,t,l=0;l<r.length;l++)(e=r[l]).r?r.splice(l--,1):(t=o())-e.n>=e.i&&(e.n=t,i.default.toTry(e.f));r.length?e.timerId=l(t):(a(e.timerId),delete e.timerId)};e.timerId=l(t)}}}}),define("i18n/index",["magix","./zh-cn"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("./zh-cn"),a={"zh-cn":l.default,zh:l.default},o=i.default.has,s=/\{(\d+)\}/g;t.default=((e,...t)=>{let r=(i.default.config("lang")||navigator.language).toLowerCase();o(a,r)||(r="zh-cn");let l=a[r],d=o(l,e)?l[e]:e;return t.length&&(d=d.replace(s,(e,r,i)=>(r|=0,t.length>r?(i=t[r],o(l,i)?l[i]:i):e))),d})}),define("i18n/zh-cn",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={siteName:"\u5de5\u7a0b\u8bbe\u8ba1\u5668",dialogTip:"\u63d0\u793a",btnEnter:"\u786e\u5b9a",btnCancel:"\u53d6\u6d88",zoomIn:"\u653e\u5927",zoomOut:"\u7f29\u5c0f",axisDeleteLine:"\u5220\u9664\u8f85\u52a9\u7ebf",axisMoveLine:"\u6309\u4e0b\u62d6\u52a8\u53ef\u79fb\u52a8\u8f85\u52a9\u7ebf",undo:"\u64a4\u9500(Ctrl+Z)",redo:"\u91cd\u505a(Ctrl+Y,Ctrl+Shift+Z)",panelDrag:"\u6309\u4e0b\u79fb\u52a8\u9762\u677f",panelEwResize:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u5bbd\u5ea6",panelNsResize:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u9762\u677f\u9ad8\u5ea6",panelElements:"\u5143\u7d20",panelProps:"\u5c5e\u6027",panelData:"\u6570\u636e\u6e90",panelOverview:"\u6982\u89c8\u56fe",panelOpenPanel:"\u6253\u5f00{0}\u9762\u677f",panelClosePanel:"\u5173\u95ed{0}\u9762\u677f",panelExpandPanel:"\u5c55\u5f00{0}\u9762\u677f",panelShrinkPanel:"\u6298\u53e0{0}\u9762\u677f",pressDragRotateElement:"\u6309\u4e0b\u62d6\u52a8\u65cb\u8f6c\u5143\u7d20",pressDragWidthElement:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6",pressDragHeightElement:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u9ad8\u5ea6",pressDragWidthHeightElement:"\u6309\u4e0b\u62d6\u52a8\u6539\u53d8\u5143\u7d20\u5bbd\u5ea6\u548c\u9ad8\u5ea6",propsType:"\u7c7b\u578b\uff1a",propsX:"X\u5750\u6807\uff1a",propsY:"Y\u5750\u6807\uff1a",propsWidth:"\u5bbd\uff1a",propsHeight:"\u9ad8\uff1a",propsRotate:"\u65cb\u8f6c\u89d2\u5ea6\uff1a",propsBackground:"\u80cc\u666f\u989c\u8272\uff1a",propsForecolor:"\u6587\u5b57\u989c\u8272\uff1a",menuSelectAll:"\u5168\u9009",menuPaste:"\u7c98\u8d34",menuCopy:"\u590d\u5236",menuCut:"\u526a\u5207",menuDelete:"\u5220\u9664",menuMoveUp:"\u4e0a\u79fb\u4e00\u5c42",menuToTop:"\u79fb\u81f3\u9876\u5c42",menuMoveDown:"\u4e0b\u79fb\u4e00\u5c42",menuToBottom:"\u79fb\u81f3\u5e95\u5c42",alignLeft:"\u5de6\u5bf9\u9f50",alignRight:"\u53f3\u5bf9\u9f50",alignTop:"\u4e0a\u5bf9\u9f50",alignBottom:"\u4e0b\u5bf9\u9f50",alignMiddle:"\u5782\u76f4\u5c45\u4e2d\u5bf9\u9f50",alignCenter:"\u6c34\u5e73\u5c45\u4e2d\u5bf9\u9f50",loadImgError:"\u83b7\u53d6\u56fe\u7247\u5c3a\u5bf8\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff5e\uff5e",removeImage:"\u6e05\u9664\u56fe\u7247",clickChooseImage:"\u70b9\u51fb\u9009\u62e9\u56fe\u7247",libImages:"\u56fe\u7247\u5e93",removeColor:"\u6e05\u9664\u989c\u8272",propsFontSize:"\u5b57\u53f7\uff1a",propsPageScale:"\u5168\u5c4f\u663e\u793a\uff1a",propsBackgroundImage:"\u80cc\u666f\u56fe\u7247\uff1a",propsColor:"\u989c\u8272\uff1a",propsBackgroundRepeat:"\u5e73\u94fa\u65b9\u5f0f\uff1a",propsFull:"\u62c9\u4f38\u94fa\u6ee1",propsNoRepeat:"\u539f\u59cb\u5c3a\u5bf8",propsRepeatX:"\u6a2a\u5411\u5e73\u94fa",propsRepeatY:"\u5782\u76f4\u5e73\u94fa",propsRepeat:"\u53cc\u5411\u5e73\u94fa",propsScaleAuto:"\u81ea\u9002\u5e94",propsScaleFull:"\u5168\u5c4f\u94fa\u6ee1",propsLocked:"\u9501\u5b9a\u7f16\u8f91\uff1a",elementsChart:"\u56fe\u8868",elementsText:"\u6587\u672c",elementsPage:"\u9875\u9762",elementsLine:"\u76f4\u7ebf",elementsBezier:"\u8d1d\u585e\u5c14",elementsRect:"\u77e9\u5f62",elementsImage:"\u56fe\u7247",elementsCircle:"\u5706\u5f62",elementsRepeat:"\u5e73\u94fa\u56fe",elementsTable:"\u8868\u683c",elementsChartLine:"\u6298\u7ebf\u56fe",elementsChartMeter:"\u4eea\u8868\u76d8",elementsChartBar:"\u67f1\u72b6\u56fe",elementsChartPie:"\u997c\u56fe",elementsRepeatSelectImage:"\u8bf7\u9009\u62e9\u5e73\u94fa\u56fe\u7247",elementsImageSelectImage:"\u8bf7\u9009\u62e9\u56fe\u7247",propsAlpha:"\u900f\u660e\u5ea6\uff1a",propsLetterSpacing:"\u5b57\u95f4\u8ddd\uff1a",propsTextContent:"\u5185\u5bb9\uff1a",propsFontStyle:"\u6837\u5f0f\uff1a",propsFontAlign:"\u6392\u5217\uff1a",mxGalleryFontStyleBold:"\u52a0\u7c97",mxGalleryFontStyleItalic:"\u659c\u4f53",mxGalleryFontStyleUnderline:"\u4e0b\u5212\u7ebf",mxGalleryFontAlignLeft:"\u6c34\u5e73\u5c45\u5de6",mxGalleryFontAlignCenter:"\u6c34\u5e73\u5c45\u4e2d",mxGalleryFontAlignRight:"\u6c34\u5e73\u5c45\u53f3",mxGalleryFontAlignTop:"\u5782\u76f4\u5c45\u4e0a",mxGalleryFontAlignMiddle:"\u5782\u76f4\u5c45\u4e2d",mxGalleryFontAlignBottom:"\u5782\u76f4\u5c45\u4e0b",propsLong:"\u957f\uff1a",propsImage:"\u56fe\u7247\uff1a",propsBordercolor:"\u8fb9\u6846\u989c\u8272\uff1a",propsFillcolor:"\u586b\u5145\u989c\u8272\uff1a",propsLineType:"\u7ebf\u7c7b\u578b\uff1a",propsBorderType:"\u8fb9\u6846\u7c7b\u578b\uff1a",propsBorderWidth:"\u8fb9\u6846\u5bbd\u5ea6\uff1a",propsBorderRadius:"\u5706\u89d2\uff1a",propsBorderTypeSolid:"\u5b9e\u7ebf",propsBorderTypeDashed:"\u865a\u7ebf",propsBorderTypeDotted:"\u70b9\u7ebf",propsImageWidth:"\u56fe\u7247\u5bbd\uff1a",propsImageHeight:"\u56fe\u7247\u9ad8\uff1a",propsImageReset:"\u8fd8\u539f\u5c3a\u5bf8\uff1a",propsChartTitle:"\u56fe\u8868\u6807\u9898\uff1a",propsOffsetHor:"\u6c34\u5e73(%)\uff1a",propsOffsetVer:"\u5782\u76f4(%)\uff1a",elementsImageReset:"\u539f\u59cb\u56fe\u7247\u5bbd\u9ad8",elementsTextContent:"\u8bf7\u8f93\u5165\u5185\u5bb9",sameWidth:"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u5bbd\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u5bbd\u5ea6)\u540c\u6b65\u5bbd\u5ea6",sameHeight:"\u4ee5\u9009\u4e2d\u5143\u7d20\u6700\u5927\u9ad8\u5ea6(\u6309\u4e0bshift\u5219\u662f\u6700\u5c0f\u9ad8\u5ea6)\u540c\u6b65\u9ad8\u5ea6",sameVerSpace:"\u4ee5\u5143\u7d20\u4e2d\u5fc3\u70b9(\u6309\u4e0bshift\u5219\u4ee5\u5143\u7d20\u81ea\u8eab)\u5782\u76f4\u5747\u5206\u6392\u5217",sameHorSpace:"\u4ee5\u5143\u7d20\u4e2d\u5fc3\u70b9(\u6309\u4e0bshift\u5219\u4ee5\u5143\u7d20\u81ea\u8eab)\u6c34\u5e73\u5747\u5206\u6392\u5217",propsBezierStartX:"\u8d77\u59cb\u70b9X\uff1a",propsBezierStartY:"\u8d77\u59cb\u70b9Y\uff1a",propsBezierCtrl1X:"\u63a7\u5236\u70b91X\uff1a",propsBezierCtrl1Y:"\u63a7\u5236\u70b91Y\uff1a",propsBezierCtrl2X:"\u63a7\u5236\u70b92X\uff1a",propsBezierCtrl2Y:"\u63a7\u5236\u70b92Y\uff1a",propsBezierEndX:"\u7ed3\u675f\u70b9X\uff1a",propsBezierEndY:"\u7ed3\u675f\u70b9Y\uff1a",saveContentTitle:"\u4fdd\u5b58\u5185\u5bb9"}}),define("util/bezier",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=(e,t,r,i,l)=>t*(1-e)*(1-e)*(1-e)+3*r*e*(1-e)*(1-e)+3*i*e*e*(1-e)+l*e*e*e,l=(e,t,r,i)=>{let l=-2*(3*e-6*t+3*r),a=4*Math.pow(3*e-6*t+3*r,2)-36*(i-e+3*t-3*r)*(t-e),o=6*(i-e+3*t-3*r);if(a>0){let e=Math.sqrt(a),t=(l+e)/o,r=(l-e)/o;if(t>=0&&r>=0&&t<=1&&r<=1)return[t,r,0,1];if(t>=0&&t<=1)return[t,0,1];if(r>=0&&r<=1)return[r,0,1]}return[0,1]};t.default=(e=>{let{x:t,y:r,width:a,height:o}=(e=>{let t=l(e.startX,e.ctrl1X,e.ctrl2X,e.endX),r=l(e.startY,e.ctrl1Y,e.ctrl2Y,e.endY),a=[],o=[];for(let r of t)a.push(i(r,e.startX,e.ctrl1X,e.ctrl2X,e.endX));for(let t of r)o.push(i(t,e.startY,e.ctrl1Y,e.ctrl2Y,e.endY));let s=Math.min(...a),d=Math.max(...a),n=Math.min(...o);return{x:s,y:n,width:d-s,height:Math.max(...o)-n}})(e);e.x=t,e.y=r,e.width=a,e.height=o})}),define("util/converter",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default={realToStageCoord({x:e,y:t}){let r=i.node("stage_canvas").getBoundingClientRect();return{x:e-=r.left,y:t-=r.top}},stageToRealCoord({x:e,y:t}){let r=i.node("stage_canvas").getBoundingClientRect();return{x:e+=r.left,y:t+=r.top}},toShowValue:e=>e/i.State.get("stageScale")|0,toRealValue:e=>e*i.State.get("stageScale")}}),define("util/transform",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={lt:0,mt:1,rt:2,rm:3,rb:4,mb:5,lb:6,lm:7};t.default={rotateRect({x:e,y:t,width:r,height:i},l){let a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2))/2,o=r?Math.round(180*Math.atan(i/r)/Math.PI):0,s=180-l-o,d=o-l,n=90-l,p=l,u=r/2,h=i/2,c=e+u,f=t+h,g={x:c+a*Math.cos(s*Math.PI/180),y:f-a*Math.sin(s*Math.PI/180)},m={x:c+h*Math.cos(n*Math.PI/180),y:f-h*Math.sin(n*Math.PI/180)},x={x:c+a*Math.cos(d*Math.PI/180),y:f-a*Math.sin(d*Math.PI/180)},y={x:c+u*Math.cos(p*Math.PI/180),y:f+u*Math.sin(p*Math.PI/180)},b={x:c-a*Math.cos(s*Math.PI/180),y:f+a*Math.sin(s*Math.PI/180)},w={x:c-h*Math.sin(p*Math.PI/180),y:f+h*Math.cos(p*Math.PI/180)},v={x:c-a*Math.cos(d*Math.PI/180),y:f+a*Math.sin(d*Math.PI/180)},k={x:c-u*Math.cos(p*Math.PI/180),y:f-u*Math.sin(p*Math.PI/180)},S=Math.min(g.x,x.x,b.x,v.x),A=Math.max(g.x,x.x,b.x,v.x),_=Math.min(g.y,x.y,b.y,v.y),E=Math.max(g.y,x.y,b.y,v.y);return{point:[g,m,x,y,b,w,v,k],width:A-S,height:E-_,left:S,right:A,top:_,bottom:E}},getPointAndOpposite(e,t){let r={},l={},a=i[t],o=0,s=a-4;return s<0&&(s=a+4),{current:{index:a,point:l=e[a]},opposite:{index:o=s,point:r=e.slice(s,s+1)[0]}}},getScaledRect(e,t){let{x:r,y:i,width:l,height:a,scale:o}=e,s={x:0,y:0},d=l*(o.x-1),n=a*(o.y-1),p=l+d,u=a+n,h=r-d/2,c=i-n/2;if(t){let e=[{x:r,y:i},{x:r+l,y:i},{x:r+l,y:i+a},{x:r,y:i+a}],o=[{x:h,y:c},{x:h+p,y:c},{x:h+p,y:c+u},{x:h,y:c+u}];s.x=e[t].x-o[t].x,s.y=e[t].y-o[t].y}return{x:h+s.x,y:c+s.y,width:p,height:u}},getNewRect(e,t,r,i){let l=this.getScaledRect({x:e.x,y:e.y,width:e.width,height:e.height,scale:t}),a=l.width,o=l.height,s=this.rotateRect(l,e.rotate),d=r.point[i].x-s.point[i].x+s.left,n=r.point[i].y-s.point[i].y+s.top;return{left:d+s.width/2-a/2,top:n+s.height/2-o/2,width:a,height:o}},getRectXy({x:e,y:t,width:r,height:i},l){if(0==r)return{x:e,y:t};let a=e+r/2,o=t+i/2,s=Math.sqrt(r*r/2/2+i*i/2/2),d=180*Math.atan(i/r)/Math.PI+l+180;return{x:a+s*Math.cos(d*Math.PI/180),y:o+s*Math.sin(d*Math.PI/180)}}}}),define("panels/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");let l=[{title:"panelElements",icon:"&#xe629;",width:100,height:270,left:25,top:90,show:!0,resizeY:!0,id:"p-elements",view:"panels/elements/index"},{title:"panelProps",icon:"&#xe7a1;",width:240,height:120,right:10,top:90,show:!0,resizeY:!0,id:"p-props",view:"panels/props/index"},{title:"panelData",icon:"&#xe609;",width:200,height:120,show:!1,right:260,top:90,id:"p-data",view:"panels/data/index"},{title:"panelOverview",icon:"&#xe7ad;",width:180,height:124,show:!0,left:25,bottom:10,id:"p-overview",view:"panels/overview/index",fixedSize:!0}],a=i.default.toMap(l,"id");t.default={openPanels(){for(let e of l)e.show&&this.openPanel(e.id,!0);i.State.fire("panelChange")},openPanel(e,t){let r=a[e];if(!r.opened){if(r.opened=1,r.eId)i.node(r.eId).style.display="block";else{r.eId=i.default.guid("panel_");let e=i.node(i.default.config("rootId"));e.insertAdjacentHTML("beforeend",`<div id="${r.eId}"></div>`);let t=i.Vframe.byNode(e);r.close=(()=>{this.closePanel(r.id)}),t.mountVframe(i.node(r.eId),"panels/panel",r)}if(!t){i.State.fire("panelChange"),i.Vframe.byNode(i.node(r.eId)).invoke("show")}}},closePanel(e){let t=a[e];if(t.opened){t.opened=0;let e=i.node(t.eId);e.style.display="none",i.State.fire("panelChange"),i.Vframe.byNode(e).invoke("hide")}},togglePanel(e){a[e].opened?this.closePanel(e):this.openPanel(e)},supportPanels:()=>l}}),define("panels/panel",["magix","../gallery/mx-pointer/cursor","../gallery/mx-dragdrop/index"],(e,t,r)=>{let i={class:"rd-bY rd-i rd-j"},l={class:"rd-w rd-x rd-y"},a={class:"rd-E rd-b rd-e"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),s=e("../gallery/mx-pointer/cursor"),d=e("../gallery/mx-dragdrop/index");o.default.applyStyle("rd-t",".rd-bX{background:hsla(0,0%,100%,.93);position:absolute;box-shadow:0 2px 4px 0 rgba(0,0,0,.3)}.rd-bY{font-size:12px;height:18px;line-height:18px;background:#fa742b;color:#fff}.rd-bZ{padding:0 5px;cursor:move;width:calc(100% - 36px)}.rd-b0{width:16px;height:14px;margin:0 1px;font-size:11px;cursor:pointer;display:inline-flex;justify-content:center;align-items:center;border-radius:2px}.rd-b0:hover{background:#e64e30}.rd-b1{overflow:hidden;transition:height .25s}.rd-b2{transition:none}.rd-b3{width:calc(100% - 2px);overflow:auto;float:left}.rd-b4{width:2px;float:right;cursor:ew-resize}.rd-b5,.rd-b4{background:#fafafa}.rd-b5{height:2px;cursor:ns-resize}.rd-b6{scroll-behavior:smooth}.rd-b6::-webkit-scrollbar,.rd-b6::-webkit-scrollbar-corner{height:2px;width:2px;background:#fafafa}");let n=[],p={add(e){n.push(e)},remove(e){for(let t=n.length;t--;)if(n[t]==e){n.splice(t,1);break}this.zIndex()},zIndex(){for(let e=n.length;e--;)n[e].setZIndex(300+e)},top(e){if(n[n.length-1]!=e){for(let t=n.length;t--;)if(n[t]==e){n.splice(t,1);break}n.push(e),this.zIndex()}}};t.default=o.default.View.extend({tmpl:(e,t,r,o)=>{let s,d,n,p,u,h,c=[],{width:f,left:g,right:m,top:x,bottom:y,zIndex:b,i18n:w,icon:v,title:k,shrink:S,fixedSize:A,height:_,resizeX:E,view:M,resizeY:C}=e;return u=[t(0,1,o(v))],p=[t("i",l,u),t(0,0,o(w(k)))],n=[t("div",{class:"rd-bZ rd-d",title:o(w("panelDrag")),"mx5-mousedown":r+"\x1edragMove()"},p)],u=[t(0,0,"\ue73a")],h="rd-w rd-b0",S&&(h+=" rd-z"),p=[t("i",{"mx5-click":r+"\x1etoggleHeight()",title:o(w(S?"panelExpandPanel":"panelShrinkPanel",k)),class:h},u)],u=[t(0,0,"\ue635")],p.push(t("i",{class:"rd-b0 rd-w","mx5-click":r+"\x1eclose()",title:o(w("panelClosePanel",k))},u)),n.push(t("div",a,p)),d=[t("div",i,n)],(n=[]).push(t("div",{style:"width:"+o(E?"calc(100% - 2px)":"100%"),class:"rd-b rd-b3 rd-b6 rd-k","mx5-view":o(M)})),E||(p=[t("div",{class:"rd-b rd-b4 rd-j",title:o(w("panelEwResize")),"mx5-mousedown":r+"\x1estartResize({w:1})"})],n.push(...p)),d.push(t("div",{class:"rd-b1",id:"c_"+r,style:"height:"+o(S?0:A?`${_}px`:`calc(100vh - ${_}px)`)},n)),h="rd-b5 rd-j",!S&&C||(h+=" rd-h"),d.push(t("div",{title:o(w("panelNsResize")),"mx5-mousedown":r+"\x1estartResize({h:1})",class:h})),s="width:"+o(f)+"px;",s+=null!=g?"left:"+o(g):"right:"+o(m),s+="px;",s+=null!=x?"top:"+o(x)+"px":"bottom:"+o(y)+"px",s+=";z-index:"+o(b),c.push(t("div",{class:"rd-bX",id:"p_"+r,"mx5-mousedown":r+"\x1eupdateZIndex()",style:s},d)),t(r,0,c)},mixins:[d.default],init(e){p.add(this),this.on("destroy",()=>{p.remove(this)}),this.pClose=e.close,this.set({icon:e.icon,title:e.title,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom,view:e.view,fixedSize:e.fixedSize,resizeX:e.resizeX,resizeY:e.resizeY})},render(){this.digest({zIndex:300+n.length})},"dragMove<mousedown>"(e){let t=o.node("p_"+this.id).style,r=this.get("left"),i=this.get("width"),l=0;null==r&&(l=1,r=this.get("right"));let a=this.get("top"),d=0;null==a&&(d=1,a=this.get("bottom"));let n=l?"right":"left",p=d?"bottom":"top",u=0,h=e.eventTarget;this.dragDrop(e,o=>{u||(u=1,s.default.show(h));let c=(l?e.pageX-o.pageX:o.pageX-e.pageX)+r;c<0?c=0:c+i>window.innerWidth&&(c=window.innerWidth-i);let f=(d?e.pageY-o.pageY:o.pageY-e.pageY)+a;f<0?f=0:f+18>window.innerHeight&&(f=window.innerHeight-18),t[n]=c+"px",t[p]=f+"px",this.set({[n]:c,[p]:f})},()=>{s.default.hide()})},"startResize<mousedown>"(e){let{w:t}=e.params,r=this.get("width"),i=this.get("height"),l=this.get("right"),a=o.node("c_"+this.id);a.classList.add("rd-b2");let d=a.style,n=o.node("p_"+this.id).style,p=0,u=e.eventTarget;this.dragDrop(e,a=>{if(p||(p=1,s.default.show(u)),t){let t=a.pageX-e.pageX;t+r<100&&(t=100-r);let o=t+r;n.width=o+"px",(l||0===i)&&(n.right=l-t+"px",this.set({right:l-t})),this.set({width:o})}else{let t=e.pageY-a.pageY+i;d.height=`calc(100vh - ${t}px)`,this.digest({height:t})}},()=>{s.default.hide(),a.classList.remove("rd-b2")})},setZIndex(e){o.node("p_"+this.id).style.zIndex=e},"updateZIndex<mousedown>"(){p.top(this)},show(){p.top(this)},hide(){},"toggleHeight<click>"(){this.digest({shrink:!this.get("shrink")})},"close<click>"(){let e=this.pClose;e&&o.default.toTry(e)}})}),define("panels/data/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r)=>{let i=[];return i.push(t(0,0,"data source panel")),t(r,0,i)},render(){this.digest()}})}),define("panels/elements/index",["magix","../../util/converter","../../designer/stage-elements","../../designer/history"],(e,t,r)=>{let i={class:"rd-bO rd-w"},l={class:"rd-l"};Object.defineProperty(t,"__esModule",{value:!0});const a=e("magix"),o=e("../../util/converter"),s=e("../../designer/stage-elements"),d=e("../../designer/history");a.default.applyStyle("rd-r",".rd-bL{padding:5px 2px}.rd-bM{display:flex;align-items:center;padding:0 2px;color:#333;height:22px;line-height:22px;cursor:pointer;margin:1px 0}.rd-bM:hover{background:#f0f0f0}.rd-bN,.rd-bN:hover{background:#fcb58f}.rd-bO{margin:0 4px 0 2px;font-size:12px}.rd-bP{background:#fa742b;opacity:.4}.rd-bQ-top{box-shadow:0 -1px #fa742b}.rd-bQ-bottom{box-shadow:0 1px #fa742b}");let n=a.default.guid("rp_"),p={init(){a.node(n)||document.body.insertAdjacentHTML("beforeend",`<div class="rd-f rd-bP" id="${n}"></div>`)},show(e){let t=a.node(n).style,{props:r}=e,i=o.default.stageToRealCoord(r);t.left=i.x+"px",t.top=i.y+"px",t.width=r.width+"px",t.height=r.height+"px";let l=r.rotate||0;t.transform=`rotate(${l}deg)`},hide(){a.node(n).style.left="-10000px"}};t.default=a.default.View.extend({tmpl:(e,t,r,a,o,s,d)=>{let n,p,u,h,c,f=[],{elements:g,selectedMap:m,drag:x,index:y,onTop:b,i18n:w}=e;n=[];for(let e=g.length;e--;){let o=g[e];c=[t(0,1,a(o.ctrl.icon))],h=[t("i",i,c)],c=[t(0,0,a(w(o.ctrl.title)))],h.push(t("div",l,c)),u="rd-bM",m[o.id]&&(u+=" rd-bN"),x&&e==y&&(u+=" rd-bQ-"+a(b?"top":"bottom")),p=[t("div",{"mx5-mouseover":r+"\x1eshowRect({element:'"+d(s,o,"\x1e_."+e)+"'})","mx5-mouseout":r+"\x1ehideRect()","mx5-click":r+"\x1eselectElement({element:'"+d(s,o,"\x1e_."+e)+"'})","mx5-dragstart":r+"\x1edragStart({index:"+a(e)+"})","mx5-dragover":r+"\x1edragOver({index:"+a(e)+"})",draggable:"true",class:u},h)],n.push(...p)}return f.push(t("div",{class:"rd-bL rd-j","mx5-dragend":r+"\x1edragEnd()"},n)),t(r,0,f)},init(){p.init();let e=this.render.bind(this);a.State.on("historyShift",e),a.State.on("stageElementsChange",e),a.State.on("stageSelectElementsChange",e)},render(){let e=a.State.get("stageElements"),t=a.State.get("stageSelectElementsMap");this.digest({selectedMap:t,elements:e})},"showRect<mouseover>"(e){if(!a.default.inside(e.relatedTarget,e.eventTarget)){let{element:t}=e.params;p.show(t)}},"hideRect<mouseout>"(e){a.default.inside(e.relatedTarget,e.eventTarget)||p.hide()},"selectElement<click>"(e){let{element:t}=e.params;s.default.multiSelect(e,t)},"dragStart<dragstart>"(e){this.dragIndex=e.params.index,this.dragNode=e.eventTarget,e.dataTransfer.effectAllowed="all",e.dataTransfer.setData("text/plain","fix ff")},"dragOver<dragover>"(e){let t=this;if(t.dragNode!=e.eventTarget){e.dataTransfer.dropEffect="move";let r=e.eventTarget.getBoundingClientRect(),i=r.top+r.height/2>e.pageY,l=e.params.index;t.digest({onTop:i,drag:!0,index:l})}else e.dataTransfer.dropEffect="none",t.digest({drag:!1})},"dragEnd<dragend>"(e){let t=this,r=t.get();if(r.drag){let e=t.dragIndex,i=r.elements[e];r.elements.splice(r.index+(r.onTop?1:0),0,i),r.index<e?r.elements.splice(e+1,1):r.elements.splice(e,1),t.set({elements:r.elements}),a.State.fire("stageElementsChange"),d.default.save()}t.digest({drag:!1})}})}),define("panels/overview/index",["magix","../../gallery/mx-dragdrop/index","../../gallery/mx-pointer/cursor"],(e,t,r)=>{let i={class:"rd-bT"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("../../gallery/mx-dragdrop/index"),o=e("../../gallery/mx-pointer/cursor");l.default.applyStyle("rd-s",".rd-bR{transition:all .25s}.rd-bS{transition:width,height .25s}.rd-bT{padding:2px 0}.rd-bU{background:#edeef3;position:relative;overflow:hidden;box-shadow:inset 1px 1px 6px 2px #dadada}.rd-bV{position:absolute;box-shadow:inset 0 0 1px 1px #fa742b;cursor:move}.rd-bW{background:#fcb58f;position:absolute;border:1px dotted #fff}");let s=[50,240,50,120],d=[180,120];t.default=l.default.View.extend({mixins:[a.default],tmpl:(e,t,r,l)=>{let a,o,s,d,n=[],{width:p,height:u,centerMargin:h,page:c,pageWidth:f,pageHeight:g,canvasMargin:m,elements:x,ratio:y,left:b,top:w,viewportWidth:v,viewportHeight:k}=e;s=[];for(let e=x.length,i=0;i<e;i+=1){let{id:e,props:a,type:o}=x[i];d=[];let n=Math.max(a.width*y,1),p=Math.max(a.height*y,1),u=(a.radius?a.radius*y:0)+"px";"circle"==o&&(u="50%"),d.push(t("div",{id:r+"_"+l(e),class:"rd-bR rd-bW",style:"left:"+l(a.x*y)+"px;top:"+l(a.y*y)+"px;width:"+l(n)+"px;height:"+l(p)+"px;transform:rotate("+l(a.rotate)+"deg);border-radius:"+l(u)})),s.push(...d)}return o=[t("div",{style:"position:relative;background:"+l(c.background)+";width:"+l(f)+"px;height:"+l(g)+"px;margin:"+l(m)},s),t("div",{class:"rd-bS rd-bV",style:"left:"+l(b)+"px;top:"+l(w)+"px;width:"+l(v)+"px;height:"+l(k)+"px","mx5-mousedown":r+"\x1emoveViewport()"})],a=[t("div",{class:"rd-bR rd-bU",style:"width:"+l(p)+"px;height:"+l(u)+"px;margin:"+l(h)},o)],n.push(t("div",i,a)),t(r,0,n)},init(){let e=l.node("stage"),t=this.throttle(this.render);l.State.on("historyShift",t),l.State.on("stageScaleChange",t),l.State.on("stagePageChange",t),l.State.on("stageElementsChange",t),l.State.on("stageSelectElementPropsChange",t),l.State.on("stageSelectElementPropsUpdate",t),e.addEventListener("scroll",this.updateViewportPos.bind(this)),this.updateOverview=t},updateViewportPos(){let e=l.node("stage"),t=this.get("ratio");if(t){let r=this.get("width"),i=this.get("height"),l=this.get("viewportWidth"),a=this.get("viewportHeight");this.digest({left:Math.min(e.scrollLeft*t,r-l),top:Math.min(e.scrollTop*t,i-a)})}},render(){let e=l.default.mark(this,"render"),t=()=>{if(e()){if(!l.node("stage_canvas"))return void setTimeout(t,20);let e=l.State.get("stagePage"),r=l.State.get("stageScale"),i=l.node("stage"),a=i.scrollWidth,o=i.scrollHeight,n=d[0],p=n/a,u=p*o;u>d[1]&&(n=(p=(u=d[1])/o)*a);let h=p*e.width*r,c=p*e.height*r,f="";for(let e of s)f+=p*e+"px ";let g=`${(d[1]-u)/2}px ${(d[0]-n)/2}px`,m=Math.min(i.offsetWidth,a)*p,x=Math.min(i.offsetHeight,o)*p;this.set({width:n,height:u,page:e,pageWidth:h,pageHeight:c,ratio:p,elements:l.State.get("stageElements"),viewportHeight:x,viewportWidth:m,canvasMargin:f,centerMargin:g}),this.updateViewportPos()}};setTimeout(t,20)},"moveViewport<mousedown>"(e){let t=this.get("left"),r=this.get("top"),i=this.get("viewportWidth"),a=this.get("viewportHeight"),s=this.get("width"),d=this.get("height"),n=l.node("stage"),p=this.get("ratio");o.default.rootShowByType("move"),this.dragDrop(e,l=>{let o=t+l.pageX-e.pageX,u=r+l.pageY-e.pageY;o<0?o=0:o>s-i&&(o=s-i),u<0?u=0:u>d-a&&(u=d-a),n.scrollLeft=o/p,n.scrollTop=u/p},()=>{o.default.rootHide()})},"$win<resize>"(){this.updateOverview()}})}),define("panels/props/index",["magix","../../designer/props","../../designer/history","../../util/transform","../../util/bezier","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-font/style","gallery/mx-font/align","gallery/mx-dropdown/index","gallery/mx-picture/index","./page"],(e,t,r)=>{let i,l,a;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-font/style"),e("gallery/mx-font/align"),e("gallery/mx-dropdown/index"),e("gallery/mx-picture/index"),e("./page");let o={class:"rd-b7 rd-j"},s={class:"rd-b8"},d={class:"rd-b9"},n={class:"rd-cd"},p={checked:"checked"},u={value:"value"};Object.defineProperty(t,"__esModule",{value:!0});const h=e("magix"),c=e("../../designer/props"),f=e("../../designer/history"),g=e("../../util/transform"),m=e("../../util/bezier");h.default.applyStyle("rd-u",'.rd-b7{padding:4px;min-width:200px}.rd-b8{line-height:28px;display:flex;align-items:center}.rd-b9{width:80px;text-align:right}.rd-c_{height:1px;line-height:1px;margin:5px 0;background:rgba(0,0,0,.2);background:-webkit-gradient(linear,left top,right top,from(rgba(165,69,243,0)),color-stop(.5,rgba(125,118,132,.33)),to(rgba(165,69,243,0)))}.rd-ca{width:140px}.rd-cb{height:90px}.rd-cc{align-items:flex-start}.rd-cd{display:flex;align-items:center;cursor:pointer}.rd-ce{visibility:hidden;position:absolute}.rd-cf{width:32px;height:16px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;border-radius:22px;background:#ccc}.rd-cf:before{content:"";width:12px;height:12px;position:absolute;left:0;margin:2px;border-radius:50%;background:#fff;transition:all .25s}.rd-ce:checked+.rd-cf{background:#fa742b}.rd-ce:checked+.rd-cf:before{left:100%;margin-left:-14px}.rd-ce:disabled+.rd-cf{background:#e6e6e6;cursor:not-allowed}'),t.default=h.default.View.extend({tmpl:(e,t,r,h,c,f,g,m)=>{let x,y,b,w,v,k,S,A,_,E,M,C=[],{elements:V,i18n:P,props:T}=e;if(1==V.length){let e=V[0];b=[],v=[t(0,0,h(P("propsType")))],w=[t("span",d,v)],v=[t(0,0,h(P(e.ctrl.title)))],w.push(t("span",0,v)),b.push(t("li",s,w));for(let a=e.ctrl.props,o=a.length,s=0;s<o;s+=1){let o=a[s];if(w=[],o.type==T.spliter)v=i?[i]:[i=t("li",{_:"_",class:"rd-c_"})],w.push(...v);else{v=[];let i=e.props[o.key];o.read&&(i=o.read(i)),o.ifShow&&!o.ifShow(e.props)||(A=[],_=[t(0,0,h(P(o.tip)))],A.push(t("span",d,_)),o.type==T.number?(E="gallery/mx-number/index?value="+g(f,i,"\x1e_.0.g."+o.key),null!=(x=o.max)&&(E+="&max="+c(x)),null!=(x=o.step)&&(E+="&step="+c(x)),null!=(x=o.fixed)&&(E+="&fixed="+c(x)),null!=(x=o.min)&&(E+="&min="+c(x)),_=[t("div",{$:"elements",class:"rd-ca rd-g rd-t",disabled:e.props.locked,"mx5-input":r+"\x1eupdateProp({key:'"+m(o.key)+"',use:'value',element:'"+g(f,e,"\x1e_.0")+"',write:'"+g(f,o.write,"\x1e_.0.h."+s+".i")+"',bezier:'"+g(f,o.bezier,"\x1e_.0.h."+s+".j")+"'})","mx5-view":E})],A.push(..._)):o.type==T.color?(_=[t("div",{$:"elements",class:"rd-ca","mx5-input":r+"\x1eupdateProp({key:'"+m(o.key)+"',use:'color',element:'"+g(f,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-color/index?clear="+c(o.clear)+"&color="+g(f,i,"\x1e_.0.g."+o.key)+"&align=right&disabled="+c(e.props.locked)+"&alpha="+c(o.alpha)})],A.push(..._)):o.type==T.boolean?(M=[t("input",{class:"rd-ce",type:"checkbox",checked:e.props[o.key],"mx5-change":r+"\x1eupdateProp({key:'"+m(o.key)+"',native:'checked',element:'"+g(f,e,"\x1e_.0")+"',refresh:'"+g(f,o.refresh,"\x1e_.0.h."+s+".k")+"'})"},0,p,1)],l?M.push(l):M.push(l=t("i",{_:"a",class:"rd-cf"})),_=[t("label",n,M)],A.push(..._)):o.type==T.textArea?(_=[t("textarea",{class:"rd-ca rd-cb rd-u",disabled:e.props.locked,"mx5-input":r+"\x1eupdateProp({key:'"+m(o.key)+"',native:'value',element:'"+g(f,e,"\x1e_.0")+"'})",value:h(i)},0,u)],A.push(..._)):o.type==T.fontStyle?(_=[t("div",{$:"elements",class:"rd-ca","mx5-input":r+"\x1eupdateProp({key:'"+m(o.key)+"',use:'value',element:'"+g(f,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-font/style?disabled="+g(f,e.props.locked,"\x1e_.0.l")+"&value="+g(f,i,"\x1e_.0.g."+o.key)})],A.push(..._)):o.type==T.fontAlign?(_=[t("div",{$:"elements",class:"rd-ca","mx5-input":r+"\x1eupdateProp({key:'"+m(o.key)+"',use:'value',element:'"+g(f,e,"\x1e_.0")+"'})","mx5-view":"gallery/mx-font/align?disabled="+g(f,e.props.locked,"\x1e_.0.l")+"&value="+g(f,i,"\x1e_.0.g."+o.key)})],A.push(..._)):o.type==T.dropdown?(E="gallery/mx-dropdown/index?",(x=e.props.locked)&&(E+="disabled="+g(f,x,"\x1e_.0.l")),E+="&selected="+c(i)+"&list="+g(f,o.items,"\x1e_.0.h."+s+".m")+"&textKey=text&valueKey=value",_=[t("div",{$:"elements",class:"rd-ca","mx5-change":r+"\x1eupdateProp({key:'"+m(o.key)+"',use:'value',element:'"+g(f,e,"\x1e_.0")+"'})","mx5-view":E})],A.push(..._)):o.type==T.image?(_=[t("div",{$:"elements",class:"rd-ca","mx5-change":r+"\x1eupdateProp({key:'"+m(o.key)+"',use:'src',refresh:'"+g(f,o.refresh,"\x1e_.0.h."+s+".k")+"',element:'"+g(f,e,"\x1e_.0")+"',write:'"+g(f,o.write,"\x1e_.0.h."+s+".i")+"'})","mx5-view":"gallery/mx-picture/index?src="+c(i)+"&disabled="+g(f,e.props.locked,"\x1e_.0.l")})],A.push(..._)):o.type==T.imageReset?(M=[t(0,0,h(P("elementsImageReset")))],_=[t("button",{class:"rd-m rd-n",disabled:e.props.locked,"mx5-click":r+"\x1eupdateImageSize({key:'"+m(o.key)+"',element:'"+g(f,e,"\x1e_.0")+"'})"},M)],A.push(..._)):o.type==T.textInput&&(_=[t("input",{class:"rd-t",disabled:e.props.locked,"mx5-input":r+"\x1eupdateProp({key:'"+m(o.key)+"',native:'value',element:'"+g(f,e,"\x1e_.0")+"'})"},0,0,1)],A.push(..._)),S="rd-b8",o.dockTop&&(S+=" rd-cc"),k=[t("li",{class:S},A)],v.push(...k)),w.push(...v)}b.push(...w)}y=[t("ul",o,b)],C.push(...y)}else y=a?[a]:[a=t("div",{_:"b","mx5-view":"panels/props/page"})],C.push(...y);return t(r,0,C)},init(){let e=this.throttle(this.render.bind(this),100);h.State.on("stageSelectElementsChange",e),h.State.on("stageSelectElementPropsChange",e),h.State.on("historyShift",e)},render(){this.digest({scale:h.State.get("stageScale"),props:c.default,elements:h.State.get("stageSelectElements")})},"updateProp<input,change>"(e){let{key:t,use:r,element:i,refresh:l,native:a,write:o,bezier:s}=e.params;if(r||a){let d,n=i.props,p="width"==t||"height"==t;p&&(d=g.default.getRectXy(n,n.rotate));let u=a?e.eventTarget[a]:e[r];if(o&&(u=o(u,n,e)),n[t]=u,p){let e=g.default.getRectXy(n,n.rotate);n.x+=d.x-e.x,n.y+=d.y-e.y,l=!0}s&&m.default(n)}l&&this.render(),h.State.fire("stageSelectElementPropsUpdate");let d=h.node(i.id),n=h.Vframe.byNode(d);n&&n.invoke("update",[i]),f.default.save("saveProps"+t,500)},"updateImageSize<click>"(e){let{key:t,element:r}=e.params,i=r.props,l=g.default.getRectXy(i,i.rotate),a=new Image;a.onload=(()=>{i.width=a.width,i.height=a.height;let e=g.default.getRectXy(i,i.rotate);i.x+=l.x-e.x,i.y+=l.y-e.y,this.render(),h.State.fire("stageSelectElementPropsUpdate");let o=h.node(r.id),s=h.Vframe.byNode(o);s&&s.invoke("update",[r]),f.default.save("saveProps"+t,500)}),a.src=i[t]}})}),define("panels/props/page",["magix","../../designer/history","../../designer/props","gallery/mx-number/index","gallery/mx-color/index","gallery/mx-picture/index","gallery/mx-dropdown/index"],(e,t,r)=>{let i;e("gallery/mx-number/index"),e("gallery/mx-color/index"),e("gallery/mx-picture/index"),e("gallery/mx-dropdown/index");let l={class:"rd-b7 rd-j"},a={class:"rd-b8"},o={class:"rd-b9"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix"),d=e("../../designer/history"),n=e("../../designer/props");t.default=s.default.View.extend({tmpl:(e,t,r,s,d,n,p,u)=>{let h,c,f,g,m,x,y,b,w=[],{i18n:v,ctrl:k,props:S,page:A}=e;c=[],g=[t(0,0,s(v("propsType")))],f=[t("span",o,g)],g=[t(0,0,s(v(k.title)))],f.push(t("span",0,g)),c.push(t("li",a,f));for(let e=k.props,l=e.length,a=0;a<l;a+=1){let l=e[a];f=[],l.type==S.spliter?(g=i?[i]:[i=t("li",{_:"_",class:"rd-c_"})],f.push(...g)):l.ifShow&&!l.ifShow(A)||(x=[],y=[t(0,0,s(v(l.tip)))],x.push(t("span",o,y)),l.type==S.number?(b="gallery/mx-number/index?value="+p(n,A[l.key],"\x1en."+l.key),null!=(h=l.max)&&(b+="&max="+d(h)),null!=(h=l.step)&&(b+="&step="+d(h)),null!=(h=l.fixed)&&(b+="&fixed="+d(h)),null!=(h=l.min)&&(b+="&min="+d(h)),y=[t("div",{$:"page,ctrl",class:"rd-ca rd-g rd-t","mx5-input":r+"\x1eupdateProp({key:'"+u(l.key)+"',use:'value'})","mx5-view":b})],x.push(...y)):l.type==S.color?(b="gallery/mx-color/index?clear="+d(l.clear)+"&color="+p(n,A[l.key],"\x1en."+l.key)+"&align=right",null!=(h=l.alpha)&&(b+="&alpha="+d(h)),y=[t("div",{$:"page,ctrl",class:"rd-ca","mx5-input":r+"\x1eupdateProp({key:'"+u(l.key)+"',use:'color'})","mx5-view":b})],x.push(...y)):l.type==S.image?(y=[t("div",{class:"rd-ca","mx5-change":r+"\x1eupdateProp({key:'"+u(l.key)+"',use:'src',refresh:'"+p(n,l.refresh,"\x1eh."+a+".k")+"',write:'"+p(n,l.write,"\x1eh."+a+".i")+"'})","mx5-view":"gallery/mx-picture/index?src="+d(A[l.key])})],x.push(...y)):l.type==S.dropdown&&(y=[t("div",{$:"ctrl",class:"rd-ca","mx5-change":r+"\x1eupdateProp({key:'"+u(l.key)+"',use:'value',refresh:'"+p(n,l.refresh,"\x1eh."+a+".k")+"'})","mx5-view":"gallery/mx-dropdown/index?selected="+d(A[l.key])+"&list="+p(n,l.items,"\x1eh."+a+".m")+"&textKey=text&valueKey=value"})],x.push(...y)),m="rd-b8",l.dockTop&&(m+=" rd-cc"),g=[t("li",{class:m},x)],f.push(...g)),c.push(...f)}return w.push(t("ul",l,c)),t(r,0,w)},init(){let e=this.render.bind(this);s.State.on("historyShift",e)},render(){this.digest({props:n.default,ctrl:s.State.get("stagePageCtrl"),page:s.State.get("stagePage")})},"updateProp<input,change>"(e){let{key:t,use:r,refresh:i,write:l}=e.params,a=s.State.get("stagePage");a[t]=e[r],l&&l(e[r],a,e),d.default.save("savePageChange",500),s.State.fire("stagePageChange"),i&&this.render()}})}),define("elements/designer",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","../designer/history","../util/transform","../util/converter","../util/bezier"],(e,t,r)=>{let i,l={class:"rd-f rd-w",style:"left:4px;top:-20px"},a={style:"position:absolute;pointer-events:none;overflow:visible"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),s=e("../gallery/mx-dragdrop/index"),d=e("../gallery/mx-pointer/cursor"),n=e("../designer/history"),p=e("../util/transform"),u=e("../util/converter"),h=e("../util/bezier");o.default.applyStyle("rd-g",'.rd-am{left:50%;top:50%;position:absolute}.rd-am:before{width:1px;height:5px;left:0;top:-2px}.rd-am:after,.rd-am:before{content:" ";position:absolute;background:red}.rd-am:after{width:5px;height:1px;left:-2px;top:0}.rd-an{border:1px dotted #ddd;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rd-ao{border:1px solid transparent}.rd-ap{border-color:#fa742b}.rd-aq{border-color:#999}.rd-ar{fill:#fff;stroke:#fa742b;pointer-events:all;stroke-width:1px;cursor:pointer;transition:stroke-width .25s}.rd-ar:hover{stroke-width:2px}.rd-as{fill:none;stroke:#fa742b;stroke-width:1px}.rd-at{border-right:3px solid #fa742b;right:-2px}.rd-au,.rd-av{border-bottom:3px solid #fa742b;bottom:-2px}.rd-av{border-right:3px solid #fa742b;right:-2px}.rd-aw{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAABvUExURUdwTP///9XV1R0dHf///3Nzc////////////////1ZWVq+vr/T09PX19QQEBP///////8XFxf///////////wYGBv///+jo6P///4aGhqioqMzMzP///2BgYP///////////zExMf///wAAAP///xLps0AAAAAjdFJOUwCxxOdixRDmzSDMv8/Z+tz5wWpXWPk3zALCv8KnyXZVMNuNPnv3CwAAAJ1JREFUKM/NkckOwyAMRFkDBMhC9qWr+//fWCIV1WlzrjoXS36yxmMT8hdqqKoUvRAjMtw22kvecem1GjTuK1vApmI+wQMBbQFy5li+QQRaX4AtRX+vbntAJeRl9HTTx4TiwESs61DXNUPmVQeujzVrQwh43TTxpeRBslVfMUhbiXKWyiAwvnIsMcdyJkfJYdpNvG/ltDm+bjP+8KFP8ggL+zQLGxwAAAAASUVORK5CYII=") 14 14,pointer;top:-3px;right:-3px;width:6px;height:6px;border-radius:50%;background:#fa742b}');const c={0:1,2:1,4:1,6:1,1:2,5:2,3:3,7:3};let f={};o.State.on("stageSelectElementsChange",()=>{for(let e in f){let t=o.Vframe.byId(e);t&&(t.invoke("checkStatus"),t.invoke("render"))}}),t.default=o.default.View.extend({tmpl:(e,t,r,o,s,d,n)=>{let p,u,h,c,f,g,m,x,y,b,w=[],{element:v,fullscreen:k,view:S,onlyMove:A,selected:_,count:E,i18n:M}=e;p="";let C=v.props,V=v.ctrl,P=v.type;p+=" ";let T=C.rotate%360;if(u="left:"+o(C.x)+"px;top:"+o(C.y)+"px;width:"+o(C.width)+"px;height:"+o(C.height)+"px;",T&&(u+="transform:rotate("+o(T)+"deg);"),h="rd-f rd-j",k||(h+=" rd-an"),w.push(t("div",{style:u,class:h}),t("div",{$:"element,onlyMove",class:"rd-j","mx5-view":o(S)+"?props="+n(d,C,"\x1ed")+"&onlyMove="+n(d,A,"\x1ee"),id:"entity_"+r})),c=[],!k){if(f=[],g=[t(0,1,o(V.icon))],f.push(t("i",l,g)),!C.locked){if(g=[],_){if(m=[],i?m.push(i):m.push(i=t("div",{_:"_",class:"rd-am"})),1==E&&V.modifier&&V.modifier.rotate){if((x=[]).push(t("div",{class:"rd-aw rd-f","mx5-mousedown":r+"\x1estartRotate()",title:o(M("pressDragRotateElement"))})),V.modifier){y=[],p="";let e=Math.min(20,C.height-3)-4;p+=" ";let i=Math.min(20,C.width)-4;p+=" ";let l=Math.max(Math.min(i,e)-2,0);p+=" ",i=Math.min(i,C.width-l-6),p+=" ",e=Math.min(e,C.height-l-6-3),p+=" ";let a=(C.height-e-l+3)/2;if(V.modifier.width&&(u="height:"+o(Math.max(e,0))+"px;top:"+o(a)+"px;cursor:",T<=22.5||T>337.5||T>157.5&&T<=202.5?u+="ew":T<=67.5||T>202.5&&T<=247.5?u+="nwse":T<=112.5||T>247.5&&T<=292.5?u+="ns":(T<=157.5||T>292.5&&T<=337.5)&&(u+="nesw"),u+="-resize",b=[t("div",{class:"rd-at rd-f",title:o(M("pressDragWidthElement")),"mx5-mousedown":r+"\x1estartResize({key:'rm'})",style:u})],y.push(...b)),V.modifier.height){let e=(C.width-i-l)/2;u="width:"+o(Math.max(i,0))+"px;left:"+o(e)+"px;cursor:",T<=22.5||T>337.5||T>157.5&&T<=202.5?u+="ns":T<=67.5||T>202.5&&T<=247.5?u+="nesw":T<=112.5||T>247.5&&T<=292.5?u+="ew":(T<=157.5||T>292.5&&T<=337.5)&&(u+="nwse"),u+="-resize",b=[t("div",{class:"rd-au rd-f",title:o(M("pressDragHeightElement")),"mx5-mousedown":r+"\x1estartResize({key:'mb'})",style:u})],y.push(...b)}V.modifier.width&&V.modifier.height&&(u="",0==l&&(u+="display:none;"),u+="width:"+o(l)+"px;height:"+o(l)+"px;cursor:",T<=22.5||T>337.5||T>157.5&&T<=202.5?u+="nwse":T<=67.5||T>202.5&&T<=247.5?u+="ns":T<=112.5||T>247.5&&T<=292.5?u+="nesw":(T<=157.5||T>292.5&&T<=337.5)&&(u+="ew"),u+="-resize",b=[t("div",{class:"rd-av rd-f",title:o(M("pressDragWidthHeightElement")),"mx5-mousedown":r+"\x1estartResize({key:'rb'})",style:u})],y.push(...b)),x.push(...y)}m.push(...x)}g.push(...m)}f.push(...g)}c.push(...f)}return u="left:"+o(C.x-4)+"px;top:"+o(C.y-4)+"px;width:"+o(C.width+8)+"px;height:"+o(C.height+8)+"px;",T&&(u+="transform:rotate("+o(T)+"deg);"),h="rd-f rd-j",k||(h+=" rd-ao"),_&&!k&&("bezier"!=P||E>1)&&(h+=" ",C.locked?h+="rd-aq":h+="rd-ap"),w.push(t("div",{id:"mask_"+o(v.id),style:u,class:h},c)),"bezier"==P&&_&&!k&&1==E&&(f=[t("path",{d:"M"+o(C.startX)+" "+o(C.startY)+" L"+o(C.ctrl1X)+" "+o(C.ctrl1Y)+" M"+o(C.ctrl2X)+" "+o(C.ctrl2Y)+" L"+o(C.endX)+" "+o(C.endY),class:"rd-as"},0,0,1),t("circle",{"mx5-mousedown":r+"\x1estartResizeSvg({key:'start'})",r:"4",cx:o(C.startX),cy:o(C.startY),class:"rd-ar"},0,0,1),t("circle",{"mx5-mousedown":r+"\x1edragSvgCtrl({key:'ctrl1'})",r:"4",cx:o(C.ctrl1X),cy:o(C.ctrl1Y),class:"rd-ar"},0,0,1),t("circle",{"mx5-mousedown":r+"\x1estartResizeSvg({key:'end'})",r:"4",cx:o(C.endX),cy:o(C.endY),class:"rd-ar"},0,0,1),t("circle",{"mx5-mousedown":r+"\x1edragSvgCtrl({key:'ctrl2'})",r:"4",cx:o(C.ctrl2X),cy:o(C.ctrl2Y),class:"rd-ar"},0,0,1)],c=[t("svg",a,f)],w.push(...c)),t(r,0,w)},mixins:[s.default],ctor(){f[this.id]=1,this.on("destroy",()=>{delete f[this.id]})},checkStatus(){let e=o.State.get("stageSelectElementsMap"),t=o.State.get("stageSelectElements").length,r=this.get().element.id;this.set({selected:o.has(e,r),count:t})},assign(e){return this.set(e),this.checkStatus(),!0},render(){this.digest()},update(e){this.digest({element:e,onlyMove:!1})},"startRotate<mousedown>"(e){e.stopPropagation();let t=this.get("element"),r=t.props;o.State.fire("stageToggleScroll",{show:1});let i=r.x+r.width/2,l=r.y+r.height/2,a=u.default.realToStageCoord({x:e.pageX,y:e.pageY}),s=r.rotate,p=Math.atan2(a.y-l,a.x-i)-s*Math.PI/180,h=!1;this.dragDrop(e,s=>{h||d.default.show(e.eventTarget),h=!0,a=u.default.realToStageCoord({x:s.pageX,y:s.pageY});let n=Math.atan2(a.y-l,a.x-i);n=180*(n-p)/Math.PI,r.rotate=(360+(0|n))%360,this.digest({element:t,onlyMove:!0}),o.State.fire("stageSelectElementPropsChange")},()=>{d.default.hide(),h&&n.default.save(),o.State.fire("stageToggleScroll")})},"startResize<mousedown>"(e){if(e.button)return;e.stopPropagation();let t=this,r=t.get("element"),{props:i,ctrl:l}=r;o.State.fire("stageToggleScroll",{show:1});let a=i.rotate||0,{key:s}=e.params;a=(a+360)%360,0==i.width&&(i.width=.01),0==i.height&&(i.height=.01);let u=i.width,h=i.height,f=i.x,g=i.y,m=0,x=0,y=Number.MAX_VALUE,b=Number.MAX_VALUE;for(let e of l.props)"width"==e.key?(o.default.has(e,"max")&&(y=e.max),o.default.has(e,"min")&&(m=e.min)):"height"==e.key&&(o.default.has(e,"max")&&(b=e.max),o.default.has(e,"min")&&(x=e.min));let w=p.default.rotateRect(i,a),v=p.default.getPointAndOpposite(w.point,s),{opposite:k,current:S}=v,A=k.index,_=k.point,E=S.point,M=_.x,C=_.y,V=Math.abs(E.x-M),P=Math.abs(E.y-C),T={x:f,y:g,rotate:a,width:u,height:h},R=e.pageX,z=e.pageY,I=!1;t.dragDrop(e,l=>{I||d.default.show(e.eventTarget);let s={x:1,y:1};I=!0;let n=V>P,u=1,h=l.pageX-R,f=l.pageY-z;0==A||7==A?n&&a>90&&a<270?h=-h:!n&&a>180&&a<360&&(f=-f):0!=A&&1!=A||(n&&a>45&&a<135?h=-h:!n&&a>90&&a<270&&(f=-f)),(u=n?(h+V)/V:(f+P)/P)<0&&(u=0);let g=c[A];1===g?s.x=s.y=u:2===g?s.y=u:3===g&&(s.x=u);let v=p.default.getNewRect(T,s,w,A),k=v.width,S=v.height;k<m?k=m:k>y&&(k=y),S<x?S=x:S>b&&(S=b),k==i.width&&S==i.height||(i.x=v.left,i.y=v.top,i.width=k,i.height=S,t.digest({element:r,onlyMove:!1}),o.State.fire("stageSelectElementPropsChange"))},()=>{I&&(n.default.save(),d.default.hide()),o.State.fire("stageToggleScroll")})},"dragSvgCtrl<mousedown>"(e){e.stopPropagation();let t=this.get("element"),r=t.props;o.State.fire("stageToggleScroll",{show:1});let i=!1,l=e.params.key,a=r[`${l}X`],s=r[`${l}Y`];this.dragDrop(e,n=>{i||d.default.show(e.eventTarget),i=!0;let p=n.pageX-e.pageX,u=n.pageY-e.pageY;r[`${l}X`]=a+p,r[`${l}Y`]=s+u,h.default(r),this.digest({element:t,onlyMove:!0}),o.State.fire("stageSelectElementPropsChange")},()=>{d.default.hide(),i&&n.default.save(),o.State.fire("stageToggleScroll")})},"startResizeSvg<mousedown>"(e){e.stopPropagation();let t=this.get("element"),r=t.props,i=e.params.key,l=r[`${i}X`],a=r[`${i}Y`];o.State.fire("stageToggleScroll",{show:1});let s=!1;this.dragDrop(e,n=>{s||d.default.show(e.eventTarget),s=!0;let p=n.pageX-e.pageX,u=n.pageY-e.pageY;r[`${i}X`]=l+p,r[`${i}Y`]=a+u,h.default(r),this.digest({element:t,onlyMove:!0}),o.State.fire("stageSelectElementPropsChange")},()=>{d.default.hide(),s&&n.default.save(),o.State.fire("stageToggleScroll")})}})}),define("elements/index",["magix","./line/designer","./bezier/designer","./rect/designer","./circle/designer","./text/designer","./image/designer","./repeat/designer","./page/designer","./chart-line/designer","./chart-meter/designer","./chart-bar/designer","./chart-pie/designer","./table/designer","../i18n/index"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("./line/designer"),a=e("./bezier/designer"),o=e("./rect/designer"),s=e("./circle/designer"),d=e("./text/designer"),n=e("./image/designer"),p=e("./repeat/designer"),u=e("./page/designer"),h=e("./chart-line/designer"),c=e("./chart-meter/designer"),f=e("./chart-bar/designer"),g=e("./chart-pie/designer"),m=e("./table/designer"),x=e("../i18n/index");let y=[l.default,a.default,o.default,s.default,d.default,n.default,p.default,h.default,c.default,f.default,g.default,m.default],b=i.toMap(y,"type"),w=[l.default,a.default,o.default,s.default,d.default,n.default,p.default,m.default,{spliter:!0},{icon:"&#xe629;",title:x.default("elementsChart"),subs:[h.default,c.default,f.default,g.default]}];t.default={elementList:()=>w,getPage:()=>u.default,byJSON(e){let t={},r=e=>{for(let l of e){let e=b[l.type];l.ctrl=e;for(let t of e.props)t.key&&null==l.props[t.key]&&(t.default,l.props[t.key]=t.default);if(l.id||(l.id=i.guid("e_")),t[l.id]=l,"layout"==l.role)for(let e of l.props.columns)r(e.elements)}};return r(e),{elements:e,map:t}}}}),define("elements/bezier/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/bezier/index"})}},{type:"bezier",role:"bezier",title:"elementsBezier",icon:"&#xe71b;",scales:["x","y","width","height","startX","startY","endX","endY","ctrl1X","ctrl1Y","ctrl2X","ctrl2Y"],moved:[{key:"x",use:"x"},{key:"y",use:"y"},{key:"ctrl1X",use:"x"},{key:"ctrl1Y",use:"y"},{key:"ctrl2X",use:"x"},{key:"ctrl2Y",use:"y"},{key:"startX",use:"x"},{key:"startY",use:"y"},{key:"endX",use:"x"},{key:"endY",use:"y"}],json:{startX:l.default.toShowValue,startY:l.default.toShowValue,endX:l.default.toShowValue,endY:l.default.toShowValue,ctrl1X:l.default.toShowValue,ctrl1Y:l.default.toShowValue,ctrl2X:l.default.toShowValue,ctrl2Y:l.default.toShowValue,alpha:1,linewidth:1,color:1},getProps:(e,t)=>({alpha:1,x:e,y:t,startX:e,startY:t,endX:e+300,endY:t+100,ctrl1X:e+50,ctrl1Y:t+50,ctrl2X:e+250,ctrl2Y:t+50,width:300,height:100,linewidth:1,color:"#000000",locked:!1}),props:[{tip:"propsBezierStartX",key:"startX",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierStartY",key:"startY",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierCtrl1X",key:"ctrl1X",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierCtrl1Y",key:"ctrl1Y",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierCtrl2X",key:"ctrl2X",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierCtrl2Y",key:"ctrl2Y",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierEndX",key:"endX",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{tip:"propsBezierEndY",key:"endY",type:i.default.number,read:l.default.toShowValue,write:l.default.toRealValue,bezier:1},{type:i.default.spliter},{tip:"propsWidth",key:"linewidth",type:i.default.number,min:0,max:20},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsColor",key:"color",type:i.default.color},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/bezier/index",["magix"],(e,t,r)=>{let i={style:"position:absolute;pointer-events:none;overflow:visible"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o=[],{props:s}=e;return a=[t("path",{d:"M"+l(s.startX)+","+l(s.startY)+" C"+l(s.ctrl1X)+" "+l(s.ctrl1Y)+" "+l(s.ctrl2X)+" "+l(s.ctrl2Y)+" "+l(s.endX)+","+l(s.endY),style:"fill:none;stroke:"+l(s.color)+";stroke-width:"+l(s.linewidth)+";opacity:"+l(s.alpha)},0,0,1)],o.push(t("svg",i,a)),t(r,0,o)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/chart-bar/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/chart-bar/index"})}},{type:"chart-bar",role:"chart-bar",title:"elementsChartBar",icon:"&#xe603;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default.toShowValue,y:l.default.toShowValue,width:l.default.toShowValue,height:l.default.toShowValue,alpha:1,title:1,rotate:1,background:1},getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBackground",type:i.default.color,key:"background",alpha:!0,clear:!0},{tip:"propsChartTitle",key:"title",type:i.default.textInput},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/chart-bar/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a=[],{props:o}=e;return l="position:absolute;left:"+i(o.x)+"px;top:"+i(o.y)+"px;height:"+i(o.height)+"px;opacity:"+i(o.alpha)+";width:"+i(o.width)+"px;transform:rotate("+i(o.rotate)+"deg);",o.background&&(l+="background:"+i(o.background)+";"),a.push(t("div",{id:"chart_"+r,style:l})),t(r,0,a)},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;let e=this.get("props");this.chartEntity||(this.chartEntity=echarts.init(i.node("chart_"+this.id)),this.on("destroy",()=>{this.chartEntity.dispose()}));let t=this.chartEntity;t.setOption({title:{text:e.title},tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"bar"},{data:[90,200,600,100,50],type:"bar"}]},!0),t.resize()}})}),define("elements/chart-line/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/chart-line/index"})}},{type:"chart-line",role:"chart-line",title:"elementsChartLine",icon:"&#xe64b;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default.toShowValue,y:l.default.toShowValue,width:l.default.toShowValue,height:l.default.toShowValue,alpha:1,title:1,rotate:1,background:1},getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBackground",type:i.default.color,key:"background",alpha:!0,clear:!0},{tip:"propsChartTitle",key:"title",type:i.default.textInput},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/chart-line/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a=[],{props:o}=e;return l="position:absolute;left:"+i(o.x)+"px;top:"+i(o.y)+"px;height:"+i(o.height)+"px;opacity:"+i(o.alpha)+";width:"+i(o.width)+"px;transform:rotate("+i(o.rotate)+"deg);",o.background&&(l+="background:"+i(o.background)+";"),a.push(t("div",{id:"chart_"+r,style:l})),t(r,0,a)},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;let e=this.get("props");this.chartEntity||(this.chartEntity=echarts.init(i.node("chart_"+this.id)),this.on("destroy",()=>{this.chartEntity.dispose()}));let t=this.chartEntity;t.setOption({title:{text:e.title},tooltip:{trigger:"axis"},xAxis:{data:[1,2,3,4,5]},yAxis:{type:"value"},series:[{data:[120,300,400,220,40],type:"line"},{data:[90,200,600,100,50],type:"line"}]},!0),t.resize()}})}),define("elements/chart-meter/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/chart-meter/index"})}},{type:"chart-meter",role:"chart-meter",title:"elementsChartMeter",icon:"&#xeb94;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default.toShowValue,y:l.default.toShowValue,width:l.default.toShowValue,height:l.default.toShowValue,alpha:1,rotate:1,background:1},getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,rotate:0,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBackground",type:i.default.color,key:"background",alpha:!0,clear:!0},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/chart-meter/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a=[],{props:o}=e;return l="position:absolute;left:"+i(o.x)+"px;top:"+i(o.y)+"px;height:"+i(o.height)+"px;opacity:"+i(o.alpha)+";width:"+i(o.width)+"px;transform:rotate("+i(o.rotate)+"deg);",o.background&&(l+="background:"+i(o.background)+";"),a.push(t("div",{id:"chart_"+r,style:l})),t(r,0,a)},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;this.get("props");this.chartEntity||(this.chartEntity=echarts.init(i.node("chart_"+this.id)),this.on("destroy",()=>{this.chartEntity.dispose()}));let e=this.chartEntity;e.setOption({series:[{type:"gauge",detail:{formatter:"{value}%"},data:[{value:50,name:"\u5b8c\u6210\u7387"}]}]},!0),e.resize()}})}),define("elements/chart-pie/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/chart-pie/index"})}},{type:"chart-pie",role:"chart-pie",title:"elementsChartPie",icon:"&#xe6d4;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],getProps:(e,t)=>({background:"",alpha:1,width:500,height:300,x:e,y:t,title:"",rotate:0,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBackground",type:i.default.color,key:"background",alpha:!0,clear:!0},{tip:"propsChartTitle",key:"title",type:i.default.textInput},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/chart-pie/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a=[],{props:o}=e;return l="position:absolute;left:"+i(o.x)+"px;top:"+i(o.y)+"px;height:"+i(o.height)+"px;opacity:"+i(o.alpha)+";width:"+i(o.width)+"px;transform:rotate("+i(o.rotate)+"deg);",o.background&&(l+="background:"+i(o.background)+";"),a.push(t("div",{id:"chart_"+r,style:l})),t(r,0,a)},assign(e){return this.set(e),!0},async render(){if(await this.digest(),this.get("onlyMove"))return;let e=this.get("props");this.chartEntity||(this.chartEntity=echarts.init(i.node("chart_"+this.id)),this.on("destroy",()=>{this.chartEntity.dispose()}));let t=this.chartEntity;t.setOption({title:{text:e.title,x:"center"},series:[{data:[{value:120,name:"pie1"},{vaue:300,name:"pie2"},{value:400,name:"pie3"},{value:220,name:"pie4"},{value:40,name:"pie5"}],type:"pie",name:"test"}]},!0),t.resize()}})}),define("elements/circle/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../i18n/index"),a=e("../../util/converter"),o=e("../designer");t.default=o.default.extend({ctor(){this.set({view:"elements/circle/index"})}},{type:"circle",role:"circle",title:"elementsCircle",icon:"&#xe654;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:a.default.toShowValue,y:a.default.toShowValue,width:a.default.toShowValue,height:a.default.toShowValue,alpha:1,title:1,rotate:1,fillcolor:1,borderwidth:1,bordertype:1,bordercolor:1},getProps:(e,t)=>({fillcolor:"",alpha:1,width:150,height:150,x:e,y:t,rotate:0,borderwidth:1,bordertype:"solid",bordercolor:"#000000",locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBorderWidth",key:"borderwidth",type:i.default.number,min:0},{tip:"propsBorderType",key:"bordertype",type:i.default.dropdown,items:[{text:l.default("propsBorderTypeSolid"),value:"solid"},{text:l.default("propsBorderTypeDotted"),value:"dotted"},{text:l.default("propsBorderTypeDashed"),value:"dashed"}]},{tip:"propsBordercolor",key:"bordercolor",type:i.default.color},{tip:"propsFillcolor",key:"fillcolor",clear:!0,alpha:!0,type:i.default.color},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/circle/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a=[],{props:o}=e;return l="position:absolute;border-radius:50%;left:"+i(o.x)+"px;top:"+i(o.y)+"px;",o.borderwidth&&(l+="border:"+i(o.borderwidth)+"px "+i(o.bordertype)+" "+i(o.bordercolor)+";"),o.fillcolor&&(l+="background:"+i(o.fillcolor)+";"),l+="height:"+i(o.height)+"px;opacity:"+i(o.alpha)+";width:"+i(o.width)+"px;transform:rotate("+i(o.rotate)+"deg)",a.push(t("div",{style:l})),t(r,0,a)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/image/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/image/index"})}},{type:"image",role:"image",title:"elementsImage",icon:"&#xe650;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default.toShowValue,y:l.default.toShowValue,width:l.default.toShowValue,height:l.default.toShowValue,alpha:1,image:1,rotate:1},getProps:(e,t)=>({height:100,alpha:1,x:e,y:t,rotate:0,width:200,image:"",locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsImage",key:"image",refresh:!0,type:i.default.image,write:(e,t,r)=>(e||(r.width=200,r.height=100),t.width=r.width,t.height=r.height,e)},{tip:"propsImageReset",type:i.default.imageReset,key:"image",ifShow:e=>e.image},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/image/index",["magix"],(e,t,r)=>{let i={style:"display:flex;align-items:center;justify-content:center;height:100%"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s,d=[],{props:n,i18n:p}=e;return a=[],n.image?(o=[t("img",{style:"width:100%;height:100%",src:l(n.image)},0,0,1)],a.push(...o)):(s=[t(0,0,l(p("elementsImageSelectImage")))],o=[t("div",i,s)],a.push(...o)),d.push(t("div",{style:"position:absolute;left:"+l(n.x)+"px;top:"+l(n.y)+"px;height:"+l(n.height)+"px;opacity:"+l(n.alpha)+";width:"+l(n.width)+"px;transform:rotate("+l(n.rotate)+"deg)"},a)),t(r,0,d)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/line/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../i18n/index"),a=e("../../util/converter"),o=e("../designer");t.default=o.default.extend({ctor(){this.set({view:"elements/line/index"})}},{type:"line",role:"line",title:"elementsLine",icon:"&#xe601;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:a.default.toShowValue,y:a.default.toShowValue,width:a.default.toShowValue,height:a.default.toShowValue,alpha:1,title:1,rotate:1,linetype:1,color:1},getProps:(e,t)=>({height:1,alpha:1,x:e,y:t,rotate:0,width:200,linetype:"solid",color:"#000000",locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsLong",type:i.default.number,key:"width",min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsHeight",key:"height",type:i.default.number,min:0,max:100,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsLineType",key:"linetype",type:i.default.dropdown,items:[{text:l.default("propsBorderTypeSolid"),value:"solid"},{text:l.default("propsBorderTypeDotted"),value:"dotted"},{text:l.default("propsBorderTypeDashed"),value:"dashed"}]},{tip:"propsColor",key:"color",type:i.default.color},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/line/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l=[],{props:a}=e;return l.push(t("div",{style:"position:absolute;left:"+i(a.x)+"px;top:"+i(a.y)+"px;border-top:"+i(a.height)+"px "+i(a.linetype)+" "+i(a.color)+";opacity:"+i(a.alpha)+";width:"+i(a.width)+"px;transform:rotate("+i(a.rotate)+"deg)"})),t(r,0,l)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/page/designer",["../../designer/props","../../i18n/index","../../designer/const"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../i18n/index"),a=e("../../designer/const");t.default={title:"elementsPage",getProps:()=>({width:a.default.pageWidth,height:a.default.pageHeight,background:"#ffffff",backgroundImage:"",backgroundRepeat:"full",backgroundWidth:0,backgroundHeight:0,scaleType:"auto",hor:0,ver:0}),props:[{tip:"propsWidth",key:"width",type:i.default.number,min:0},{tip:"propsHeight",key:"height",type:i.default.number,min:0},{tip:"propsPageScale",key:"scaleType",type:i.default.dropdown,items:[{text:l.default("propsScaleAuto"),value:"auto"},{text:l.default("propsScaleFull"),value:"full"}]},{type:i.default.spliter},{tip:"propsBackground",key:"background",type:i.default.color},{tip:"propsBackgroundImage",key:"backgroundImage",type:i.default.image,refresh:!0,write:(e,t,r)=>(t.backgroundWidth=r.width,t.backgroundHeight=r.height,e)},{tip:"propsBackgroundRepeat",key:"backgroundRepeat",type:i.default.dropdown,items:[{text:l.default("propsFull"),value:"full"},{text:l.default("propsNoRepeat"),value:"no-repeat"},{text:l.default("propsRepeatX"),value:"repeat-x"},{text:l.default("propsRepeatY"),value:"repeat-y"},{text:l.default("propsRepeat"),value:"repeat"}],refresh:!0,ifShow:e=>e.backgroundImage},{tip:"propsImageWidth",key:"backgroundWidth",type:i.default.number,min:0,ifShow(e){let t=e.backgroundImage,r=e.backgroundRepeat;return t&&"full"!==r}},{tip:"propsImageHeight",key:"backgroundHeight",type:i.default.number,min:0,ifShow(e){let t=e.backgroundImage,r=e.backgroundRepeat;return t&&"full"!=r}},{tip:"propsOffsetHor",key:"hor",type:i.default.number,ifShow:e=>e.backgroundImage&&"full"!=e.backgroundRepeat},{tip:"propsOffsetVer",key:"ver",type:i.default.number,ifShow:e=>e.backgroundImage&&"full"!=e.backgroundRepeat}]}}),define("elements/rect/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../i18n/index"),a=e("../../util/converter"),o=e("../designer");t.default=o.default.extend({ctor(){this.set({view:"elements/rect/index"})}},{type:"rect",role:"rect",title:"elementsRect",icon:"&#xe6c7;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:a.default.toShowValue,y:a.default.toShowValue,width:a.default.toShowValue,height:a.default.toShowValue,alpha:1,rotate:1,fillcolor:1,borderwidth:1,bordertype:1,bordercolor:1,radius:1},getProps:(e,t)=>({fillcolor:"",height:100,alpha:1,x:e,y:t,rotate:0,width:200,borderwidth:1,bordertype:"solid",bordercolor:"#000000",radius:0,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBorderWidth",key:"borderwidth",type:i.default.number,min:0},{tip:"propsBorderType",key:"bordertype",type:i.default.dropdown,items:[{text:l.default("propsBorderTypeSolid"),value:"solid"},{text:l.default("propsBorderTypeDotted"),value:"dotted"},{text:l.default("propsBorderTypeDashed"),value:"dashed"}]},{tip:"propsBordercolor",key:"bordercolor",type:i.default.color},{tip:"propsFillcolor",key:"fillcolor",clear:!0,alpha:!0,type:i.default.color},{tip:"propsBorderRadius",key:"radius",type:i.default.number,min:0},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/rect/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a=[],{props:o}=e;return l="position:absolute;left:"+i(o.x)+"px;top:"+i(o.y)+"px;",o.borderwidth&&(l+="border:"+i(o.borderwidth)+"px "+i(o.bordertype)+" "+i(o.bordercolor)+";"),o.fillcolor&&(l+="background:"+i(o.fillcolor)+";"),l+="height:"+i(o.height)+"px;opacity:"+i(o.alpha)+";width:"+i(o.width)+"px;transform:rotate("+i(o.rotate)+"deg);",o.radius&&(l+="border-radius:"+i(o.radius)+"px;"),a.push(t("div",{style:l})),t(r,0,a)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/repeat/designer",["../../designer/props","../../i18n/index","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../i18n/index"),a=e("../../util/converter"),o=e("../designer");t.default=o.default.extend({ctor(){this.set({view:"elements/repeat/index"})}},{type:"repeat",role:"repeat",title:"elementsRepeat",icon:"&#xe78f;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height","imageWidth","imageHeight"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:a.default.toShowValue,y:a.default.toShowValue,width:a.default.toShowValue,height:a.default.toShowValue,alpha:1,rotate:1,background:1,radius:1,image:1,repeat:1,imageWidth:1,imageHeight:1,hor:1,ver:1},getProps:(e,t)=>({height:100,alpha:1,x:e,y:t,rotate:0,width:200,radius:0,image:"",repeat:"repeat",imageWidth:0,imageHeight:0,hor:0,ver:0,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsHeight",key:"height",type:i.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsBorderRadius",key:"radius",type:i.default.number,min:0,default:0},{tip:"propsImage",key:"image",type:i.default.image,refresh:!0,write:(e,t,r)=>(t.imageWidth=a.default.toRealValue(r.width),t.imageHeight=a.default.toRealValue(r.height),e)},{tip:"propsImageWidth",key:"imageWidth",type:i.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue,ifShow:e=>e.image},{tip:"propsImageHeight",key:"imageHeight",type:i.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue,ifShow:e=>e.image},{tip:"propsOffsetHor",key:"hor",type:i.default.number,ifShow:e=>e.image},{tip:"propsOffsetVer",key:"ver",type:i.default.number,ifShow:e=>e.image},{tip:"propsBackgroundRepeat",key:"repeat",type:i.default.dropdown,ifShow:e=>e.image,items:[{text:l.default("propsRepeat"),value:"repeat"},{text:l.default("propsRepeatX"),value:"repeat-x"},{text:l.default("propsRepeatY"),value:"repeat-y"}]},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0,default:!1}]})}),define("elements/repeat/index",["magix"],(e,t,r)=>{let i={style:"display:flex;align-items:center;justify-content:center;height:100%"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s,d,n=[],{props:p,i18n:u}=e;return o=[],p.image||(d=[t(0,0,l(u("elementsRepeatSelectImage")))],s=[t("div",i,d)],o.push(...s)),a="position:absolute;left:"+l(p.x)+"px;top:"+l(p.y)+"px;height:"+l(p.height)+"px;opacity:"+l(p.alpha)+";width:"+l(p.width)+"px;transform:rotate("+l(p.rotate)+"deg);",p.radius&&(a+="border-radius:"+l(p.radius)+"px;"),p.image&&(a+="background-image:url("+l(p.image)+");background-size:"+l(p.imageWidth)+"px "+l(p.imageHeight)+"px;background-repeat:"+l(p.repeat)+";background-position:"+l(p.hor)+"% "+l(p.ver)+"%"),n.push(t("div",{style:a},o)),t(r,0,n)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/table/designer",["../../designer/props","../../util/converter","../designer"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../designer/props"),l=e("../../util/converter"),a=e("../designer");t.default=a.default.extend({ctor(){this.set({view:"elements/table/index"})}},{type:"table",role:"table",title:"elementsTable",icon:"&#xe660;",modifier:{width:1,rotate:1},scales:["x","y","width","height"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:l.default.toShowValue,y:l.default.toShowValue,width:l.default.toShowValue,height:l.default.toShowValue,alpha:1,rotate:1},getProps:(e,t)=>({height:51,alpha:1,x:e,y:t,rotate:0,width:200,locked:!1}),props:[{tip:"propsX",type:i.default.number,key:"x",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsY",type:i.default.number,key:"y",read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsWidth",type:i.default.number,key:"width",min:0,read:l.default.toShowValue,write:l.default.toRealValue},{tip:"propsRotate",type:i.default.number,key:"rotate",min:-360,max:360},{type:i.default.spliter},{tip:"propsAlpha",key:"alpha",type:i.default.number,step:.1,fixed:1,min:0,max:1},{type:i.default.spliter},{tip:"propsLocked",key:"locked",type:i.default.boolean,refresh:!0,free:!0}]})}),define("elements/table/index",["magix"],(e,t,r)=>{let i,l={style:"width:33%"},a={style:"height:25px"},o={class:"rd-I"};Object.defineProperty(t,"__esModule",{value:!0});const s=e("magix");t.default=s.default.View.extend({tmpl:(e,t,r,s)=>{let d,n,p,u,h,c,f=[],{props:g}=e;return i?d=[i]:(p=u?[u]:[u=t("col",l,0,0,1)],u?p.push(u):p.push(u=t("col",l,0,0,1)),p.push(t("col",{style:"width:34%"},0,0,1)),n=[t("colgroup",0,p)],c=[t(0,0,"1")],h=[t("th",o,c)],c=[t(0,0,"2")],h.push(t("th",o,c)),c=[t(0,0,"3")],h.push(t("th",o,c)),p=[t("tr",a,h)],n.push(t("thead",0,p)),c=[t(0,0,"aadfadfasdfasdfasdf")],h=[t("td",o,c)],c=[t(0,0,"b")],h.push(t("td",o,c),t("td",{class:"rd-I",contenteditable:"true"})),p=[t("tr",a,h)],n.push(t("tbody",0,p)),d=[i=t("table",{_:"_",class:"rd-G rd-H"},n)]),f.push(t("div",{style:"position:absolute;left:"+s(g.x)+"px;top:"+s(g.y)+"px;opacity:"+s(g.alpha)+";width:"+s(g.width)+"px;transform:rotate("+s(g.rotate)+"deg)"},d)),t(r,0,f)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("elements/text/designer",["../designer","../../designer/props","../../util/converter"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../designer"),l=e("../../designer/props"),a=e("../../util/converter");t.default=i.default.extend({ctor(){this.set({view:"elements/text/index"})}},{type:"text",role:"text",title:"elementsText",icon:"&#xe6bc;",modifier:{width:1,height:1,rotate:1},scales:["x","y","width","height","fontsize","ls"],moved:[{key:"x",use:"x"},{key:"y",use:"y"}],json:{x:a.default.toShowValue,y:a.default.toShowValue,width:a.default.toShowValue,height:a.default.toShowValue,alpha:1,text:1,rotate:1,ls:1,background:1,forecolor:1,fontsize:1,style:1,align:1},getProps:(e,t)=>({background:"",height:25,alpha:1,text:"",ls:0,x:e,y:t,rotate:0,width:200,forecolor:"#000000",fontsize:14,locked:!1,style:{bold:!1,underline:!1,italic:!1},align:{h:"center",v:"center"}}),props:[{tip:"propsX",type:l.default.number,key:"x",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsY",type:l.default.number,key:"y",read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsWidth",type:l.default.number,key:"width",min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsHeight",key:"height",type:l.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsRotate",type:l.default.number,key:"rotate",min:-360,max:360},{type:l.default.spliter},{tip:"propsFontSize",key:"fontsize",type:l.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsAlpha",key:"alpha",type:l.default.number,step:.1,fixed:1,min:0,max:1},{tip:"propsLetterSpacing",key:"ls",type:l.default.number,min:0,read:a.default.toShowValue,write:a.default.toRealValue},{tip:"propsBackground",key:"background",clear:!0,alpha:!0,type:l.default.color},{tip:"propsForecolor",key:"forecolor",type:l.default.color},{tip:"propsFontStyle",key:"style",type:l.default.fontStyle},{tip:"propsFontAlign",key:"align",type:l.default.fontAlign},{tip:"propsTextContent",key:"text",type:l.default.textArea,dockTop:!0},{type:l.default.spliter},{tip:"propsLocked",key:"locked",type:l.default.boolean,refresh:!0,free:!0}]})}),define("elements/text/index",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a,o,s=[],{props:d,i18n:n}=e;return o="",d.text?o+=" "+i(d.text)+" ":o+=" "+i(n("elementsTextContent"))+" ",a=[t(0,0,o)],l="position:absolute;left:"+i(d.x)+"px;top:"+i(d.y)+"px;display:flex;color:"+i(d.forecolor)+";",d.background&&(l+="background:"+i(d.background)+";"),l+="font-size:"+i(d.fontsize)+"px;height:"+i(d.height)+"px;letter-spacing:"+i(d.ls)+"px;opacity:"+i(d.alpha)+";",d.style.bold&&(l+="font-weight:bold;"),d.style.italic&&(l+="font-style:italic;"),d.style.underline&&(l+="text-decoration:underline;"),l+="align-items:"+i(d.align.v)+";justify-content:"+i(d.align.h)+";overflow:hidden;width:"+i(d.width)+"px;transform:rotate("+i(d.rotate)+"deg)",s.push(t("div",{style:l},a)),t(r,0,s)},assign(e){return this.set(e),!0},render(){this.digest()}})}),define("designer/axis",["magix","../gallery/mx-dragdrop/index","../gallery/mx-pointer/cursor","./history"],(e,t,r)=>{let i,l={class:"rd-X"},a={class:"rd-V"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix"),s=e("../gallery/mx-dragdrop/index"),d=e("../gallery/mx-pointer/cursor"),n=e("./history");o.default.applyStyle("rd-a",".rd-J{height:20px;border-bottom:1px solid #ccc;overflow:hidden;width:100%;background:#fff;z-index:200;position:relative}.rd-K{top:0;width:1px}.rd-K,.rd-L{position:absolute;background:#fa742b;z-index:200;display:none;pointer-events:none}.rd-L{left:0;height:1px}.rd-M{float:left;overflow:hidden;z-index:200;position:relative}.rd-N,.rd-M{width:20px;border-right:1px solid #ccc;background:#fff}.rd-N{position:absolute;left:0;top:0;height:20px;border-bottom:1px solid #ccc;z-index:201}.rd-O{left:5px;top:22px}.rd-O,.rd-P{cursor:default;position:absolute;font-size:10px}.rd-P{top:2px;left:24px}.rd-Q,.rd-R{position:relative;z-index:100}.rd-Q{top:20px}.rd-R{left:20px}.rd-S{width:4px;border-left:1px solid #fa742b}.rd-S,.rd-T{position:absolute;pointer-events:none}.rd-T{height:1px;background:#fa742b}.rd-U{position:absolute;left:-15px;top:4px;font-size:10px;color:#666;cursor:pointer;pointer-events:all}.rd-V{top:2px;cursor:default}.rd-V,.rd-W{position:absolute;left:4px;font-size:10px;color:#666}.rd-W{top:-15px;cursor:pointer;pointer-events:all}.rd-X{position:absolute;left:4px;top:2px;font-size:10px;color:#666;cursor:default}.rd-Y{width:25px;top:-1px;height:3px;left:30px;cursor:ns-resize}.rd-Z,.rd-Y{position:absolute;overflow:hidden;background:#fa742b;pointer-events:all}.rd-Z{width:3px;left:-2px;height:25px;top:20px;cursor:ew-resize}");let p={.5:{space:200,step:10},1:{space:100,step:10},1.5:{space:80,step:10},2:{space:60,step:10},2.5:{space:48,step:8},3:{space:40,step:8},3.5:{space:32,step:8},4:{space:24,step:8},4.5:{space:16,step:8},5:{space:16,step:8}};t.default=o.default.View.extend({tmpl:(e,t,r,o,s,d,n,p)=>{let u,h,c,f,g,m,x,y,b,w,v=[],{sTop:k,yHelpers:S,yStart:A,scale:_,vWidth:E,i18n:M,sLeft:C,xHelpers:V,xStart:P,vHeight:T,width:R,step:z,space:I,hbar:L,barColor:j,bar:Y,xEnd:X,height:B,yEnd:O}=e;u=[];for(let e=S.length,i=0;i<e;i+=1){let e=S[i];w=Math.abs(A)+e.mm*_+20,f=[t(0,0,"\ue600")],c=[t("i",{class:"rd-W rd-w",title:o(M("axisDeleteLine")),"mx5-click":r+"\x1edeleteHelpLine({type:'y',id:'"+p(e.id)+"'})"},f)],f=[t(0,0,o(e.mm))],c.push(t("span",l,f),t("span",{class:"rd-Y","mx5-mousedown":r+"\x1edragHelpLine({type:'y',id:'"+p(e.id)+"',c:"+o(w)+"})",title:o(M("axisMoveLine"))})),h=[t("div",{class:"rd-T",style:"width:"+o(E)+"px;top:"+o(w)+"px"},c)],u.push(...h)}v.push(t("div",{class:"rd-R",style:"top:-"+o(k)+"px",id:r+"_y_help","mx5-contextmenu":r+"\x1eprevent()"},u)),u=[];for(let e=V.length,i=0;i<e;i+=1){let e=V[i];w=Math.abs(P)+e.mm*_,f=[t(0,0,"\ue600")],c=[t("i",{class:"rd-U rd-w",title:o(M("axisDeleteLine")),"mx5-click":r+"\x1edeleteHelpLine({type:'x',id:'"+p(e.id)+"'})"},f)],f=[t(0,0,o(e.mm))],c.push(t("span",a,f),t("span",{class:"rd-Z","mx5-mousedown":r+"\x1edragHelpLine({type:'x',id:'"+p(e.id)+"',c:"+o(w)+"})",title:o(M("axisMoveLine"))})),h=[t("div",{class:"rd-S",style:"height:"+o(T)+"px;left:"+o(w)+"px"},c)],u.push(...h)}v.push(t("div",{class:"rd-Q",style:"left:-"+o(C)+"px",id:r+"_x_help","mx5-contextmenu":r+"\x1eprevent()"},u)),f=[];for(let e=0;e<P;e+=z)g=[],e&&(m=[],(b=e/_)%I==0?(x=[t("rect",{width:"1",height:o(L),x:o(P-e),y:o(20-L-1),style:"fill:"+o(j)},0,0,1)],y=[t(0,0,o(-b))],x.push(t("text",{x:o(P-e+2),y:"14",style:"font-size:10px;fill:#999"},y)),m.push(...x)):(x=[t("rect",{width:"1",height:o(Y),x:o(P-e),y:o(20-Y-1),style:"fill:"+o(j)},0,0,1)],m.push(...x)),g.push(...m)),f.push(...g);for(let e=0;e<X;e+=z)g=[],(b=e/_)%I==0?(m=[t("rect",{width:"1",height:o(L),x:o(P+e),y:o(20-L-1),style:"fill:"+o(j)},0,0,1)],x=[t(0,0,o(b))],m.push(t("text",{x:o(P+e+2),y:"14",style:"font-size:10px;fill:#999"},x)),g.push(...m)):(m=[t("rect",{width:"1",height:o(Y),x:o(P+e),y:o(20-Y-1),style:"fill:"+o(j)},0,0,1)],g.push(...m)),f.push(...g);c=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+o(R)+" 19",style:"cursor:default;position:absolute;width:"+o(R)+"px;height:19px"},f)],h=[t("div",{style:"width:"+o(R)+"px;height:100%"},c)],u=[t("div",{class:"rd-J",id:r+"_x"},h)],c=[t(0,0,"-")],h=[t("span",{_:"_",class:"rd-O",id:r+"_x_tip"},c)],u.push(t("div",{class:"rd-K",id:r+"_x_line",style:"height:"+o(T+20)+"px"},h)),v.push(t("div",{"mx5-mousemove":r+"\x1eshowXLine()","mx5-mouseout":r+"\x1ehideXLine()","mx5-click":r+"\x1eaddXHelpLine()"},u)),f=[];for(let e=0;e<A;e+=z)g=[],e&&(m=[],(b=e/_)%I==0?(x=[t("rect",{width:o(L),height:"1",x:o(20-L),y:o(A-e),style:"fill:"+o(j)},0,0,1)],y=[t(0,0,o(-b))],x.push(t("text",{x:"14",y:o(A-e+2),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+o(A-e)+")"},y)),m.push(...x)):(x=[t("rect",{width:o(Y),height:"1",x:o(20-Y),y:o(A-e),style:"fill:"+o(j)},0,0,1)],m.push(...x)),g.push(...m)),f.push(...g);for(let e=0;e<O;e+=z)g=[],(b=e/_)%I==0?(m=[t("rect",{width:o(L),height:"1",x:o(20-L),y:o(A+e),style:"fill:"+o(j)},0,0,1)],x=[t(0,0,o(b))],m.push(t("text",{x:"14",y:o(A+e),style:"font-size:10px;fill:#999",transform:"rotate(-90,13,"+o(A+e-2)+")"},x)),g.push(...m)):(m=[t("rect",{width:o(Y),height:"1",x:o(20-Y),y:o(A+e),style:"fill:"+o(j)},0,0,1)],g.push(...m)),f.push(...g);return c=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 "+o(B),style:"cursor:default;position:absolute;width:19px;height:"+o(B)+"px"},f)],h=[t("div",{style:"height:"+o(B)+"px"},c)],u=[t("div",{class:"rd-M",style:"height:"+o(T)+"px",id:r+"_y"},h)],c=[t(0,0,"-")],h=[t("span",{_:"a",class:"rd-P",id:r+"_y_tip"},c)],u.push(t("div",{class:"rd-L",id:r+"_y_line",style:"width:"+o(E+20)+"px"},h)),v.push(t("div",{"mx5-mousemove":r+"\x1eshowYLine()","mx5-mouseout":r+"\x1ehideYLine()","mx5-click":r+"\x1eaddYHelpLine()"},u)),i?v.push(i):v.push(i=t("div",{_:"b",class:"rd-N"})),t(r,0,v)},mixins:[s.default],init(e){let t=o.node(e.scroll);t.addEventListener("scroll",()=>{this.syncScroll()},{passive:!0}),this.scrollNode=t,this.set({bar:4,hbar:12,barColor:"#aaa"});let r=this.throttle(this.render);o.State.on("historyShift",r),o.State.on("stageScaleChange",r),o.State.on("stagePageChange",r),o.State.on("stageElementsChange",r),o.State.on("stageSelectElementPropsChange",r),o.State.on("stageSelectElementPropsUpdate",r)},async rerender(){if(this.canRender){let e=this.scrollNode,t=o.State.get("stageScale"),r=Math.max(e.scrollWidth,window.innerWidth)+500,i=Math.max(e.scrollHeight,window.innerHeight)+300,l=0,a=0,s=20,d=0,n=0,u=10,h=10,c=o.node("stage_canvas"),f=o.node("stage_outer"),g=c.getBoundingClientRect(),m=f.getBoundingClientRect();a=r-(l=Math.round(g.left-m.left)+s),n=i-(d=Math.round(g.top-m.top)),u=e.offsetHeight,h=e.offsetWidth;let x=p[t],y=o.default.mark(this,"renderMaker");await this.digest({sTop:e.scrollTop,sLeft:e.scrollLeft,width:r,scale:t,space:x.space,step:x.step,height:i,xStart:l,xEnd:a,yStart:d,vHeight:u,vWidth:h,yEnd:n}),y()&&(this.xAxis=o.node(this.id+"_x"),this.yAxis=o.node(this.id+"_y"),this.xLine=o.node(this.id+"_x_line"),this.yLine=o.node(this.id+"_y_line"),this.xLineTip=o.node(this.id+"_x_tip"),this.yLineTip=o.node(this.id+"_y_tip"),this.xAxisHelp=o.node(this.id+"_x_help"),this.yAxisHelp=o.node(this.id+"_y_help"))}},syncScroll(){let e=this.xAxis,t=this.yAxis,r=this.yAxisHelp,i=this.xAxisHelp,l=this.scrollNode,a=l.scrollTop,o=l.scrollLeft;e&&(e.scrollLeft=o),t&&(t.scrollTop=a),i&&(i.style.left=-o+"px"),r&&(r.style.top=-a+"px"),this.set({sLeft:o,sTop:a})},render(){this.set({xHelpers:o.State.get("stageXHelpLines"),yHelpers:o.State.get("stageYHelpLines")});let e=()=>{o.node("stage_canvas")?(this.canRender=1,this.rerender()):setTimeout(e,30)};setTimeout(e,0)},"showXLine<mousemove>"(e){let t=this.xAxis,r=e.pageX,i=this.get("xStart"),l=this.xLine.style;l.display="block",l.left=r+"px";let a=r-i+t.scrollLeft,o=this.get("scale");this.xLineTip.innerHTML=(a/o).toFixed(0)},"hideXLine<mouseout>"(e){o.default.inside(e.relatedTarget,e.eventTarget)||(this.xLine.style.display="none")},"showYLine<mousemove>"(e){let t=this.root.getBoundingClientRect(),r=e.pageY-t.top,i=this.get("yStart"),l=this.yAxis,a=this.yLine.style;a.display="block",a.top=r+"px";let o=r-i-20+l.scrollTop,s=this.get("scale");this.yLineTip.innerHTML=(o/s).toFixed(0)},"hideYLine<mouseout>"(e){o.default.inside(e.relatedTarget,e.eventTarget)||(this.yLine.style.display="none")},"addXHelpLine<click>"(e){let t=(e.pageX-this.get("xStart")+this.xAxis.scrollLeft)/this.get("scale")|0,r=this.get("xHelpers");r.push({mm:t,id:o.default.guid("x_")}),this.digest({xHelpers:r}),n.default.save()},"addYHelpLine<click>"(e){let t=this.root.getBoundingClientRect(),r=(e.pageY-t.top-this.get("yStart")-20+this.yAxis.scrollTop)/this.get("scale")|0,i=this.get("yHelpers");i.push({mm:r,id:o.default.guid("x_")}),this.digest({yHelpers:i}),n.default.save()},"deleteHelpLine<click>"(e){let{type:t,id:r}=e.params,i=t+"Helpers",l=this.get(i);for(let e=l.length;e--;){if(l[e].id==r){l.splice(e,1);break}}this.digest({[i]:l}),n.default.save()},"dragHelpLine<mousedown>"(e){if(e.target!=e.eventTarget)return;let t,{type:r,id:i,c:l}=e.params,a=r+"Helpers",o=this.get(a);for(let e of o)if(e.id==i){t=e;break}if(t){let i=this.get(r+"Start"),s=0;this.dragDrop(e,n=>{let p;s||(s=1,d.default.show(e.eventTarget)),p="x"==r?n.pageX-e.pageX+l:n.pageY-e.pageY+l-20,t.mm=(p-i)/this.get("scale")|0,this.digest({[a]:o})},()=>{s&&(d.default.hide(),n.default.save())})}},"prevent<contextmenu>"(e){e.preventDefault()},"$win<resize>"(){setTimeout(()=>{this.rerender()},4)}})}),define("designer/const",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={historyMaxCount:50,stageScale:1,pageWidth:1280,pageHeight:800}}),define("designer/content",["magix"],(e,t,r)=>{let i={class:"rd-o"},l={class:"rd-p",style:"word-break:break-all"},a={value:"value"};Object.defineProperty(t,"__esModule",{value:!0});const o=e("magix");o.default.applyStyle("rd-b",".rd-0{width:100%;height:500px}"),t.default=o.default.View.extend({tmpl:(e,t,r,o)=>{let s,d,n=[],{i18n:p,body:u}=e;return d=[t(0,0,o(p("saveContentTitle")))],s=[t("h5",0,d)],n.push(t("div",i,s)),s=[t("textarea",{class:"rd-0 rd-u",value:o(u)},0,a)],n.push(t("div",l,s)),t(r,0,n)},render(){let e=o.State.get("stageElements"),t=o.State.get("stagePage"),r=[];for(let t of e){let e,i={type:t.type,props:{}},l=t.ctrl.json;if(l)for(let r in t.props)1===(e=l[r])?i.props[r]=t.props[r]:e&&(i.props[r]=e(t.props[r]));else i.props=t.props;r.push(i)}let i={page:t,elements:r};this.digest({body:JSON.stringify(i,null,4)})}})}),define("designer/contextmenu",["magix","../i18n/index"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("../i18n/index");let a={spliter:!0},o={id:0,text:"menuSelectAll",short:" (Ctrl+A)"},s={id:1,text:"menuCopy",short:" (Ctrl+C)"},d={id:14,text:"menuCut",short:" (Ctrl+X)"},n={id:2,text:"menuPaste",short:" (Ctrl+V)"},p={id:5,text:"menuMoveUp"},u={id:6,text:"menuMoveDown"},h={id:3,text:"menuToTop"},c={id:4,text:"menuToBottom"},f={id:7,text:"menuDelete",short:" (Delete)"},g={},m=e=>t=>{e.menuCacheId||(e.menuCacheId=i.default.guid("_m"));let r=t+e.menuCacheId;if(!g[r]){let t=[];for(let r of e)r.spliter?t.push(r):t.push({id:r.id,text:l.default(r.text)+(r.short||"")});g[r]=t}return g[r]};t.default={allId:o.id,pasteId:n.id,topId:h.id,upId:p.id,bottomId:c.id,downId:u.id,cutId:d.id,copyId:s.id,deleteId:f.id,singleElement:m([s,d,f,a,p,h,a,u,c]),multipleElement:m([s,d,f]),stage:m([o,n])}}),define("designer/header",["magix","../elements/index","../gallery/mx-dragdrop/index","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-dialog/index"],(e,t,r)=>{let i,l,a,o,s={class:"rd-E rd-d"},d={class:"rd-C rd-E rd-d rd-j"},n={class:"rd-1 rd-3 rd-g"},p={class:"rd-5 rd-w"},u={class:"rd-6"},h={class:"rd-4"},c={class:"rd-w"};Object.defineProperty(t,"__esModule",{value:!0});const f=e("magix"),g=e("../elements/index"),m=e("../gallery/mx-dragdrop/index"),x=e("../gallery/mx-pointer/select"),y=e("../gallery/mx-pointer/cursor"),b=e("../gallery/mx-dialog/index");f.default.applyStyle("rd-c",".rd-1,.rd-2{width:60px;height:40px;display:grid;grid-template-rows:20px 20px;justify-items:center;align-items:center;cursor:pointer;margin:0 2px}.rd-3{grid-template-columns:50px 10px}.rd-2{float:left;border-radius:2px}.rd-2:hover{background:#bd361b}.rd-4{display:none;position:absolute;cursor:default;top:100%;left:0;width:264px;padding:4px}.rd-4,.rd-1:hover{background:#e64e30}.rd-1:hover .rd-4{display:block}.rd-5{grid-column:1/2;grid-row:1/2;align-self:flex-end}.rd-6{font-size:12px;font-weight:400;line-height:12px;grid-column:1/2;grid-row:2/3}.rd-7{font-size:10px;margin-left:-10px;grid-row:1/3;grid-column:2/3}.rd-8{height:30px;width:1px;background:-webkit-gradient(linear,left top,left bottom,from(hsla(0,0%,100%,.27)),color-stop(.3,#fff),color-stop(.7,#fff),to(hsla(0,0%,100%,.27)));margin:2px 12px;float:left}");let w=["requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"];t.default=f.default.View.extend({tmpl:(e,t,r,f,g,m,x)=>{let y,b,w,v,k,S,A,_,E,M=[],{i18n:C,elements:V}=e;i?y=[i]:(b=[t(0,0,"\ue679")],y=[i=t("i",{_:"_",class:"rd-a rd-w"},b)]),y.push(t(0,0,f(C("siteName"))+"\u2122")),M.push(t("div",s,y)),y=[];for(let e=V.length,i=0;i<e;i+=1){let e=V[i];if(b=[],e.spliter)w=l?[l]:[l=t("div",{_:"a",class:"rd-8"})],b.push(...w);else{if(w=[],e.subs){S=[t(0,1,f(e.icon))],k=[t("i",p,S)],S=[t(0,0,f(C(e.title)))],k.push(t("b",u,S)),a?k.push(a):(S=[t(0,0,"\ue73a")],k.push(a=t("i",{_:"b",class:"rd-7 rd-w"},S))),S=[];for(let l=e.subs,a=l.length,o=0;o<a;o+=1){let e=l[o];E=[t(0,1,f(e.icon))],_=[t("i",p,E)],E=[t(0,0,f(C(e.title)))],_.push(t("b",u,E)),A=[t("div",{class:"rd-2","mx5-mousedown":r+"\x1eaddElement({ctrl:'"+x(m,e,"\x1e_."+i+".a."+o)+"',hide:true})"},_)],S.push(...A)}k.push(t("div",h,S)),v=[t("div",n,k)],w.push(...v)}else S=[t(0,1,f(e.icon))],k=[t("i",p,S)],S=[t(0,0,f(C(e.title)))],k.push(t("b",u,S)),v=[t("div",{class:"rd-1 rd-g","mx5-mousedown":r+"\x1eaddElement({ctrl:'"+x(m,e,"\x1e_."+i)+"'})"},k)],w.push(...v);b.push(...w)}y.push(...b)}return M.push(t("div",d,y)),o?M.push(o):(w=[t(0,0,"\ue64a")],b=[t("i",c,w)],w=[t(0,0,"\u9884\u89c8")],b.push(t("b",u,w)),y=[t("div",{class:"rd-1","mx5-click":r+"\x1epreview()"},b)],w=[t(0,0,"\ue6b0")],b=[t("i",c,w)],w=[t(0,0,"\u4fdd\u5b58")],b.push(t("b",u,w)),y.push(t("div",{class:"rd-1","mx5-click":r+"\x1esave()"},b)),w=[t(0,0,"\ue764")],b=[t("i",c,w)],w=[t(0,0,"\u5c55\u793a")],b.push(t("b",u,w)),y.push(t("div",{class:"rd-1","mx5-click":r+"\x1edisplay()"},b)),M.push(o=t("div",{_:"c",class:"rd-D rd-E rd-e rd-j"},y))),t(r,0,M)},mixins:[m.default,b.default],render(){this.digest({elements:g.default.elementList()})},"addElement<mousedown>"(e){let{ctrl:t,hide:r}=e.params,i=e.eventTarget.parentNode,l=!1,a=null;f.State.set({memoryCacheElementCtrl:t});let o=t.getProps(0,0),{width:s,height:d}=o,n=f.State.get("stageScale");s*=n,d*=n,x.default.init(),y.default.rootShowByType("move"),this.dragDrop(e,e=>{l||r&&(i.style.display="none"),f.State.fire("toolboxDragElementMove",{width:s,height:d,node:m.default.fromPoint(e.clientX,e.clientY),pageX:e.pageX-s/2,pageY:e.pageY-d/2}),f.State.fire("dragElementMove",e),l=!0},e=>{r&&(i.style.display=""),x.default.hide(),y.default.rootHide(),l?e&&(a=m.default.fromPoint(e.clientX,e.clientY),f.State.fire("toolboxDragElementDrop",{node:a,pageX:e.pageX-s/2,pageY:e.pageY-d/2}),f.State.fire("dragElementStop")):f.State.fire("toolboxAddElement",{pageX:50*Math.random()|0,pageY:50*Math.random()|0})})},"preview<click>"(){let e=f.node("stage_outer");for(let t of w)if(e[t]){e[t]();break}},"save<click>"(){this.mxDialog("designer/content",{width:800})},"display<click>"(){window.open("./display.html")},"$doc<webkitfullscreenchange,mozfullscreenchange,fullscreenchange>"(e){let t=document,r=t.fullscreenElement||t.webkitCurrentFullScreenElement||t.mozFullScreenElement||null;f.State.fire("preview",{fullscreen:!0,full:!!r})}})}),define("designer/history",["magix","./const"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("./const");let a=[],o=[],s=null,d=null,n="",p=null,u=()=>JSON.stringify({page:i.State.get("stagePage"),scale:i.State.get("stageScale"),elements:i.State.get("stageElements"),select:i.State.get("stageSelectElements"),xLines:i.State.get("stageXHelpLines"),yLines:i.State.get("stageYHelpLines")}),h=e=>{let t=JSON.parse(e),r=i.State.get("stageScale"),l=t.scale||r;i.State.fire("historyShift",{json:t,scale:r!==l})};t.default={saveDefault(){p||(p=u())},queryStatus:()=>({canRedo:o.length,canUndo:a.length}),clear(){a.length=0,o.length=0},undo(){if(a.length>0){let e=a.pop();o.push(e);let t=a[a.length-1]||p;h(t)}},redo(){let e=o.pop();e&&(a.push(e),h(e))},save(e="_save",t=0){let r=u();e!=n&&(s&&(a.push(s),s=null),n=e),o.length=0;let h=e=>{a.push(e),a.length>l.default.historyMaxCount&&(p=a.shift()),i.State.fire("historyStatusChange")};t?(s=r,clearTimeout(d),d=setTimeout(()=>{h(s),s=null},t)):h(r)}}}),define("designer/index",["magix","../elements/index","../gallery/mx-dialog/index","./const","./history","../panels/index","./header","./toolbar","./axis","./stage"],(e,t,r)=>{let i;e("./header"),e("./toolbar"),e("./axis"),e("./stage"),Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("../elements/index"),o=e("../gallery/mx-dialog/index"),s=e("./const"),d=e("./history"),n=e("../panels/index");let p=a.default.getPage();l.default.applyStyle("rd-d",".rd-9{background:#fa742b;height:40px;line-height:40px;font-size:16px;padding:0 10px;color:#fff;z-index:202}.rd-9,.rd-a_{position:relative}.rd-a_{padding:0 26px;background:#fafafa;color:#333;height:26px;z-index:201;border-bottom:1px solid #eee}.rd-aa{width:calc(100% - 20px);overflow:scroll;height:calc(100% - 85px);background-color:#edeef3;transition:all .3s;margin-left:20px;-webkit-overflow-scrolling:touch}.rd-ab{box-shadow:inset 1px 1px 6px 2px #dadada}");t.default=l.default.View.extend({tmpl:(e,t,r)=>{if(!i){let e=[];e.push(t("div",{"mx5-view":"designer/header",class:"rd-9"}),t("div",{"mx5-view":"designer/toolbar",class:"rd-a_ rd-j"}),t("div",{"mx5-view":"designer/axis?scroll=stage",class:"rd-g rd-j"}),t("div",{"mx5-view":"designer/stage",id:"stage",class:"rd-aa rd-ab rd-k"})),i=t(r,0,e)}return i},mixins:[o.default],init(){l.State.on("historyShift",e=>{(e=>{let t=l.State.get("stagePage"),r=l.State.get("stageElements"),i=l.State.get("stageSelectElements"),o=l.State.get("stageXHelpLines"),s=l.State.get("stageYHelpLines"),{elements:d,map:n}=a.default.byJSON(e.elements);r.length=0,r.push(...d),o.length=0,e.xLines&&o.push(...e.xLines),s.length=0,e.yLines&&s.push(...e.yLines);let p={};if(i.length=0,e.select)for(let t of e.select){let e=n[t.id];e&&(p[e.id]=1,i.push(e))}Object.assign(t,e.page),l.State.set({stageScale:e.scale||1,stageSelectElementsMap:p})})(e.json)}),l.State.set({stagePageCtrl:p,stagePage:p.getProps(),stageScale:s.default.stageScale,stageElements:[],stageSelectElements:[],stageSelectElementsMap:{},stageXHelpLines:[],stageYHelpLines:[]}),d.default.saveDefault()},async render(){let e=l.default.mark(this,"renderMarker"),t=l.default.config("data"),r=l.State.get("stagePage"),i=l.State.get("stageElements");if(t&&(t.page&&Object.assign(r,t.page),t.elements)){let{elements:e}=a.default.byJSON(t.elements);i.push(...e)}await this.digest(),e()&&n.default.openPanels()},"$doc<dragover>"(e){e.preventDefault()}})}),define("designer/keys",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UP:38,DOWN:40,LEFT:37,RIGHT:39,DELETE:46,BACKSPACE:8,TAB:9,C:67,V:86,A:65,N:78,X:88,Z:90,Y:89}}),define("designer/props",[],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={number:2,color:4,spliter:8,boolean:16,fontStyle:32,fontAlign:64,textArea:128,image:256,dropdown:512,imageReset:1024,textInput:2048}}),define("designer/service",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");let l=i.default.Service.extend((e,t)=>{let r=e.get("method")||"GET";fetch(e.get("url"),{method:r,credentials:"include"}).then(e=>{if(e.ok)return e.json();throw new Error("Network response error")}).then(r=>{e.set("data",r.data),t()}).catch(e=>{t({msg:e.message})})});l.add([{name:"getImages",url:i.default.config("getImageUrl"),cache:18e5}]),t.default={fetch:(e,t)=>(new l).all(e,t),save:(e,t)=>(new l).save(e,t),lock(e,t){this.locker||(this.locker={});let r=this.locker;r[e]||(r[e]=t,t())},unlock(e){let t=this.locker;t&&delete t[e]}}}),define("designer/stage-clipboard",["magix","./stage-elements","./stage-select"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("./stage-elements"),a=e("./stage-select");let o=e=>{if(Array.isArray(e)){let t=[];for(let r of e)t.push(o(r));e=t}else if("Object"==i.default.type(e)){let t={};for(let r in e)t[r]=o(e[r]);e=t}return e};t.default={hasElements(){return(this.copyList||[]).length},getCopyList(){return this.copyList||[]},copyElements(){let e=[],t=i.State.get("stageSelectElements");for(let r of t)e.push(r);this.copyList=e},cutElements(){let e=i.State.get("stageSelectElements");1==e.length&&e[0].props.locked||(this.copyElements(),this.isCut=!0)},pasteElements(e){let t=this,r=t.copyList,s=i.State.get("stageElements"),d=!1;if(r){d=!0;let n=[],p=0,u=0,h=0,c=e=>{for(let t of s)if(t.props.x==e.x&&t.props.y==e.y)return 1;return 0},f=({props:t,ctrl:r})=>{if(0===p)if(e)u=e.x-t.x,h=e.y-t.y;else{let e={x:t.x,y:t.y};for(;c(e);)e.x+=20,e.y+=20;for(e.x+t.width<0&&(e.x=-t.width/2),e.y+t.height<0&&(e.y=-t.height/2);c(e);)e.x-=4,e.y-=4;u=e.x-t.x,h=e.y-t.y}for(let e of r.moved)t[e.key]=t[e.key]+("x"==e.use?u:h);t.locked=!1};for(let e of r){let r=o(e);f(r),p++,r.id=i.default.guid("e_"),s.push(r),n.push(r),t.isCut&&l.default.deleteElementById(e.id,!0)}t.isCut&&(delete t.isCut,delete t.copyList),i.State.fire("stageElementsChange"),a.default.setAll(n)}return d}}}),define("designer/stage-elements",["magix","./stage-select","./history","../gallery/mx-pointer/cursor","../util/transform"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("./stage-select"),a=e("./history"),o=e("../gallery/mx-pointer/cursor"),s=e("../util/transform");let d=(e,t)=>{let r=e.start,i=e.end,l=t.start,a=t.end,o=((i.x-r.x)*(l.y-r.y)-(i.y-r.y)*(l.x-r.x))*((i.x-r.x)*(a.y-r.y)-(i.y-r.y)*(a.x-r.x)),s=((a.x-l.x)*(r.y-l.y)-(a.y-l.y)*(r.x-l.x))*((a.x-l.x)*(i.y-l.y)-(a.y-l.y)*(i.x-l.x));return o<0&&s<0};t.default={addElement(e,t){let r=i.State.get("memoryCacheElementCtrl");if(r){let a=i.State.get("stageElements"),o=r.getProps(e.pageX,e.pageY),s=i.State.get("stageScale"),d={};for(let e of r.scales)d[e]=o[e]*s;let n=d.x-o.x,p=d.y-o.y;for(let e of r.moved)"x"==e.use?d[e.key]-=n:d[e.key]-=p;for(let e in d)o[e]=d[e];let u={id:i.default.guid("e_"),ctrl:r,type:r.type,props:o};return a.push(u),t&&l.default.set(u),a}},multiSelect(e,t){if(e.shiftKey||e.ctrlKey||e.metaKey){if(!t.props.locked){let e=i.State.get("stageSelectElements"),r=!1;for(let i=e.length;i--;){let l=e[i];l.id==t.id&&(r=!0),l.props.locked&&e.splice(i,1)}if(r&&e.length>1)return void(l.default.remove(t)&&a.default.save());l.default.add(t)&&a.default.save()}}else l.default.set(t)&&a.default.save()},selectOrMoveElements(e,t){let{element:r}=e.params,s=i.State.get("stageSelectElements");if(void 0===e.button||0==e.button)if(e.shiftKey||e.ctrlKey||e.metaKey)this.multiSelect(e,r);else{o.default.showByType("move");let d=[],n=!1;for(let{id:e,ctrl:t,props:i}of s){r.id==e&&(n=!0);let l={};for(let e of t.moved)l[e.key]=i[e.key];d.push(l)}if(!n){l.default.set(r)&&a.default.save(),d.length=0;let e={};for(let t of r.ctrl.moved)e[t.key]=r.props[t.key];d.push(e),s.length=0,s.push(r)}let p,u,h=!1;i.State.fire("stageToggleScroll",{show:1});let c=()=>{let t=p.pageX-e.pageX,r=p.pageY-e.pageY;u&&(r+=u.offsetY,t+=u.offsetX);let l=0;for(let e of s){let a=d[l++];if(!e.props.locked){h=!0;for(let i of e.ctrl.moved)e.props[i.key]=a[i.key]+("x"==i.use?t:r);let l=i.Vframe.byNode(i.node(e.id));l&&l.invoke("assign",[{element:e}])&&l.invoke("render")}}i.State.fire("stageSelectElementPropsChange")},f=e=>{e.stop?i.State.off("stageIntervalMove",f):(u=e,c())};i.State.on("stageIntervalMove",f),t.dragDrop(e,e=>{i.State.fire("dragElementMove",e),p=e,c()},()=>{h&&a.default.save(),o.default.hide(),i.State.fire("stageToggleScroll"),i.State.fire("dragElementStop")})}else{let e=!1;for(let t of s)if(t.id===r.id){e=!0;break}e||l.default.set(r)&&a.default.save()}},deleteSelectElements(){let e=i.State.get("stageSelectElements"),t=i.State.get("stageElements"),r=!1;if(e.length){let a=i.toMap(e,"id");for(let e=t.length;e--;)a[t[e].id]&&(r=!0,t.splice(e,1));r&&l.default.set()}return r},getElementsLocation(){let e,t,r=i.State.get("stageElements"),l=[];for(let i of r){if((e=i.props).locked)continue;t=e.rotate||0;let r={x:e.x,y:e.y,width:e.width,height:e.height},a=s.default.rotateRect(r,t),o=a.point[0],d=a.point[2],n=a.point[6],p=a.point[4],u=o,h=o,c=o,f=o;for(let e of[d,n,p])e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.y<h.y&&(h=e),e.y>f.y&&(f=e);l.push({element:i,left:u,top:h,right:c,bottom:f,points:[o,d,n,p],lines:[{start:o,end:d},{start:d,end:p},{start:p,end:n},{start:n,end:o}]})}return l},getIntersectElements(e,t,r){let i,l=[],a=[{start:{x:t.x,y:t.y},end:{x:t.x+t.width,y:t.y}},{start:{x:t.x+t.width,y:t.y},end:{x:t.x+t.width,y:t.y+t.height}},{start:{x:t.x+t.width,y:t.y+t.height},end:{x:t.x,y:t.y+t.height}},{start:{x:t.x,y:t.y+t.height},end:{x:t.x,y:t.y}}];for(let o of e)if(i=!1,r&&r[o.element.id])r&&l.push(o.element);else{for(let e of o.points)if(e.x>=t.x&&e.y>=t.y&&e.x<=t.x+t.width&&e.y<=t.y+t.height){l.push(o.element),i=!0;break}if(!i)for(let e of o.lines){for(let t of a)if(d(e,t)){i=!0,l.push(o.element);break}if(i)break}}return l},deleteElementById(e,t){let r=i.State.get("stageElements");for(let t=r.length;t--;){e==r[t].id&&r.splice(t,1)}t||l.default.setAll()},selectAll(){let e=i.State.get("stageSelectElementsMap"),t=i.State.get("stageElements"),r=[];for(let e of t)e.props.locked||r.push(e);l.default.setAll(r),l.default.hasChanged(e)&&a.default.save()},moveElement(e,t){let r=i.State.get("stageElements"),l=-1;for(let e=r.length;e--;){if(r[e].id===t.id){r.splice(l=e,1);break}}return 3==e?r.push(t):4==e?r.unshift(t):5==e?r.splice(l+1,0,t):6==e&&(0===l&&(l=1),r.splice(l-1,0,t)),!0},handleKeyTab(e){let t=i.State.get("stageSelectElements"),r=i.State.get("stageElements"),a=t.length,o=t[0];if(0===a||a>1)o=r[e.shiftKey?0:r.length-1],l.default.set(o);else{let t,i;for(let e=r.length;e--;){let l=r[e];if(l.id==o.id){t=r[e-1];break}i=l}let a=null;e.shiftKey?(t||(t=r[r.length-1]),a=t):(i||(i=r[0]),a=i),a.id!=o.id&&l.default.set(a)}}}}),define("designer/stage-select",["magix"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix");t.default={set(e){let t=i.State.get("stageSelectElements"),r=t.length;if(r||e){let l=r>1?null:t[0];t.length=0;let a=!1;if(e?(t.push(e),a=e!=l):r&&(a=!0),a)return i.State.set({stageSelectElementsMap:i.toMap(t,"id")}),i.State.fire("stageSelectElementsChange"),!0}},add(e){let t=i.State.get("stageSelectElements"),r=!1;for(let i of t)if(i.id===e.id){r=!0;break}if(!r)return t.push(e),i.State.set({stageSelectElementsMap:i.toMap(t,"id")}),i.State.fire("stageSelectElementsChange"),!0},remove(e){let t=i.State.get("stageSelectElements"),r=!1,l=-1;for(let i of t)if(l++,i.id===e.id){r=!0;break}if(r)return t.splice(l,1),i.State.set({stageSelectElementsMap:i.toMap(t,"id")}),i.State.fire("stageSelectElementsChange"),!0},setAll(e){let t=i.State.get("stageSelectElements");t.length=0,e&&t.push.apply(t,e),i.State.set({stageSelectElementsMap:i.toMap(t,"id")}),i.State.fire("stageSelectElementsChange")},hasChanged(e){let t=i.State.get("stageSelectElementsMap"),r=0;for(let i in e)if(!t[i]){r=1;break}if(!r)for(let i in t)if(!e[i]){r=1;break}return r}}}),define("designer/stage",["magix","../gallery/mx-dragdrop/index","./history","./keys","./stage-elements","./stage-select","./stage-clipboard","../util/converter","../gallery/mx-pointer/select","../gallery/mx-pointer/cursor","../gallery/mx-menu/index","./contextmenu","../gallery/mx-runner/index"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("../gallery/mx-dragdrop/index"),a=e("./history"),o=e("./keys"),s=e("./stage-elements"),d=e("./stage-select"),n=e("./stage-clipboard"),p=e("../util/converter"),u=e("../gallery/mx-pointer/select"),h=e("../gallery/mx-pointer/cursor"),c=e("../gallery/mx-menu/index"),f=e("./contextmenu"),g=e("../gallery/mx-runner/index");i.default.applyStyle("rd-e",".rd-ac{outline:0;display:flex;position:relative}.rd-ad{padding:50px 280px 50px 220px}.rd-ae .rd-ad{padding:0}.rd-af{background:#fff;box-shadow:0 3px 6px 0 rgba(0,0,0,.3)}"),t.default=i.default.View.extend({tmpl:(e,t,r,i,l,a,o)=>{let s,d,n,p,u,h,c=[],{fullscreen:f,rx:g,ry:m,marginTop:x,marginLeft:y,page:b,scale:w,elements:v}=e;u=[];for(let e=v.length,l=0;l<e;l+=1){let e=v[l];h=[t("div",{$:"elements,scale,fullscreen",id:i(e.id),"mx5-view":"elements/"+i(e.type)+"/designer?element="+o(a,e,"\x1e_."+l)+"&scale="+o(a,w,"\x1eb")+"&fullscreen="+o(a,f,"\x1ec"),"mx5-mousedown":r+"\x1eelementStartDrag({element:'"+o(a,e,"\x1e_."+l)+"'})"})],u.push(...h)}return p="width:"+i(b.width*w)+"px;height:"+i(b.height*w)+"px;background:"+i(b.background)+";",b.backgroundImage&&(p+="background-image:url("+i(b.backgroundImage)+");background-repeat:"+i("full"==b.backgroundRepeat?"no-repeat":b.backgroundRepeat)+";background-size:","full"==b.backgroundRepeat?p+="100% 100%":p+=i(b.backgroundWidth*w)+"px "+i(b.backgroundHeight*w)+"px;background-position:"+i(b.hor)+"% "+i(b.ver)+"%"),n=[t("div",{class:"rd-af rd-g",id:"stage_canvas",style:p},u)],d=[t("div",{class:"rd-ad",style:f&&"transform:scaleX("+i(g)+") scaleY("+i(m)+");transform-origin:0 0;margin:"+i(x)+"px 0 0 "+i(y)+"px;"},n)],s="rd-ac",f&&(s+=" rd-ae"),c.push(t("div",{id:"stage_outer","mx5-contextmenu":r+"\x1eprevent()","mx5-mousedown":r+"\x1estageStartDrag()",tabindex:"0","mx5-focusin":r+"\x1estageActive()","mx5-focusout":r+"\x1estageDeactive()","mx5-keydown":r+"\x1estageKeydown()",class:s},d),t("div",{id:"pole_"+r,style:"margin-top:-"+i(b.height*w+100)+"px;display:none"})),t(r,0,c)},mixins:[l.default],init(){let e=e=>{if(e.node){if(!i.default.inside(e.node,i.node("stage_outer")))return;{let t=p.default.realToStageCoord({x:e.pageX,y:e.pageY});e.pageX=t.x,e.pageY=t.y}}else e.pageX+=this.root.scrollLeft,e.pageY+=this.root.scrollTop;s.default.addElement(e,!0)&&(i.State.fire("stageElementsChange"),a.default.save())},t=e=>{let t=i.State.get("stageElements");e?this.digest({elements:t}):this.set({elements:t})},r=0,l=e=>{let t=i.State.get("stageElements");if(e.step||e.fullscreen){if(e.fullscreen){let t=i.State.get("stagePage");if(e.full){let l=screen.width/t.width,a=screen.height/t.height,o=Math.min(l,a),s=0,d=0;"auto"==t.scaleType?(s=o,d=o):(s=l,d=a);let n=(screen.height-d*t.height)/2,p=(screen.width-s*t.width)/2,u=i.State.get("stageScale");1!=u?(e.step=1/u,r=u):r=0,i.State.set({stageScale:1}),this.set({rx:s,ry:d,marginTop:n,marginLeft:p})}else 0!=r&&(e.step=r,i.State.set({stageScale:r}));this.set({fullscreen:e.full})}if(e.step)for(let{props:r,ctrl:i}of t)if(i.scales)for(let t of i.scales)r[t]*=e.step}this.set({elements:t}),this.render()},o=e=>{let t=this.root,r=i.node("pole_"+this.id).style;e.show?(r.width=t.scrollWidth+"px",r.height=t.scrollHeight+"px",r.display="block"):r.display="none"},d=null,n=null,h=null,c=0,f=0,m=()=>{if(d){n||(n=i.node("stage")),h||(h=n.getBoundingClientRect());let e=n.scrollTop,t=n.scrollLeft;d.pageY>h.top&&d.pageY<h.top+50?n.scrollTop-=4:d.pageY>h.top+h.height-50&&(n.scrollTop+=4),d.pageX<h.left+50?n.scrollLeft-=4:d.pageX>h.left+h.width-50&&(n.scrollLeft+=4),e!=n.scrollTop&&(f+=n.scrollTop-e),t!=n.scrollLeft&&(c+=n.scrollLeft-t),o({show:1}),i.State.fire("stageIntervalMove",{offsetX:c,offsetY:f})}};i.State.on("preview",l),i.State.on("historyShift",l),i.State.on("stageScaleChange",l),i.State.on("stagePageChange",l),i.State.on("toolboxAddElement",e),i.State.on("toolboxDragElementDrop",e),i.State.on("stageElementsChange",t),i.State.on("stageToggleScroll",o),i.State.on("dragElementMove",e=>{d||g.default.taskAdd(10,m),d=e}),i.State.on("dragElementStop",()=>{d=null,h=null,c=f=0,g.default.taskRemove(m),i.State.fire("stageIntervalMove",{stop:!0})}),i.State.on("toolboxDragElementMove",e=>{i.default.inside(e.node,i.node("stage_outer"))?u.default.update(e.pageX,e.pageY,e.width,e.height):u.default.hide()}),t()},render(){let e=i.State.get("stagePage");this.digest({scale:i.State.get("stageScale"),page:e})},"elementStartDrag<mousedown>"(e){this.get("fullscreen")||s.default.selectOrMoveElements(e,this)},"stageStartDrag<mousedown>"(e){if(this.get("fullscreen"))return;let t=e.target;if("stage_canvas"==t.id||i.default.inside(i.node("stage_canvas"),t)){let t=null,r=0,l=i.State.get("stageSelectElementsMap");if(e.shiftKey){t={};let e=i.State.get("stageSelectElements");for(let i of e)t[i.id]=1,r++}else d.default.set();this.lastInteresetCount=r,u.default.init();let o=0,n=s.default.getElementsLocation();this.dragDrop(e,r=>{o||(o=1,h.default.showByType("default"));let i=Math.abs(e.pageX-r.pageX),l=Math.abs(e.pageY-r.pageY),a=Math.min(e.pageX,r.pageX),c=Math.min(e.pageY,r.pageY);u.default.update(a,c,i,l);let f=p.default.realToStageCoord({x:a,y:c});if(f.width=i,f.height=l,n.length){let e=s.default.getIntersectElements(n,f,t),r=e.length;r!==this.lastInteresetCount&&(this.lastInteresetCount=r,d.default.setAll(e))}},()=>{o&&(u.default.hide(),h.default.hide()),d.default.hasChanged(l)&&a.default.save()})}},"stageKeydown<keydown>"(e){if(!this.get("fullscreen"))if(e.metaKey||e.ctrlKey)e.keyCode==o.default.Z?(e.preventDefault(),e.shiftKey?a.default.redo():a.default.undo()):e.keyCode==o.default.Y?(e.preventDefault(),a.default.redo()):e.keyCode==o.default.A?(e.preventDefault(),s.default.selectAll()):e.keyCode==o.default.X?(e.preventDefault(),n.default.cutElements()):e.keyCode==o.default.C?(e.preventDefault(),n.default.copyElements()):e.keyCode==o.default.V&&(e.preventDefault(),n.default.pasteElements());else if(e.keyCode==o.default.TAB)e.preventDefault(),s.default.handleKeyTab(e);else if(e.keyCode==o.default.DELETE||e.keyCode==o.default.BACKSPACE)e.preventDefault(),s.default.deleteSelectElements()&&(i.State.fire("stageElementsChange"),a.default.save());else{let t=e.shiftKey?10:1;t*=i.State.get("stageScale");let r=i.State.get("stageSelectElements");if(r.length){let l=!1,s=0,d="";for(let a of r)if(!a.props.locked&&(e.keyCode==o.default.UP?(l=!0,s=-t,d="y"):e.keyCode==o.default.DOWN?(l=!0,s=t,d="y"):e.keyCode==o.default.LEFT?(l=!0,s=-t,d="x"):e.keyCode==o.default.RIGHT&&(l=!0,s=t,d="x"),l)){let e=i.Vframe.byNode(i.node(a.id));if(e){for(let e of a.ctrl.moved)e.use==d&&(a.props[e.key]+=s);e.invoke("assign",[{element:a}])&&e.invoke("render")}}l&&(e.preventDefault(),i.State.fire("stageSelectElementPropsChange"),a.default.save("moveElementByKeyboard",500))}}},"prevent<contextmenu>"(e){if(e.preventDefault(),i.default.inside(e.target,i.node("stage_canvas"))){let t=i.default.config("lang"),r=f.default.stage(t),l={},o=i.State.get("stageElements"),d=i.State.get("stageSelectElements"),u=n.default.hasElements();l[f.default.allId]=!o.length,l[f.default.pasteId]=!u;let h=d.length,g=d[0];if(1==h){r=f.default.singleElement(t);let e=o[o.length-1],i=o[0],a=e.id==g.id,s=i.id==g.id,d=g.props.locked;l[f.default.cutId]=d,l[f.default.upId]=d||a,l[f.default.topId]=d||a,l[f.default.bottomId]=d||s,l[f.default.downId]=d||s}else h>1&&(r=f.default.multipleElement(t));c.default.show(this,e,{list:r,disabled:l,picked(t){if(t.id==f.default.allId)s.default.selectAll();else if(t.id==f.default.copyId)n.default.copyElements();else if(t.id==f.default.pasteId){let t=p.default.realToStageCoord({x:e.pageX,y:e.pageY});n.default.pasteElements(t)&&a.default.save()}else t.id==f.default.cutId?n.default.cutElements():t.id==f.default.deleteId?s.default.deleteSelectElements()&&(i.State.fire("stageElementsChange"),a.default.save()):t.id>=3&&t.id<=6&&s.default.moveElement(t.id,g)&&(i.State.fire("stageElementsChange"),a.default.save())}})}},"stageActive<focusin>"(){this.root.classList.remove("rd-ab")},"stageDeactive<focusout>"(){this.root.classList.add("rd-ab")}})}),define("designer/toolbar-align",["magix","./history"],(e,t,r)=>{let i;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("./history");let o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s=[],{elements:d,i18n:n}=e,p=d.length;return i?s.push(i):s.push(i=t("i",{_:"_",class:"rd-aj"})),o=[t(0,0,"\ue70b")],a="rd-w rd-ah",p<2&&(a+=" rd-ak"),s.push(t("i",{title:l(n("alignLeft")),"mx5-click":r+"\x1ealignElements({to:'left'})",class:a},o)),o=[t(0,0,"\ue711")],a="rd-w rd-ah",p<2&&(a+=" rd-ak"),s.push(t("i",{title:l(n("alignCenter")),"mx5-click":r+"\x1ealignElements({to:'center'})",class:a},o)),o=[t(0,0,"\ue70c")],a="rd-w rd-ah",p<2&&(a+=" rd-ak"),s.push(t("i",{title:l(n("alignRight")),"mx5-click":r+"\x1ealignElements({to:'right'})",class:a},o)),o=[t(0,0,"\ue70d")],a="rd-w rd-ah",p<2&&(a+=" rd-ak"),s.push(t("i",{title:l(n("alignTop")),"mx5-click":r+"\x1ealignElements({to:'top'})",class:a},o)),o=[t(0,0,"\ue712")],a="rd-w rd-ah",p<2&&(a+=" rd-ak"),s.push(t("i",{title:l(n("alignMiddle")),"mx5-click":r+"\x1ealignElements({to:'middle'})",class:a},o)),o=[t(0,0,"\ue70e")],a="rd-w rd-ah",p<2&&(a+=" rd-ak"),s.push(t("i",{title:l(n("alignBottom")),"mx5-click":r+"\x1ealignElements({to:'bottom'})",class:a},o)),t(r,0,s)},init(){let e=this.render.bind(this);l.State.on("historyShift",e),l.State.on("stageSelectElementsChange",e)},render(){this.digest({elements:l.State.get("stageSelectElements")})},"alignElements<click>"(e){if(e.eventTarget.classList.contains("rd-ak"))return;let{to:t}=e.params,r=l.State.get("stageSelectElements"),i=s,d=o,n=o,p=s,u=o,h=o;for(let e of r){let r=l.node("mask_"+e.id).getBoundingClientRect();if("right"==t)r.right>i&&(i=r.right);else if("left"==t)r.left<d&&(d=r.left);else if("top"==t)r.top<n&&(n=r.top);else if("bottom"==t)r.bottom>p&&(p=r.bottom);else if("middle"==t){let e=(r.bottom-r.top)/2;r.top+e<u&&(u=r.top+e)}else if("center"==t){let e=(r.right-r.left)/2;r.left+e<h&&(h=r.left+e)}}let c=0;for(let e of r){let r,a=l.node("mask_"+e.id).getBoundingClientRect(),o=0,s="";if("right"==t?0!=(r=i-a.right)&&(c=1,o=1,s="x"):"left"==t?0!=(r=d-a.left)&&(c=1,o=1,s="x"):"top"==t?0!=(r=n-a.top)&&(c=1,o=1,s="y"):"bottom"==t?0!=(r=p-a.bottom)&&(c=1,o=1,s="y"):"middle"==t?0!=(r=u-(a.top+(a.bottom-a.top)/2))&&(c=1,o=1,s="y"):"center"==t&&0!=(r=h-(a.left+(a.right-a.left)/2))&&(c=1,o=1,s="x"),o){let t=l.Vframe.byNode(l.node(e.id));if(t){for(let t of e.ctrl.moved)t.use==s&&(e.props[t.key]+=r);t.invoke("assign",[{element:e}])&&t.invoke("render")}}}c&&(l.State.fire("stageSelectElementPropsChange"),a.default.save())}})}),define("designer/toolbar-del",["magix","./stage-elements","./history"],(e,t,r)=>{let i;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("./stage-elements"),o=e("./history");t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s=[],{elements:d,i18n:n}=e,p=d.length;return i?s.push(i):s.push(i=t("i",{_:"_",class:"rd-aj"})),o=[t(0,0,"\ue600")],a="rd-w rd-ah",p<1&&(a+=" rd-ak"),s.push(t("i",{title:l(n("menuDelete"))+"(Delete)","mx5-click":r+"\x1eremoveElements()",class:a},o)),t(r,0,s)},init(){let e=this.render.bind(this);l.State.on("historyShift",e),l.State.on("stageSelectElementsChange",e)},render(){this.digest({elements:l.State.get("stageSelectElements")})},"removeElements<click>"(e){e.eventTarget.classList.contains("rd-ak")||a.default.deleteSelectElements()&&(l.State.fire("stageElementsChange"),o.default.save())}})}),define("designer/toolbar-do",["magix","./history"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("./history");t.default=i.default.View.extend({tmpl:(e,t,r,i)=>{let l,a,o=[],{status:s,i18n:d}=e;return a=[t(0,0,"\ue682")],l="rd-w rd-ah",s.canUndo||(l+=" rd-ak"),o.push(t("i",{title:i(d("undo")),"mx5-click":r+"\x1edoExec({s:'-',b:"+i(s.canUndo)+"})",class:l},a)),a=[t(0,0,"\ue682")],l="rd-w rd-ah rd-B",s.canRedo||(l+=" rd-ak"),o.push(t("i",{title:i(d("redo")),"mx5-click":r+"\x1edoExec({s:'+',b:"+i(s.canRedo)+"})",class:l},a)),t(r,0,o)},init(){let e=this.render.bind(this);i.State.on("historyShift",e),i.State.on("historyStatusChange",e)},render(){this.digest({status:l.default.queryStatus()})},"doExec<click>"(e){let{s:t,b:r}=e.params;r&&("-"==t?l.default.undo():l.default.redo())}})}),define("designer/toolbar-layer",["magix","./history","./stage-elements"],(e,t,r)=>{let i;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("./history"),o=e("./stage-elements");t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s,d=[],{elements:n,top:p,i18n:u,bottom:h}=e;a="";let c=n.length;a+=" ";let f=n[0];return i?d.push(i):d.push(i=t("i",{_:"_",class:"rd-aj"})),s=[t(0,0,"\ue632")],o="rd-w rd-ah",(1!=c||f.props.locked||p.id==f.id)&&(o+=" rd-ak"),d.push(t("i",{title:l(u("menuMoveUp")),"mx5-click":r+"\x1emoveElement({to:5})",class:o},s)),s=[t(0,0,"\ue607")],o="rd-w rd-ah",(1!=c||f.props.locked||p.id==f.id)&&(o+=" rd-ak"),d.push(t("i",{title:l(u("menuToTop")),"mx5-click":r+"\x1emoveElement({to:3})",class:o},s)),s=[t(0,0,"\ue632")],o="rd-w rd-ah rd-z",(1!=c||f.props.locked||h.id==f.id)&&(o+=" rd-ak"),d.push(t("i",{title:l(u("menuMoveDown")),"mx5-click":r+"\x1emoveElement({to:6})",class:o},s)),s=[t(0,0,"\ue607")],o="rd-w rd-ah rd-z",(1!=c||f.props.locked||h.id==f.id)&&(o+=" rd-ak"),d.push(t("i",{title:l(u("menuToBottom")),"mx5-click":r+"\x1emoveElement({to:4})",class:o},s)),t(r,0,d)},init(){let e=this.render.bind(this);l.State.on("historyShift",e),l.State.on("stageElementsChange",e),l.State.on("stageSelectElementsChange",e)},render(){let e=l.State.get("stageElements");this.digest({top:e[e.length-1],bottom:e[0],elements:l.State.get("stageSelectElements")})},"moveElement<click>"(e){if(e.eventTarget.classList.contains("rd-ak"))return;let{to:t}=e.params,r=this.get("elements")[0];o.default.moveElement(t,r)&&(l.State.fire("stageElementsChange"),a.default.save())}})}),define("designer/toolbar-panels",["magix","../panels/index"],(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("magix"),l=e("../panels/index");t.default=i.default.View.extend({tmpl:(e,t,r,i,l,a,o,s)=>{let d,n,p,u=[],{panels:h,i18n:c}=e;for(let e=h.length,l=0;l<e;l+=1){let e=h[l];p=[t(0,1,i(e.icon))],n="rd-w rd-ah",e.opened&&(n+=" rd-ai"),d=[t("i",{"mx5-click":r+"\x1etogglePanel({id:'"+s(e.id)+"'})",title:i(c(e.opened?"panelClosePanel":"panelOpenPanel",e.title)),class:n},p)],u.push(...d)}return t(r,0,u)},init(){i.State.on("panelChange",()=>{this.render()})},render(){this.digest({panels:l.default.supportPanels()})},"togglePanel<click>"(e){let{id:t}=e.params;l.default.togglePanel(t)}})}),define("designer/toolbar-scale",["magix","./history"],(e,t,r)=>{let i={class:"rd-al"};Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("./history");t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o=[],{i18n:s,scale:d}=e;return a=[t(0,0,"\ue602")],o.push(t("i",{class:"rd-ah rd-w","mx5-click":r+"\x1escale({s:'-'})",title:l(s("zoomOut"))},a)),a=[t(0,0,l(100*d)+"%")],o.push(t("b",i,a)),a=[t(0,0,"\ue699")],o.push(t("i",{class:"rd-ah rd-w","mx5-click":r+"\x1escale({s:'+'})",title:l(s("zoomIn"))},a)),t(r,0,o)},init(){let e=this.render.bind(this);l.State.on("stageScaleChange",e),l.State.on("historyShift",e)},render(){this.digest({scale:l.State.get("stageScale")})},"scale<click>"(e){let{s:t}=e.params,r=this.get("scale"),i=r;"+"==t?(r+=.5)>5&&(r=5):(r-=.5)<.5&&(r=.5),i!=r&&(l.State.set({stageScale:r}),l.State.fire("stageScaleChange",{step:r/i}),a.default.save())}})}),define("designer/toolbar-space",["magix","./history"],(e,t,r)=>{let i;Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix"),a=e("./history");let o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;t.default=l.default.View.extend({tmpl:(e,t,r,l)=>{let a,o,s=[],{elements:d,bezier:n,i18n:p}=e,u=d.length;return i?s.push(i):s.push(i=t("i",{_:"_",class:"rd-aj"})),o=[t(0,0,"\ue604")],a="rd-w rd-ah",(u<2||n)&&(a+=" rd-ak"),s.push(t("i",{title:l(p("sameWidth")),"mx5-click":r+"\x1esameElements({to:'width'})",class:a},o)),o=[t(0,0,"\ue605")],a="rd-w rd-ah",(u<2||n)&&(a+=" rd-ak"),s.push(t("i",{title:l(p("sameHeight")),"mx5-click":r+"\x1esameElements({to:'height'})",class:a},o)),o=[t(0,0,"\ue608")],a="rd-w rd-ah",u<3&&(a+=" rd-ak"),s.push(t("i",{title:l(p("sameHorSpace")),"mx5-click":r+"\x1eavgElements({to:'hor'})",class:a},o)),o=[t(0,0,"\ue608")],a="rd-w rd-A rd-ah",u<3&&(a+=" rd-ak"),s.push(t("i",{title:l(p("sameVerSpace")),"mx5-click":r+"\x1eavgElements({to:'ver'})",class:a},o)),t(r,0,s)},init(){let e=this.render.bind(this);l.State.on("historyShift",e),l.State.on("stageSelectElementsChange",e)},render(){let e=l.State.get("stageSelectElements"),t=!1;for(let r of e)if("bezier"==r.type){t=!0;break}this.digest({elements:e,bezier:t})},"sameElements<click>"(e){if(e.eventTarget.classList.contains("rd-ak"))return;let{to:t}=e.params,r=l.State.get("stageSelectElements"),i=s,d=s,n=o,p=o;for(let e of r){let t=e.props;t.width>i&&(i=t.width),t.width<n&&(n=t.width),t.height>d&&(d=t.height),t.height<p&&(p=t.height)}let u=0;for(let a of r){let r,o=a.props,s=0;if("width"==t?(r=e.shiftKey?n:i,o.width!=r&&(s=1,u=1,o.width=r)):(r=e.shiftKey?p:d,o.height!=r&&(s=1,u=1,o.height=r)),s){let e=l.Vframe.byNode(l.node(a.id));e&&e.invoke("assign",[{element:a}])&&e.invoke("render")}}u&&(l.State.fire("stageSelectElementPropsChange"),a.default.save())},"avgElements<click>"(e){if(e.eventTarget.classList.contains("rd-ak"))return;let t,r,i,d,n,{to:p}=e.params,u=l.State.get("stageSelectElements"),h=s,c=o,f=s,g=o,m=o,x=s,y=o,b=s,w=[],v=e.shiftKey;for(let e of u){let a,o=e.props,s=o.x+o.width/2,n=o.y+o.height/2;if(s>h&&(h=s),s<c&&(c=s),n>f&&(f=n),n<g&&(g=n),v){a=l.node("mask_"+e.id).getBoundingClientRect();let{left:o,top:s,right:n,bottom:p}=a;o<y&&(y=o,r=a),n>b&&(b=n,i=a),s<m&&(m=s,t=a),p>x&&(x=p,d=a)}w.push({m:e,mx:s,my:n,bound:a})}n=v?"ver"==p?(e,t)=>e.bound.top-t.bound.top:(e,t)=>e.bound.left-t.bound.left:"ver"==p?(e,t)=>e.my-t.my:(e,t)=>e.mx-t.mx,w=w.sort(n);let k=0;if(v){let e=0,a=0,o=w.length;if("ver"==p){t!=d&&o--;for(let r of w)r.bound!=t&&r.bound!=d&&(e+=r.bound.height);a=(d.top-t.bottom-e)/o}else{r!=i&&o--;for(let t of w)t.bound!=r&&t.bound!=i&&(e+=t.bound.width);a=(i.left-r.right-e)/o}let s,n=0;for(let e of w){let o,u,h=0;if("ver"==p){if(e.bound!=t&&e.bound!=d){h=1,n+=u=s.bound.bottom+n+a-e.bound.top,o="y"}}else if(e.bound!=r&&e.bound!=i){h=1,n+=u=s.bound.right+n+a-e.bound.left,o="x"}if(h){k=1;let t=e.m,r=l.Vframe.byNode(l.node(t.id));if(r){for(let e of t.ctrl.moved)e.use==o&&(t.props[e.key]+=u);r.invoke("assign",[{element:t}])&&r.invoke("render")}}s=e}}else{let e=w[0],t=1,r=w.length-1,i=r,a=e.m,o=(f-g)/i,s=(h-c)/i;for(let e=t;e<r;e++){let t=w[e].m,r=0,i="",d=0;if("ver"==p){let e=a.props.y+a.props.height/2;e+=o,e-=t.props.height/2,t.props.y!=e&&(r=1,d=e-t.props.y,i="y")}else{let e=a.props.x+a.props.width/2;e+=s,e-=t.props.width/2,t.props.x!=e&&(r=1,d=e-t.props.x,i="x")}if(r){k=1;let e=l.Vframe.byNode(l.node(t.id));if(e){for(let e of t.ctrl.moved)e.use==i&&(t.props[e.key]+=d);e.invoke("assign",[{element:t}])&&e.invoke("render")}}a=t}}k&&(l.State.fire("stageSelectElementPropsChange"),a.default.save())}})}),define("designer/toolbar",["magix","./toolbar-do","./toolbar-align","./toolbar-space","./toolbar-layer","./toolbar-del","./toolbar-scale","./toolbar-panels"],(e,t,r)=>{let i;e("./toolbar-do"),e("./toolbar-align"),e("./toolbar-space"),e("./toolbar-layer"),e("./toolbar-del"),e("./toolbar-scale"),e("./toolbar-panels"),Object.defineProperty(t,"__esModule",{value:!0});const l=e("magix");l.default.applyStyle("rd-f",".rd-ag{height:22px}.rd-ah{cursor:pointer;height:22px;width:22px;margin:0 2px;display:inline-flex;align-items:center;justify-content:center;border-radius:2px}.rd-ah:hover{background:#e6e6e6;color:#333}.rd-ai,.rd-ai:hover{background:#c4c4c4}.rd-aj{height:16px;width:1px;background:#eee;margin:3px 12px;float:left}.rd-ak{color:#aaa;cursor:not-allowed}.rd-ak:hover{color:#aaa;background:transparent}.rd-al{font-weight:400;font-size:14px;width:40px;display:inline-block;text-align:center}"),t.default=l.default.View.extend({tmpl:(e,t,r)=>{if(!i){let e,l=[];e=[t("div",{class:"rd-ag","mx5-view":"designer/toolbar-do"}),t("div",{class:"rd-ag","mx5-view":"designer/toolbar-align"}),t("div",{class:"rd-ag","mx5-view":"designer/toolbar-space"}),t("div",{class:"rd-ag","mx5-view":"designer/toolbar-layer"}),t("div",{class:"rd-ag","mx5-view":"designer/toolbar-del"})],l.push(t("div",{class:"rd-E rd-b rd-d"},e)),e=[t("div",{class:"rd-ag","mx5-view":"designer/toolbar-scale"}),t("i",{class:"rd-aj"}),t("div",{class:"rd-ag","mx5-view":"designer/toolbar-panels"})],l.push(t("div",{class:"rd-E rd-b rd-e"},e)),i=t(r,0,l)}return i},render(){this.digest()}})});